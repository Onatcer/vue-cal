import{c as M,v as ne,D as B,V as Te,W as g,r as X,O as pe}from"./index-LYUUNaix.js";const N={texts:{weekDays:Array(7).fill(""),weekDaysShort:[],months:Array(12).fill(""),years:"",year:"",month:"",week:"",day:"",today:"",noEvent:"",allDay:"",deleteEvent:"",createEvent:"",dateFormat:"dddd MMMM D, YYYY",am:"am",pm:"pm",truncations:!0},availableViews:{day:{cols:1,rows:1},days:{cols:10,rows:1},week:{cols:7,rows:1},month:{cols:7,rows:6},year:{cols:4,rows:3},years:{cols:5,rows:5}}},je=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"],Me=["sun","mon","tue","wed","thu","fri","sat"],Ee=Me.reduce((u,n,v)=>(u[n]=v||7,u),{}),be=(u,n,v)=>{const{dateUtils:O}=u,C=!1,E=M(()=>{if(S.value[n.view])return n.view;{const d=n.datePicker?"month":"week",c=n.view||d;return S.value[c]?c:(console.warn(`Vue Cal: the provided or default view \`${c}\` is either invalid or not in the list of available views. The first available view will be chosen: \`${Object.keys(S.value)[0]}\`.`),Object.keys(S.value)[0])}}),W=M(()=>n.sm&&!n.xs),m=M(()=>n.xs||n.datePicker),x=M(()=>n.clickToNavigate||n.datePicker&&n.clickToNavigate!==!1),A=M(()=>{const d={cell:{},event:{}},c=_=>_.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return Object.entries(v).forEach(([_,t])=>{const[k,Y,L]=_.match(/^on(Cell|Event)(.+)$/)||[];k&&(d[Y.toLowerCase()][c(L).replace(/^-+|-+$/g,"")]=t)}),d}),$=M(()=>{var c;const d={};return n.hideWeekends&&(d[6]=!0)&&(d[7]=!0),(c=n.hideWeekdays)!=null&&c.length&&n.hideWeekdays.forEach(_=>d[Ee[_]]=!0),d}),p=M(()=>n.hideWeekends||$.value[6]&&$.value[7]),S=M(()=>{const d=n.datePicker;let c=0,_={};const t=n.views;return d&&!t?{month:{...N.availableViews.month},year:{...N.availableViews.year},years:{...N.availableViews.years}}:(t?(Array.isArray(t)?_=t.reduce((k,Y)=>(typeof Y=="string"&&N.availableViews[Y]?k[Y]=N.availableViews[Y]:c++,k),{}):typeof t=="object"&&(_=Object.entries(t).reduce((k,[Y,L])=>{const{cols:Q,rows:G}=N.availableViews[Y];return k[Y]={cols:L.cols||Q,rows:L.rows||G},k},{})),c&&console.warn("Vue Cal: the provided `views` prop contains invalid views that will be ignored."),Object.keys(_).length||(console.warn("Vue Cal: No valid view in the provided `views` prop. Falling back to default views."),_={...N.availableViews})):_={...N.availableViews},_)}),R=M(()=>n.datePicker?"month":S.value.week?"week":Object.keys(S.value)[0]),r=M(()=>{if(typeof n.selectedDate=="string")return O.stringToDate(n.selectedDate);if(n.selectedDate instanceof Date)return n.selectedDate;n.selectedDate?console.warn("Vue Cal: The provided selected date is invalid:",n.selectedDate):console.log("Vue Cal: Info - The provided selected date is undefined.")}),T=M(()=>{if(!n.disableDays)return[];const d=[];return Array.isArray(n.disableDays)?n.disableDays.forEach(c=>{let _=c;if(typeof c=="string"?_=O.stringToDate(c):c instanceof Date&&(c=O.formatDate(c,"YYYY-MM-DD")),_ instanceof Date&&!isNaN(_.getTime())){d.push(c);return}else console.warn("Vue Cal: The provided `disableDays` prop contains an invalid date:",c)}):console.warn("Vue Cal: The provided `disableDays` prop is invalid:",n.disableDays),d}),a=M(()=>{let d=null;return n.minDate&&typeof n.minDate=="string"?d=O.stringToDate(n.minDate):n.minDate&&n.minDate instanceof Date&&(d=n.minDate),(d==null?void 0:d.getTime())||null}),i=M(()=>{let d=null;return n.maxDate&&typeof n.maxDate=="string"?d=O.stringToDate(n.maxDate):n.maxDate&&n.maxDate instanceof Date&&(d=n.maxDate),(d==null?void 0:d.getTime())||null}),D=M(()=>{var _;const{view:d}=u;return n.schedules.length&&(d.isDay||d.isDays||d.isWeek)&&((_=n.schedules)==null?void 0:_.map((t,k)=>({...t,id:t.id??k+1})))||void 0}),f=M(()=>{const d={drag:!0,resize:!0,delete:!0,create:!0};return n.editableEvents===!0?d:n.editableEvents===!1?Object.keys(d).map(c=>d[c]=!1):{...d,...n.editableEvents}}),h=async d=>{var _;let c=Object.assign({"../i18n/ar.json":()=>g(()=>import("./ar-BYzjjpsv.js"),[]).then(t=>t.default),"../i18n/bg.json":()=>g(()=>import("./bg-DMHwWaHq.js"),[]).then(t=>t.default),"../i18n/bn.json":()=>g(()=>import("./bn-BMHg_6Cc.js"),[]).then(t=>t.default),"../i18n/bs.json":()=>g(()=>import("./bs-BQ6MYvQz.js"),[]).then(t=>t.default),"../i18n/ca.json":()=>g(()=>import("./ca-RJZ1kJCp.js"),[]).then(t=>t.default),"../i18n/cs.json":()=>g(()=>import("./cs-DUR8CfDR.js"),[]).then(t=>t.default),"../i18n/da.json":()=>g(()=>import("./da-C24v82sE.js"),[]).then(t=>t.default),"../i18n/de.json":()=>g(()=>import("./de-BdfGCsIh.js"),[]).then(t=>t.default),"../i18n/el.json":()=>g(()=>import("./el-BbeSS82J.js"),[]).then(t=>t.default),"../i18n/en-gb.json":()=>g(()=>import("./en-gb-CdanBkea.js"),[]).then(t=>t.default),"../i18n/en-us.json":()=>g(()=>import("./en-us-DGsNxWQW.js"),[]).then(t=>t.default),"../i18n/es.json":()=>g(()=>import("./es-BAvNIXnQ.js"),[]).then(t=>t.default),"../i18n/et.json":()=>g(()=>import("./et-BB2GC4z2.js"),[]).then(t=>t.default),"../i18n/fa.json":()=>g(()=>import("./fa-CLNQrKiD.js"),[]).then(t=>t.default),"../i18n/fi.json":()=>g(()=>import("./fi-C3bvOL2F.js"),[]).then(t=>t.default),"../i18n/fr.json":()=>g(()=>import("./fr-GKuwB6u6.js"),[]).then(t=>t.default),"../i18n/he.json":()=>g(()=>import("./he-dgw3ddFB.js"),[]).then(t=>t.default),"../i18n/hr.json":()=>g(()=>import("./hr-H7xnaszL.js"),[]).then(t=>t.default),"../i18n/hu.json":()=>g(()=>import("./hu-D5PQi6ht.js"),[]).then(t=>t.default),"../i18n/id.json":()=>g(()=>import("./id-C4V9iQKh.js"),[]).then(t=>t.default),"../i18n/is.json":()=>g(()=>import("./is-B36p4HLL.js"),[]).then(t=>t.default),"../i18n/it.json":()=>g(()=>import("./it-BYE8Pv4L.js"),[]).then(t=>t.default),"../i18n/ja.json":()=>g(()=>import("./ja-C_20UUx6.js"),[]).then(t=>t.default),"../i18n/ka.json":()=>g(()=>import("./ka-CNxn4HrL.js"),[]).then(t=>t.default),"../i18n/ko.json":()=>g(()=>import("./ko-C66lSvgy.js"),[]).then(t=>t.default),"../i18n/lt.json":()=>g(()=>import("./lt-CSQtJejA.js"),[]).then(t=>t.default),"../i18n/mn.json":()=>g(()=>import("./mn-OFyF7cuL.js"),[]).then(t=>t.default),"../i18n/nl.json":()=>g(()=>import("./nl-p6pls65L.js"),[]).then(t=>t.default),"../i18n/no.json":()=>g(()=>import("./no-ukJhddl5.js"),[]).then(t=>t.default),"../i18n/pl.json":()=>g(()=>import("./pl-BLhEwn5P.js"),[]).then(t=>t.default),"../i18n/pt-br.json":()=>g(()=>import("./pt-br-Bqj88eex.js"),[]).then(t=>t.default),"../i18n/pt-pt.json":()=>g(()=>import("./pt-pt-Bqj88eex.js"),[]).then(t=>t.default),"../i18n/ro.json":()=>g(()=>import("./ro-DIcQOJbf.js"),[]).then(t=>t.default),"../i18n/ru.json":()=>g(()=>import("./ru-CFk3STll.js"),[]).then(t=>t.default),"../i18n/sk.json":()=>g(()=>import("./sk-BVV3GKLZ.js"),[]).then(t=>t.default),"../i18n/sl.json":()=>g(()=>import("./sl-f5pM865d.js"),[]).then(t=>t.default),"../i18n/sq.json":()=>g(()=>import("./sq-BsCWVll4.js"),[]).then(t=>t.default),"../i18n/sr.json":()=>g(()=>import("./sr-BpAzoY7E.js"),[]).then(t=>t.default),"../i18n/sv.json":()=>g(()=>import("./sv-ifbbDt9U.js"),[]).then(t=>t.default),"../i18n/tr.json":()=>g(()=>import("./tr-CqPh9iY6.js"),[]).then(t=>t.default),"../i18n/uk.json":()=>g(()=>import("./uk-CBcda3hV.js"),[]).then(t=>t.default),"../i18n/vi.json":()=>g(()=>import("./vi-Lfa-VYGA.js"),[]).then(t=>t.default),"../i18n/zh-cn.json":()=>g(()=>import("./zh-cn-CFCd-XoD.js"),[]).then(t=>t.default),"../i18n/zh-hk.json":()=>g(()=>import("./zh-hk-BYHSteah.js"),[]).then(t=>t.default)});{if(!c[`../i18n/${d}.json`]){console.warn(`Vue Cal: the locale \`${d}\` does not exist. Falling back to \`en-us\`.`),d="en-us";return}c=await((_=c[`../i18n/${d}.json`])==null?void 0:_.call(c))}u.texts=Object.assign(u.texts,Object.assign({...N.texts},c)),O.updateTexts(u.texts)};let b=ne(n.events||[]);return B(()=>n.events,d=>b.splice(0,b.length,...d)),(n.locale||!u.texts.today)&&h(n.locale||"en-us"),{...Te(n),events:b,eventListeners:A,defaultView:R,availableViews:S,disableDays:T,ready:C,sm:W,xs:m,clickToNavigate:x,hideWeekdays:$,hideWeekends:p,minTimestamp:a,maxTimestamp:i,schedules:D,selectedDate:r,editableEvents:f,view:E,get hasHiddenDays(){return Object.keys($.value).length},get size(){return m.value?"xs":W.value?"sm":"lg"},loadTexts:h}},Ie=(u,n)=>{const v=n.timeTo-n.timeFrom;return(u-n.timeFrom)*100/v},Ve=(u,n)=>{const v=n.timeTo-n.timeFrom;return~~(u*v/100+n.timeFrom)},ke=(u,n)=>{const v=n.clientHeight;return u*100/v},le=ne({id:null,date:null});let ve=!1,fe=!0;const Z=ne({el:null,cell:null,timeout:null}),q=ne({eventId:null,fromVueCal:null,toVueCal:null});function Oe(u){const{config:n,view:v,eventsManager:O,emit:C,uid:E,dateUtils:W}=u,m=a=>{var c;const{timeStep:i,timeCellHeight:D,timeFrom:f}=n,h=(((c=a.touches)==null?void 0:c[0])||a).clientY,{top:b}=a.currentTarget.getBoundingClientRect(),d=h-b-~~a.dataTransfer.getData("cursor-grab-at");return Ve(ke(d,a.currentTarget),n)},x=(a,i,D)=>{const f=i.duration||A(i.start,i.end)||n.timeStep;let h=Math.max(m(a),0);if(n.snapToInterval){const _=h+n.snapToInterval/2;h=_-_%n.snapToInterval}const b=new Date(new Date(D).setMinutes(h)),d=Math.min(h+f,24*60),c=new Date(new Date(D).setMinutes(d));return{start:b,end:c}},A=(a,i)=>Math.round((i-a)/6e4);return{eventDragStart:(a,i)=>{if(a.target.nodeType===3||u.touch.isResizingEvent)return a.preventDefault();a.dataTransfer.dropEffect="move";const D={...i,_:{id:i._.id,duration:A(i.start,i.end)}};a.dataTransfer.setData("event",JSON.stringify(D)),a.dataTransfer.setData("cursor-grab-at",a.offsetY),q.eventId=i._.id,q.fromVueCal=E;const f=a.target.closest(".vuecal__event");f.classList.add("vuecal__event--dragging-ghost"),setTimeout(()=>{f.classList.add("vuecal__event--dragging-original"),f.classList.remove("vuecal__event--dragging-ghost")},0),ve=!1,Object.assign(le,{id:v.id,date:v.firstCellDate}),fe=!0,u.touch.isDraggingEvent=!0},eventDragEnd:(a,i)=>{q.eventId=null,a.target.closest(".vuecal__event").classList.remove("vuecal__event--dragging-original");const{fromVueCal:D,toVueCal:f}=q;f&&D!==f&&O.deleteEvent(i._.id,3),q.fromVueCal=null,q.toVueCal=null,ve&&fe&&le.id&&v.switchView(le.id,le.date,!0),u.touch.isDraggingEvent=!1},cellDragEnter:(a,i)=>{const{start:D}=i,f=a.currentTarget;if(!a.currentTarget.contains(a.relatedTarget)){if(f===Z.el||!f.className.includes("vuecal__cell-content"))return!1;Z.el&&(Z.cell.highlighted=!1),Object.assign(Z,{el:f,cell:i,timeout:clearTimeout(Z.timeout)}),i.highlighted=!0,["years","year","month"].includes(v.id)&&(Z.timeout=setTimeout(()=>u.switchToNarrowerView(D),2e3))}},cellDragOver:(a,i)=>{const{start:D,schedule:f}=i;a.preventDefault(),i.highlighted=!0,(f||f===0)&&(i.highlightedSchedule=f)},cellDragLeave:(a,i)=>{a.preventDefault(),!a.currentTarget.contains(a.relatedTarget)&&(i.highlightedSchedule=!1,Z.cell===i&&(clearTimeout(Z.timeout),Object.assign(Z,{el:null,cell:null,timeout:null}),i.highlighted=!1))},cellDragDrop:async(a,i)=>{var k,Y,L;a.preventDefault(),clearTimeout(Z.timeout),Object.assign(Z,{el:null,cell:null,timeout:null});const D=JSON.parse(a.dataTransfer.getData("event")||"{}");D.start&&(D.start=new Date(D.start)),D.end&&(D.end=new Date(D.end));let f;const{start:h,end:b}=x(a,D,i.start),{schedule:d}=((k=a.target.closest("[data-schedule]"))==null?void 0:k.dataset)||{};let c=()=>{};q.fromVueCal===E?(f=O.getEvent(D._.id),f&&(f._.dragging=!1,c=()=>{f.start=h,f.end=b,d!==void 0&&(f.schedule=~~d)})):(f={...D,start:h,end:b,...d!==void 0&&{schedule:~~d},_:{id:((Y=D._)==null?void 0:Y.id)||D.id,duration:A(h,b)},getOverlappingEvents:()=>O.getEventsInRange(O.getEventsByDate(W.formatDate(h),!0),{start:h,end:b},{schedule:~~d})},c=()=>{f=O.createEvent(f)});let _=!0;const{drop:t}=(L=n.eventListeners)==null?void 0:L.event;t&&(_=await t({e:a,event:{...f,start:h,end:b,schedule:~~d},overlaps:f.getOverlappingEvents({start:h,end:b,schedule:~~d}),cell:i,external:q.fromVueCal!==E})),_!==!1&&c(),i.highlighted=!1,i.highlightedSchedule=null,fe=!1,q.toVueCal=E,C("event-dropped",{event:f,originalEvent:D,external:q.fromVueCal!==E}),C("event-change",{event:f,originalEvent:D})}}}const he=u=>{let n,v,O,C={},E={};const W=X(u),m=()=>{Date.prototype.addDays=function(e){return p(this,e||0)},Date.prototype.subtractDays=function(e){return S(this,e||0)},Date.prototype.addHours=function(e){return R(this,e||0)},Date.prototype.subtractHours=function(e){return r(this,e||0)},Date.prototype.addMinutes=function(e){return T(this,e||0)},Date.prototype.subtractMinutes=function(e){return a(this,e||0)},Date.prototype.getWeek=function(){return D(this)},Date.prototype.isToday=function(){return f(this)},Date.prototype.isLeapYear=function(){return d(this)},Date.prototype.format=function(e="YYYY-MM-DD"){return Q(this,e)},Date.prototype.formatTime=function(e="HH:mm"){return re(this,e)}},x=()=>{delete Date.prototype.addDays,delete Date.prototype.subtractDays,delete Date.prototype.addHours,delete Date.prototype.subtractHours,delete Date.prototype.addMinutes,delete Date.prototype.subtractMinutes,delete Date.prototype.getWeek,delete Date.prototype.isToday,delete Date.prototype.isLeapYear,delete Date.prototype.format,delete Date.prototype.formatTime},A=e=>W.value=e,$=()=>(v!==new Date().getDate()&&(n=new Date,v=n.getDate(),O=`${n.getFullYear()}-${n.getMonth()}-${n.getDate()}`),O),p=(e,o)=>{const s=new Date(e.valueOf());return s.setDate(s.getDate()+o),s},S=(e,o)=>{const s=new Date(e.valueOf());return s.setDate(s.getDate()-o),s},R=(e,o)=>{const s=new Date(e.valueOf());return s.setHours(s.getHours()+o),s},r=(e,o)=>{const s=new Date(e.valueOf());return s.setHours(s.getHours()-o),s},T=(e,o)=>{const s=new Date(e.valueOf());return s.setMinutes(s.getMinutes()+o),s},a=(e,o)=>{const s=new Date(e.valueOf());return s.setMinutes(s.getMinutes()-o),s},i=(e,o)=>{const s=V=>{const j=V%o;return j!==0&&(V+=j>=o/2?o-j:-j),V};if(typeof e=="number")return s(e);if(e instanceof Date){let V=s(e.getMinutes());V>=60&&(e.setHours(e.getHours()+1),V=0),e.setMinutes(V,0,0)}},D=(e,o=!1)=>{const s=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())),V=s.getUTCDay()||7;s.setUTCDate(s.getUTCDate()+4-V);const j=new Date(Date.UTC(s.getUTCFullYear(),0,1));return Math.ceil(((s-j)/864e5+1)/7)+(o?1:0)},f=e=>`${e.getFullYear()}-${e.getMonth()}-${e.getDate()}`===$(),h=(e,o)=>{if(!e||!o)return console.warn(`Vue Cal: missing date${e?"2":"1"} parameter for comparison with \`isSameDate(date1, date2)\`.`);if(L(e)){if(!L(o))return console.warn(`Vue Cal: invalid date2 provided for comparison with \`isSameDate(date1, date2)\`: \`${o}\`.`)}else return console.warn(`Vue Cal: invalid date1 provided for comparison with \`isSameDate(date1, date2)\`: \`${e}\`.`);return e.getFullYear()===o.getFullYear()&&e.getMonth()===o.getMonth()&&e.getDate()===o.getDate()},b=(e,o,s)=>L(e)?e.getTime()>=o&&e.getTime()<=s:console.warn(`Vue Cal: invalid date provided to \`isInRange(date, rangeStart, rangeEnd)\`: \`${e}\`.`),d=e=>{const o=e.getFullYear();return!(o%400)||o%100&&!(o%4)},c=(e=null,o)=>{const s=e&&new Date(e.valueOf())||new Date,V=o?7:6;return s.setDate(s.getDate()-(s.getDay()+V)%7),s},_=e=>e instanceof Date?e:(e.length===10&&(e+=" 00:00"),new Date(e.replace(/-/g,"/"))),t=e=>e.getHours()*60+e.getMinutes(),k=(e,o)=>{typeof e=="string"&&(e=e.replace(/-/g,"/")),typeof o=="string"&&(o=o.replace(/-/g,"/")),e=new Date(e).setHours(0,0,0,0),o=new Date(o).setHours(0,0,1,0);const s=(new Date(o).getTimezoneOffset()-new Date(e).getTimezoneOffset())*60*1e3;return Math.ceil((o-e-s)/(24*3600*1e3))},Y=(e,o,s)=>Math.abs(e.getTime()-o.getTime())<=s*60*1e3,L=e=>e&&e instanceof Date&&!isNaN(e),Q=(e,o="YYYY-MM-DD",s=null)=>{if(s||(s=W.value),o||(o="YYYY-MM-DD"),o==="YYYY-MM-DD")return G(e);C={},E={};const V={YYYY:()=>H(e,s).YYYY,YY:()=>H(e,s).YY(),M:()=>H(e,s).M,MM:()=>H(e,s).MM(),MMM:()=>H(e,s).MMM(),MMMM:()=>H(e,s).MMMM(),MMMMG:()=>H(e,s).MMMMG(),D:()=>H(e,s).D,DD:()=>H(e,s).DD(),S:()=>H(e,s).S(),d:()=>H(e,s).d,dd:()=>H(e,s).dd(),ddd:()=>H(e,s).ddd(),dddd:()=>H(e,s).dddd(),HH:()=>z(e,s).HH,H:()=>z(e,s).H,hh:()=>z(e,s).hh,h:()=>z(e,s).h,am:()=>z(e,s).am,AM:()=>z(e,s).AM,mm:()=>z(e,s).mm,m:()=>z(e,s).m,s:()=>z(e,s).s};return o.replace(/(\{[a-zA-Z]+\}|[a-zA-Z]+)/g,(j,J)=>{const P=V[J.replace(/\{|\}/g,"")];return P!==void 0?P():J})},G=e=>{const o=e.getMonth()+1,s=e.getDate();return`${e.getFullYear()}-${o<10?"0":""}${o}-${s<10?"0":""}${s}`},re=(e,o="HH:mm",s=null,V=!1)=>{let j=!1;if(V){const[U,ee,te]=[e.getHours(),e.getMinutes(),e.getSeconds()];U+ee+te===141&&(j=!0)}if(e instanceof Date&&o==="HH:mm")return j?"24:00":K(e);E={},s||(s=W.value);const J=z(e,s),P=o.replace(/(\{[a-zA-Z]+\}|[a-zA-Z]+)/g,(U,ee)=>{const te=J[ee.replace(/\{|\}/g,"")];return te!==void 0?te:ee});return j?P.replace("23:59","24:00"):P},K=e=>{const o=e.getHours(),s=e.getMinutes();return`${(o<10?"0":"")+o}:${(s<10?"0":"")+s}`},ue=e=>{const o=Math.floor(e/60).toString().padStart(2,0),s=(e%60).toString().padStart(2,0);return`${o}:${s}`},oe=e=>{if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},H=(e,o)=>{if(C.D)return C;const s=e.getFullYear(),V=e.getMonth()+1,j=e.getDate(),P=(e.getDay()-1+7)%7;return C={YYYY:s,YY:()=>s.toString().substring(2),M:V,MM:()=>V.toString().padStart(2,0),MMM:()=>o.months[V-1].substring(0,3),MMMM:()=>o.months[V-1],MMMMG:()=>(o.monthsGenitive||o.months)[V-1],D:j,DD:()=>j.toString().padStart(2,0),S:()=>oe(j),d:P+1,dd:()=>o.weekDaysShort.length?o.weekDaysShort[P]:o.weekDays[P][0],ddd:()=>o.weekDaysShort.length?o.weekDaysShort[P]:o.weekDays[P].substr(0,3),dddd:()=>o.weekDays[P]},C},z=(e,o)=>{if(E.am)return E;let s,V,j;e instanceof Date?(s=e.getHours(),V=e.getMinutes(),j=e.getSeconds()):(s=Math.floor(e/60),V=Math.floor(e%60));const J=s%12?s%12:12,P=(o||{am:"am",pm:"pm"})[s===24||s<12?"am":"pm"];return E={H:s,h:J,HH:s.toString().padStart(2,0),hh:J.toString().padStart(2,0),am:P,AM:P.toUpperCase(),m:V,mm:V.toString().padStart(2,0),s:j},E};return{addDatePrototypes:m,removeDatePrototypes:x,updateTexts:A,addDays:p,subtractDays:S,addHours:R,subtractHours:r,addMinutes:T,subtractMinutes:a,snapToInterval:i,getWeek:D,isToday:f,isSameDate:h,isInRange:b,isLeapYear:d,getPreviousFirstDayOfWeek:c,stringToDate:_,dateToMinutes:t,countDays:k,datesInSameTimeStep:Y,isValid:L,formatDate:Q,formatDateLite:G,formatTime:re,formatTimeLite:K,formatMinutes:ue}},Se=u=>{const{dateUtils:n,config:v}=u;let O=0;const C=M(()=>{const r={byDate:{},recurring:[],multiday:[],byId:{}};return v.events.sort((a,i)=>a.start-i.start<0?-1:1).forEach(a=>{E(a),a._||(a._={}),a._.id=a._.id||++O,a.delete||(a.delete=i=>$(a._.id,i)),a._.deleting=!1,a._.deleted=!1,a.isOverlapping=(i=null)=>a.getOverlappingEvents(i).length,a.getOverlappingEvents=(i=null)=>{var D;return S(m(n.formatDate((i==null?void 0:i.start)||a.start),!0),{start:(i==null?void 0:i.start)||a.start,end:(i==null?void 0:i.end)||a.end},{excludeIds:[a._.id],schedule:(D=v.schedules)!=null&&D.length?~~((i==null?void 0:i.schedule)||a.schedule):null})},a._.register=i=>{a._.$el=i,a._.fireCreated&&(u.emit("event-created",a),delete a._.fireCreated)},a._.unregister=()=>a._.$el=null,r.byId[a._.id]=a,a.recurring?r.recurring.push(a._.id):a._.multiday?(r.multiday.push(a._.id),r.byDate[a._.startFormatted]||(r.byDate[a._.startFormatted]=[]),r.byDate[a._.startFormatted].push(a._.id)):(r.byDate[a._.startFormatted]||(r.byDate[a._.startFormatted]=[]),r.byDate[a._.startFormatted].push(a._.id))}),r}),E=r=>{if(typeof r.start=="string"&&(r.start=n.stringToDate(r.start)),typeof r.end=="string"&&(r.end=n.stringToDate(r.end)),r.start.setSeconds(0,0),r.end.setSeconds(0,0),isNaN(r.start)||isNaN(r.end)){isNaN(r.start)?console.error(`Vue Cal: invalid start date for event "${r.title}".`,r.start):console.error(`Vue Cal: invalid end date for event "${r.title}".`,r.end);return}else r.end.getTime()<r.start.getTime()&&console.error(`Vue Cal: invalid event dates for event "${r.title}". The event ends before it starts.`,r.start,r.end);r._||(r._={}),r._.multiday=!n.isSameDate(r.start,new Date(r.end.getTime()-1)),r._.startFormatted=n.formatDate(r.start),r._.startMinutes=~~n.dateToMinutes(r.start),r._.endMinutes=~~n.dateToMinutes(r.end);const T=r.start.getHours(),a=r.start.getMinutes().toString().padStart(2,0),i=r.end.getHours(),D=r.end.getMinutes().toString().padStart(2,0);r._.startTimeFormatted24=`${T.toString().padStart(2,0)}:${a}`,r._.startTimeFormatted12=`${T%12||12}${a?`:${a}`:""} ${T<12?"AM":"PM"}`,r._.endTimeFormatted24=`${i.toString().padStart(2,0)}:${D}`,r._.endTimeFormatted12=`${i%12||12}${D?`:${D}`:""} ${i<12?"AM":"PM"}`,r._.duration=Math.abs(~~((r.end-r.start)/6e4))},W=r=>C.value.byId[r],m=(r,T=!1,a=!1)=>{let i=C.value.byDate[r]||[];return i=T||a?i.map(W):i,a||(i=i.filter(D=>!D.background),T||(i=i.map(D=>D._.id))),i},x=r=>{const T={};return r.forEach(({startFormatted:a})=>{T[a]=[];const i=m(a,!1,!0);i.length&&T[a].push(...i)}),T},A=r=>{if(!r.start||!r.end){console.error("Vue Cal: Cannot create an event without valid start and end dates.");return}return v.snapToInterval&&(n.snapToInterval(r.start,v.snapToInterval),n.snapToInterval(r.end,v.snapToInterval)),r._||(r._={}),r._.id=++O,r._.fireCreated=!0,v.events.push(r),r},$=(r,T=0)=>{var D;if(!v.editableEvents.delete)return;if(!r)return console.warn(`Vue Cal: Cannot delete unknown event \`${r}\`.`);const a=v.events.findIndex(f=>f._.id===r);if(a===-1)return console.warn(`Vue Cal: Cannot delete unknown event \`${r}\`.`);const i=v.events[a];if(i.deletable===!1)return console.warn(`Vue Cal: Can't delete event \`${r}\` since it was explicitely set to \`delete: false\`.`);switch(T){case 0:i._.deleting?i._.deleted?v.events.splice(a,1):i._.deleted=!0:i._.deleting=!0;break;case 1:i._.deleting=!0,v.events[a]._.deleting=!0;break;case 2:i._.deleted=!0,v.events[a]._.deleted=!0,(D=i._.$el)==null||D.dispatchEvent(new CustomEvent("event-deleted",{detail:i._.id}));break;case 3:v.events.splice(a,1),u.emit("update:events",v.events),u.emit("event-delete",i);break}return!0},p=r=>{const T=m(r,!0);if(!T.length)return{cellOverlaps:{},longestStreak:0};let a={},i=[],D=0;T.sort((f,h)=>f.start-h.start||f.end-f.start-(h.end-h.start));for(const f of T){const h=f._.id;a[h]||(a[h]={overlaps:new Set,maxConcurrent:1,position:0}),i=i.filter(t=>t.end>f.start);let b=i.filter(t=>{var Y;return(!((Y=v.schedules)!=null&&Y.length)||f.schedule===t.schedule)&&t.start<f.end}),d=new Set(b.map(t=>{var k;return((k=a[t._.id])==null?void 0:k.position)??0})),c=0;for(;d.has(c);)c++;a[h].position=c,i.push(f);let _=Math.max(1,...b.map(t=>{var k;return((k=a[t._.id])==null?void 0:k.maxConcurrent)??1}));a[h].maxConcurrent=Math.max(b.length+1,_);for(const t of b)a[t._.id].overlaps.add(h),a[h].overlaps.add(t._.id),a[t._.id].maxConcurrent=a[h].maxConcurrent;D=Math.max(D,a[h].maxConcurrent)}for(const f in a)a[f].overlaps=[...a[f].overlaps];return{cellOverlaps:a,longestStreak:D}},S=(r=[],{start:T,end:a},{excludeIds:i=[],schedule:D=null})=>{var b;const f=new Set(i),h=[];for(const d of r)!f.has((b=d._)==null?void 0:b.id)&&(D===null||D===d.schedule)&&R(d,T,a)&&h.push(d);return h},R=(r,T,a)=>{const i=r.allDay||!v.time,D=i?new Date(r.start).setHours(0,0,0,0):r.start.getTime(),f=i?new Date(r.end).setHours(23,59,59,999):r.end.getTime(),h=i?new Date(T).setHours(0,0,0,0):T.getTime(),b=i?new Date(a).setHours(23,59,59,999):a.getTime();return f>h&&D<b};return{events:C,getEvent:W,getEventsByDate:m,getViewEvents:x,getCellOverlappingEvents:p,getEventsInRange:S,createEvent:A,deleteEvent:$,isEventInRange:R}},Ye=({config:u,dateUtils:n,emit:v,texts:O,eventsManager:C},E)=>{const{availableViews:W}=u,m=X(u.view&&W[u.view]?u.view:u.defaultView),x=X(u.selectedDate||null);let A=X(new Date);const $=X(new Date(u.viewDate||A.value));$.value.setHours(0,0,0,0);const p=X(new Date($));let S=null;const R=M(()=>m.value==="month"?p.value:c.value),r=M(()=>m.value==="month"?new Date(p.value.getFullYear(),p.value.getMonth()+1,0,23,59,59,999):t.value),T=M(()=>m.value==="week"?n.getPreviousFirstDayOfWeek(c.value,u.startWeekOnSunday):m.value==="month"?c.value:R.value),a=M(()=>{if(m.value==="week"){const l=n.addDays(T.value,7);return l.setMilliseconds(-1),l}else if(m.value==="month")return t.value;return r.value}),i=M(()=>{const l=A.value.getTime();if(m.value==="week")return T.value.getTime()<=l&&l<=a.value.getTime();const w=c.value.getTime(),y=t.value.getTime();return w<=l&&l<=y});function D(){A.value=new Date,S=setTimeout(D,60*1e3)}function f(){S=setTimeout(D,(60-new Date().getSeconds())*1e3),D()}const h=M(()=>{if(!u.availableViews[m.value])return 1;let l=u.availableViews[m.value].cols;return u.hasHiddenDays&&["week","month"].includes(m.value)&&(l-=u.hasHiddenDays),l}),b=M(()=>{var l;return((l=u.availableViews[m.value])==null?void 0:l.rows)||1}),d=M(()=>h.value*b.value),c=M(()=>{if(m.value==="month"){let l=p.value.getDay()||7;return u.startWeekOnSunday&&!u.hideWeekdays[7]&&(l+=1),u.viewDayOffset&&(l-=u.viewDayOffset),n.subtractDays(p.value,l-1)}else if(m.value==="week"){const l="1234567".split("").filter(y=>!Object.keys(u.hideWeekdays).includes(y));let w=Math.min(...l);return u.startWeekOnSunday&&!u.hideWeekdays[7]&&(w=1),u.viewDayOffset&&(w+=u.viewDayOffset),n.addDays(p.value,w-1)}else return p.value}),_=M(()=>{const l=[],w=["days","week","month"].includes(m.value);let y=0;for(let I=0;I<d.value+y;I++)switch(m.value){case"day":case"days":case"week":case"month":{const F=n.addDays(c.value,I),ie=F.getDay()||7;if(w&&u.hasHiddenDays&&u.hideWeekdays[ie]){y++;continue}const se=new Date(F);se.setHours(23,59,59,999),l.push({start:F,startFormatted:n.formatDate(F),end:se});break}case"year":l.push({start:new Date(c.value.getFullYear(),I,1,0,0,0,0),end:new Date(c.value.getFullYear(),I+1,0,23,59,59,999)});break;case"years":l.push({start:new Date(c.value.getFullYear()+I,0,1,0,0,0,0),end:new Date(c.value.getFullYear()+I+1,0,0,23,59,59,999)});break}return l}),t=M(()=>_.value[_.value.length-1].end),k=X("right"),Y=M(()=>{const l=Object.keys(u.availableViews);return l[l.indexOf(m.value)+1]}),L=M(()=>{const l=Object.keys(u.availableViews);return l[l.indexOf(m.value)-1]}),Q=M(()=>{const{dateFormat:l,truncations:w}=O;switch(m.value){case"day":return n.formatDate(c.value,l);case"days":{let y=l.replace(/(\s|^)[^a-zA-Z]*?d{2,4}[^a-zA-Z]*?(\s|$)/,"");w!==!1&&(y=y.replace("MMMM","MMM"));const I=n.formatDate(c.value,y),F=n.formatDate(t.value,y);return`${I} - ${F}`}case"week":{let y=n.getWeek(c.value,u.startWeekOnSunday&&!u.hideWeekdays[7]);y=` <small>${O.week} ${y}</small>`;const I=c.value.getMonth(),F=c.value.getFullYear(),ie=t.value.getMonth(),se=t.value.getFullYear(),de=I!==ie,ye=de&&F!==se,me=w!==!1&&(u.xs||de),ce=O.months[I][me?"substring":"toString"](0,3);if(de){const ge=O.months[ie][me?"substring":"toString"](0,3);return ye?`${ce} ${F} - ${ge} ${se} ${y}`:`${ce} - ${ge} ${F} ${y}`}else return`${ce} ${F} ${y}`}case"month":{const y=`${u.xs&&w!==!1?"MMM":"MMMM"} YYYY`;return n.formatDate(R.value,y)}case"year":return c.value.getFullYear();case"years":return`${c.value.getFullYear()} - ${r.value.getFullYear()}`}});function G(){switch(p.value=new Date($.value||A.value),p.value.setHours(0,0,0,0),m.value){case"day":break;case"days":break;case"week":p.value=n.getPreviousFirstDayOfWeek(p.value,u.startWeekOnSunday&&!u.hideWeekdays[7]);break;case"month":p.value=new Date(p.value.getFullYear(),p.value.getMonth(),1,0,0,0,0);break;case"year":p.value=new Date(p.value.getFullYear(),0,1,0,0,0,0);break;case"years":p.value=new Date(p.value.getFullYear()-p.value.getFullYear()%d.value,0,1,0,0,0,0);break}v("view-change",{id:m.value,title:Q.value,start:R.value,end:r.value,extendedStart:T.value,extendedEnd:a.value,cellDates:_.value,containsToday:i.value,events:De.value}),A.value=new Date}function re(l){const w=m.value,y=u.availableViews[w];l[w]&&JSON.stringify(l[w])===JSON.stringify(y)||G()}function K(l,w=!0){const y=Object.keys(u.availableViews);m.value!==l&&(y.includes(l)?(k.value=y.indexOf(l)<y.indexOf(m.value)?"left":"right",m.value=l,v("update:view",l),G()):console.warn(`Vue Cal: the \`${l}\` view is not available.`))}function ue(){Y.value?K(Y.value):console.warn("Vue Cal: no broader view is available.")}function oe(){L.value?K(L.value):console.warn("Vue Cal: no narrower view is available.")}function H(){e(!1)}function z(){e(!0)}function e(l=!0){let w=new Date($.value);switch(m.value){case"day":case"days":l?w=n.addDays(t.value,1):w=n.subtractDays(c.value,d.value);break;case"week":{l?(w=n.addDays(a.value,1),w.setHours(0,0,0,0)):w=n.subtractDays(T.value,d.value);break}case"month":{const y=l?1:-1;w=new Date(w.getFullYear(),w.getMonth()+y,1,0,0,0,0);break}case"year":{const y=l?1:-1;w=new Date(w.getFullYear()+y,1,1,0,0,0,0);break}case"years":{const y=l?d.value:-d.value;w=new Date(w.getFullYear()+y,1,1,0,0,0,0);break}}s(w)}function o(){const l=new Date;l.setHours(0,0,0,0),s(l)}function s(l,w=!0,y=!1){if(!n.isValid(l))return console.warn("Vue Cal: can't navigate to the given date: invalid date provided to `updateViewDate(date)`.");let[I,F]=[c.value,t.value];m.value==="month"&&([I,F]=[R.value,r.value]),(!n.isInRange(l,I,F)||y)&&(l.setHours(0,0,0,0),k.value=l.getTime()<I.getTime()?"left":"right",$.value=l,w&&v("update:viewDate",l),G())}function V(l,w=!0){if(n.isValid(l)){const{isValid:y,isSameDate:I}=n;(!x.value||!y(x.value)||!I(l,x.value))&&(l.setHours(0,0,0,0),x.value=l,w&&v("update:selectedDate",l))}else return console.warn("Vue Cal: can't update the selected date: invalid date provided to `updateSelectedDate(date)`.")}function j(l){!l&&!p.value.getDay()?s(n.addDays(p.value,1),!0,!0):(k.value="left",G())}function J(l){l&&u.startWeekOnSunday&&!p.value.getDay()?s(n.addDays(p.value,1),!0,!0):!l&&u.startWeekOnSunday&&p.value.getDay()===1&&s(n.subtractDays(p.value,1),!0,!0)}function P(){console.log("toggling weekdays",u.hideWeekdays)}function U(l){const w=E.value.querySelector(".vuecal__scrollable"),y=l?l*u.timeCellHeight/u.timeStep:0;w==null||w.scrollTo({top:y,behavior:"smooth"})}function ee(){const l=new Date;U(l.getHours()*60+l.getMinutes())}function te(){U(0)}const De=M(()=>C.getViewEvents(_.value)),_e=C.createEvent,we=C.deleteEvent;return B(()=>u.view,l=>K(l,!1)),B(()=>u.availableViews,re),B(()=>u.datePicker,()=>K("month",!1)),B(()=>u.viewDate,l=>s(l,!1)),B(()=>u.selectedDate,l=>V(l,!1)),B(()=>u.startWeekOnSunday,l=>j(l)),B(()=>u.hideWeekends,l=>J(l)),B(()=>u.hideWeekdays,P),B(()=>d.value,()=>{d.value>90&&console.warn("Vue Cal: high cell count detected. Performance may degrade when interactions are enabled.")}),B(()=>u.watchRealTime,l=>{l&&u.time?f():S=clearTimeout(S)}),G(),u.time&&u.watchRealTime&&f(),pe(()=>S=clearTimeout(S)),{now:A,id:m,broaderView:Y,narrowerView:L,title:Q,viewDate:$,start:R,end:r,extendedStart:T,extendedEnd:a,firstCellDate:c,lastCellDate:t,containsToday:i,selectedDate:x,cellDates:_,cols:h,rows:b,events:De,transitionDirection:k,switch:K,broader:ue,narrower:oe,previous:H,next:z,navigate:e,goToToday:o,updateViewDate:s,updateSelectedDate:V,scrollToCurrentTime:ee,scrollToTime:U,scrollTop:te,createEvent:_e,deleteEvent:we,get isDay(){return m.value==="day"},get isDays(){return m.value==="days"},get isWeek(){return m.value==="week"},get isMonth(){return m.value==="month"},get isYear(){return m.value==="year"},get isYears(){return m.value==="years"}}},ae=ne({texts:{...N.texts},dateUtils:he(N.texts)}),$e=({props:u,emit:n,attrs:v,vuecalEl:O,uid:C})=>{const E=ne({uid:C,emit:n,texts:{...ae.texts},dateUtils:{...ae.dateUtils},now:new Date,config:{},eventsManager:{},view:{},dnd:{},touch:{isDraggingCell:!1,isDraggingEvent:!1,isResizingEvent:!1}});return E.dateUtils=he(Object.assign(N.texts,E.texts)),E.config=be(E,u,v),E.eventsManager=Se(E),E.view=Ye(E,O),E.dnd=Oe(E),E},Pe=u=>{ae.texts={...N.texts,...u},ae.dateUtils.updateTexts(ae.texts)},{addDatePrototypes:Ae,removeDatePrototypes:Le,updateTexts:He,addDays:Re,subtractDays:Fe,addHours:We,subtractHours:xe,addMinutes:Ne,subtractMinutes:ze,getWeek:Ze,isToday:Be,isSameDate:Ge,isInRange:Je,isLeapYear:qe,getPreviousFirstDayOfWeek:Ke,stringToDate:Qe,dateToMinutes:Xe,countDays:Ue,datesInSameTimeStep:et,isValid:tt,formatDate:at,formatDateLite:nt,formatTime:st,formatTimeLite:rt,formatMinutes:it}=ae.dateUtils;export{Re as a,Ae as b,je as c,ke as d,$e as e,at as f,Ie as m,Ve as p,Qe as s,Pe as u,Me as w};
