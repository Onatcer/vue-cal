import{c as E,x as ce,D as J,U as xe,V as h,r as se,N as Ne}from"./index-Ci-R4xk3.js";const z={texts:{weekDays:Array(7).fill(""),weekDaysShort:[],months:Array(12).fill(""),years:"",year:"",month:"",week:"",day:"",today:"",noEvent:"",allDay:"",deleteEvent:"",createEvent:"",dateFormat:"dddd MMMM D, YYYY",am:"am",pm:"pm",truncations:!0},availableViews:{day:{cols:1,rows:1},days:{cols:10,rows:1},week:{cols:7,rows:1},month:{cols:7,rows:6},year:{cols:4,rows:3},years:{cols:5,rows:5}}},et=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"],ze=["sun","mon","tue","wed","thu","fri","sat"],Be=ze.reduce((o,n,_)=>(o[n]=_||7,o),{}),Je=(o,n,_)=>{const{dateUtils:S}=o,A=!1,V=E(()=>{if(Y.value[n.view])return n.view;const d=n.datePicker?"month":"week",c=n.view||d;return Y.value[c]?c:(console.warn(`Vue Cal: the provided or default view \`${c}\` is either invalid or not in the list of available views. The first available view will be chosen: \`${Object.keys(Y.value)[0]}\`.`),Object.keys(Y.value)[0])}),L=E(()=>n.sm&&!n.xs),v=E(()=>n.xs||n.datePicker),F=E(()=>n.clickToNavigate||n.datePicker&&n.clickToNavigate!==!1),H=E(()=>{const d={cell:{},event:{}},c=y=>y.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();for(const[y,a]of Object.entries(_)){const[O,$,x]=y.match(/^on(Cell|Event)(.+)$/)||[];O&&(d[$.toLowerCase()][c(x).replace(/^-+|-+$/g,"")]=a)}return d}),j=E(()=>{var c;const d={};return n.hideWeekends&&(d[6]=!0)&&(d[7]=!0),(c=n.hideWeekdays)!=null&&c.length&&n.hideWeekdays.forEach(y=>d[Be[y]]=!0),d}),M=E(()=>n.hideWeekends||j.value[6]&&j.value[7]),Y=E(()=>{const d=n.datePicker;let c=0,y={};const a=n.views;return d&&!a?{month:{...z.availableViews.month},year:{...z.availableViews.year},years:{...z.availableViews.years}}:(a?(Array.isArray(a)?y=a.reduce((O,$)=>(typeof $=="string"&&z.availableViews[$]?O[$]=z.availableViews[$]:c++,O),{}):typeof a=="object"&&(y=Object.entries(a).reduce((O,[$,x])=>{const{cols:I,rows:re}=z.availableViews[$];return O[$]={cols:x.cols||I,rows:x.rows||re},O},{})),c&&console.warn("Vue Cal: the provided `views` prop contains invalid views that will be ignored."),Object.keys(y).length||(console.warn("Vue Cal: No valid view in the provided `views` prop. Falling back to default views."),y={...z.availableViews})):y={...z.availableViews},y)}),W=E(()=>n.datePicker?"month":Y.value.week?"week":Object.keys(Y.value)[0]),s=E(()=>{if(typeof n.selectedDate=="string")return S.stringToDate(n.selectedDate);if(n.selectedDate instanceof Date)return n.selectedDate;n.selectedDate?console.warn("Vue Cal: The provided selected date is invalid:",n.selectedDate):console.log("Vue Cal: Info - The provided selected date is undefined.")}),w=E(()=>{if(!n.disableDays)return[];const d=[];if(Array.isArray(n.disableDays))for(let c of n.disableDays){let y=c;typeof c=="string"?y=S.stringToDate(c):c instanceof Date&&(c=S.formatDate(c,"YYYY-MM-DD")),y instanceof Date&&!isNaN(y.getTime())?d.push(c):console.warn("Vue Cal: The provided `disableDays` prop contains an invalid date:",c)}else console.warn("Vue Cal: The provided `disableDays` prop is invalid:",n.disableDays);return d}),t=E(()=>{let d=null;return n.minDate&&typeof n.minDate=="string"?d=S.stringToDate(n.minDate):n.minDate&&n.minDate instanceof Date&&(d=n.minDate),(d==null?void 0:d.getTime())||null}),r=E(()=>{let d=null;return n.maxDate&&typeof n.maxDate=="string"?d=S.stringToDate(n.maxDate):n.maxDate&&n.maxDate instanceof Date&&(d=n.maxDate),(d==null?void 0:d.getTime())||null}),D=E(()=>{var y;const{view:d}=o;return n.schedules.length&&(d.isDay||d.isDays||d.isWeek)&&((y=n.schedules)==null?void 0:y.map((a,O)=>({...a,id:a.id??O+1})))||void 0}),f=E(()=>{const d={drag:!0,resize:!0,delete:!0,create:!0};return n.editableEvents===!0?d:n.editableEvents===!1?Object.keys(d).map(c=>d[c]=!1):{...d,...n.editableEvents}}),m=async d=>{var y;let c=Object.assign({"../i18n/ar.json":()=>h(()=>import("./ar-BYzjjpsv.js"),[]).then(a=>a.default),"../i18n/bg.json":()=>h(()=>import("./bg-DMHwWaHq.js"),[]).then(a=>a.default),"../i18n/bn.json":()=>h(()=>import("./bn-BMHg_6Cc.js"),[]).then(a=>a.default),"../i18n/bs.json":()=>h(()=>import("./bs-BQ6MYvQz.js"),[]).then(a=>a.default),"../i18n/ca.json":()=>h(()=>import("./ca-RJZ1kJCp.js"),[]).then(a=>a.default),"../i18n/cs.json":()=>h(()=>import("./cs-DUR8CfDR.js"),[]).then(a=>a.default),"../i18n/da.json":()=>h(()=>import("./da-C24v82sE.js"),[]).then(a=>a.default),"../i18n/de.json":()=>h(()=>import("./de-BdfGCsIh.js"),[]).then(a=>a.default),"../i18n/el.json":()=>h(()=>import("./el-BbeSS82J.js"),[]).then(a=>a.default),"../i18n/en-gb.json":()=>h(()=>import("./en-gb-CdanBkea.js"),[]).then(a=>a.default),"../i18n/en-us.json":()=>h(()=>Promise.resolve().then(()=>Qe),void 0).then(a=>a.default),"../i18n/es.json":()=>h(()=>import("./es-BAvNIXnQ.js"),[]).then(a=>a.default),"../i18n/et.json":()=>h(()=>import("./et-BB2GC4z2.js"),[]).then(a=>a.default),"../i18n/fa.json":()=>h(()=>import("./fa-CLNQrKiD.js"),[]).then(a=>a.default),"../i18n/fi.json":()=>h(()=>import("./fi-C3bvOL2F.js"),[]).then(a=>a.default),"../i18n/fr.json":()=>h(()=>import("./fr-GKuwB6u6.js"),[]).then(a=>a.default),"../i18n/he.json":()=>h(()=>import("./he-dgw3ddFB.js"),[]).then(a=>a.default),"../i18n/hr.json":()=>h(()=>import("./hr-H7xnaszL.js"),[]).then(a=>a.default),"../i18n/hu.json":()=>h(()=>import("./hu-D5PQi6ht.js"),[]).then(a=>a.default),"../i18n/id.json":()=>h(()=>import("./id-C4V9iQKh.js"),[]).then(a=>a.default),"../i18n/is.json":()=>h(()=>import("./is-B36p4HLL.js"),[]).then(a=>a.default),"../i18n/it.json":()=>h(()=>import("./it-BYE8Pv4L.js"),[]).then(a=>a.default),"../i18n/ja.json":()=>h(()=>import("./ja-C_20UUx6.js"),[]).then(a=>a.default),"../i18n/ka.json":()=>h(()=>import("./ka-CNxn4HrL.js"),[]).then(a=>a.default),"../i18n/ko.json":()=>h(()=>import("./ko-C66lSvgy.js"),[]).then(a=>a.default),"../i18n/lt.json":()=>h(()=>import("./lt-CSQtJejA.js"),[]).then(a=>a.default),"../i18n/mn.json":()=>h(()=>import("./mn-OFyF7cuL.js"),[]).then(a=>a.default),"../i18n/nl.json":()=>h(()=>import("./nl-p6pls65L.js"),[]).then(a=>a.default),"../i18n/no.json":()=>h(()=>import("./no-ukJhddl5.js"),[]).then(a=>a.default),"../i18n/pl.json":()=>h(()=>import("./pl-BLhEwn5P.js"),[]).then(a=>a.default),"../i18n/pt-br.json":()=>h(()=>import("./pt-br-Bqj88eex.js"),[]).then(a=>a.default),"../i18n/pt-pt.json":()=>h(()=>import("./pt-pt-Bqj88eex.js"),[]).then(a=>a.default),"../i18n/ro.json":()=>h(()=>import("./ro-DIcQOJbf.js"),[]).then(a=>a.default),"../i18n/ru.json":()=>h(()=>import("./ru-CFk3STll.js"),[]).then(a=>a.default),"../i18n/sk.json":()=>h(()=>import("./sk-BVV3GKLZ.js"),[]).then(a=>a.default),"../i18n/sl.json":()=>h(()=>import("./sl-f5pM865d.js"),[]).then(a=>a.default),"../i18n/sq.json":()=>h(()=>import("./sq-BsCWVll4.js"),[]).then(a=>a.default),"../i18n/sr.json":()=>h(()=>import("./sr-BpAzoY7E.js"),[]).then(a=>a.default),"../i18n/sv.json":()=>h(()=>import("./sv-ifbbDt9U.js"),[]).then(a=>a.default),"../i18n/tr.json":()=>h(()=>import("./tr-CqPh9iY6.js"),[]).then(a=>a.default),"../i18n/uk.json":()=>h(()=>import("./uk-CBcda3hV.js"),[]).then(a=>a.default),"../i18n/vi.json":()=>h(()=>import("./vi-Lfa-VYGA.js"),[]).then(a=>a.default),"../i18n/zh-cn.json":()=>h(()=>import("./zh-cn-CFCd-XoD.js"),[]).then(a=>a.default),"../i18n/zh-hk.json":()=>h(()=>import("./zh-hk-BYHSteah.js"),[]).then(a=>a.default)});{if(!c[`../i18n/${d}.json`]){console.warn(`Vue Cal: the locale \`${d}\` does not exist. Falling back to \`en-us\`.`),d="en-us";return}c=await((y=c[`../i18n/${d}.json`])==null?void 0:y.call(c))}o.texts=Object.assign(o.texts,Object.assign({...z.texts},c)),S.updateTexts(o.texts)},k=ce(n.events||[]);return J(()=>n.events,d=>k.splice(0,k.length,...d)),J(()=>n.locale,d=>m(d||"en-us")),(n.locale||!o.texts.today)&&m(n.locale||"en-us"),{...xe(n),events:k,eventListeners:H,defaultView:W,availableViews:Y,disableDays:w,ready:A,sm:L,xs:v,clickToNavigate:F,hideWeekdays:j,hideWeekends:M,minTimestamp:t,maxTimestamp:r,schedules:D,selectedDate:s,editableEvents:f,view:V,get hasHiddenDays(){return Object.keys(j.value).length},get size(){return v.value?"xs":L.value?"sm":"lg"},loadTexts:m}},tt=(o,n)=>{const _=n.timeTo-n.timeFrom;return(o-n.timeFrom)*100/_},Ge=(o,n)=>{const _=n.timeTo-n.timeFrom;return~~(o*_/100+n.timeFrom)},Ze=(o,n)=>{const _=n.clientHeight;return o*100/_},he=ce({id:null,date:null});let pe=!1,ye=!0;const G=ce({el:null,cell:null,timeout:null}),q=ce({eventId:null,fromVueCal:null,toVueCal:null});function Ue(o){const{config:n,view:_,eventsManager:S,emit:A,uid:V,dateUtils:L}=o,v=t=>{var c;const{timeStep:r,timeCellHeight:D,timeFrom:f}=n,m=(((c=t.touches)==null?void 0:c[0])||t).clientY,{top:k}=t.currentTarget.getBoundingClientRect(),d=m-k-~~t.dataTransfer.getData("cursor-grab-at");return Ge(Ze(d,t.currentTarget),n)},F=(t,r,D)=>{const f=r.duration||H(r.start,r.end)||n.timeStep;let m=Math.max(v(t),0);if(n.snapToInterval){const y=m+n.snapToInterval/2;m=y-y%n.snapToInterval}const k=new Date(new Date(D).setMinutes(m)),d=Math.min(m+f,24*60),c=new Date(new Date(D).setMinutes(d));return{start:k,end:c}},H=(t,r)=>Math.round((r-t)/6e4);return{eventDragStart:(t,r)=>{if(t.target.nodeType===3||o.touch.isResizingEvent)return t.preventDefault();t.dataTransfer.effectAllowed="move",t.dataTransfer.dropEffect="move";const D={...r,_:{id:r._.id,duration:H(r.start,r.end)}};try{t.dataTransfer.setData("text/plain",""),t.dataTransfer.setData("event",JSON.stringify(D)),t.dataTransfer.setData("cursor-grab-at",t.offsetY)}catch(m){return console.warn("Vue Cal: Failed to set drag data:",m),t.preventDefault()}q.eventId=r._.id,q.fromVueCal=V;const f=t.target.closest(".vuecal__event");f.classList.add("vuecal__event--dragging-ghost"),setTimeout(()=>{f.classList.add("vuecal__event--dragging-original"),f.classList.remove("vuecal__event--dragging-ghost")},0),pe=!1,Object.assign(he,{id:_.id,date:_.firstCellDate}),ye=!0,o.touch.isDraggingEvent=!0},eventDragEnd:(t,r)=>{q.eventId=null,t.target.closest(".vuecal__event").classList.remove("vuecal__event--dragging-original");const{fromVueCal:D,toVueCal:f}=q;f&&D!==f&&S.deleteEvent(r._.id,3),q.fromVueCal=null,q.toVueCal=null,pe&&ye&&he.id&&_.switchView(he.id,he.date,!0),o.touch.isDraggingEvent=!1},cellDragEnter:(t,r)=>{const{start:D}=r,f=t.currentTarget;if(!t.currentTarget.contains(t.relatedTarget)){if(f===G.el||!f.className.includes("vuecal__cell-content"))return!1;G.el&&(G.cell.highlighted=!1),Object.assign(G,{el:f,cell:r,timeout:clearTimeout(G.timeout)}),r.highlighted=!0,["years","year","month"].includes(_.id)&&(G.timeout=setTimeout(()=>o.switchToNarrowerView(D),2e3))}},cellDragOver:(t,r)=>{const{start:D,schedule:f}=r;t.preventDefault(),r.highlighted=!0,(f||f===0)&&(r.highlightedSchedule=f)},cellDragLeave:(t,r)=>{t.preventDefault(),!t.currentTarget.contains(t.relatedTarget)&&(r.highlightedSchedule=!1,G.cell===r&&(clearTimeout(G.timeout),Object.assign(G,{el:null,cell:null,timeout:null}),r.highlighted=!1))},cellDragDrop:async(t,r)=>{var O,$,x;t.preventDefault(),clearTimeout(G.timeout),Object.assign(G,{el:null,cell:null,timeout:null});const D=JSON.parse(t.dataTransfer.getData("event")||"{}");D.start&&(D.start=new Date(D.start)),D.end&&(D.end=new Date(D.end));let f;const{start:m,end:k}=F(t,D,r.start),{schedule:d}=((O=t.target.closest("[data-schedule]"))==null?void 0:O.dataset)||{};let c=()=>{};q.fromVueCal===V?(f=S.getEvent(D._.id),f&&(f._.dragging=!1,c=()=>{f.start=m,f.end=k,d!==void 0&&(f.schedule=~~d)})):(f={...D,start:m,end:k,...d!==void 0&&{schedule:~~d},_:{id:(($=D._)==null?void 0:$.id)||D.id,duration:H(m,k)},getOverlappingEvents:()=>S.getEventsInRange(S.getEventsByDate(L.formatDate(m),!0),{start:m,end:k},{schedule:~~d})},c=()=>{f=S.createEvent(f)});let y=!0;const{drop:a}=(x=n.eventListeners)==null?void 0:x.event;a&&(y=await a({e:t,event:{...f,start:m,end:k,schedule:~~d},overlaps:f.getOverlappingEvents({start:m,end:k,schedule:~~d}),cell:r,external:q.fromVueCal!==V})),y!==!1&&c(),r.highlighted=!1,r.highlightedSchedule=null,ye=!1,q.toVueCal=V,A("event-dropped",{e:t,cell:r,event:f,originalEvent:D,external:q.fromVueCal!==V})}}}const Me=(o,n)=>{let _,S,A,V={},L={};const v=se(o),F=()=>{v.value.today||(v.value=n),Date.prototype.addDays=function(e){return Y(this,e||0)},Date.prototype.subtractDays=function(e){return W(this,e||0)},Date.prototype.addHours=function(e){return s(this,e||0)},Date.prototype.subtractHours=function(e){return w(this,e||0)},Date.prototype.addMinutes=function(e){return t(this,e||0)},Date.prototype.subtractMinutes=function(e){return r(this,e||0)},Date.prototype.getWeek=function(){return f(this)},Date.prototype.isToday=function(){return m(this)},Date.prototype.isLeapYear=function(){return c(this)},Date.prototype.format=function(e="YYYY-MM-DD"){return re(this,e)},Date.prototype.formatTime=function(e="HH:mm"){return ee(this,e)}},H=()=>{delete Date.prototype.addDays,delete Date.prototype.subtractDays,delete Date.prototype.addHours,delete Date.prototype.subtractHours,delete Date.prototype.addMinutes,delete Date.prototype.subtractMinutes,delete Date.prototype.getWeek,delete Date.prototype.isToday,delete Date.prototype.isLeapYear,delete Date.prototype.format,delete Date.prototype.formatTime},j=e=>{v.value=e,Date.prototype.subtractDays&&F()},M=()=>(S!==new Date().getDate()&&(_=new Date,S=_.getDate(),A=`${_.getFullYear()}-${_.getMonth()}-${_.getDate()}`),A),Y=(e,u)=>{const l=new Date(e.valueOf());return l.setDate(l.getDate()+u),l},W=(e,u)=>{const l=new Date(e.valueOf());return l.setDate(l.getDate()-u),l},s=(e,u)=>{const l=new Date(e.valueOf());return l.setHours(l.getHours()+u),l},w=(e,u)=>{const l=new Date(e.valueOf());return l.setHours(l.getHours()-u),l},t=(e,u)=>{const l=new Date(e.valueOf());return l.setMinutes(l.getMinutes()+u),l},r=(e,u)=>{const l=new Date(e.valueOf());return l.setMinutes(l.getMinutes()-u),l},D=(e,u)=>{const l=T=>{const C=T%u;return C!==0&&(T+=C>=u/2?u-C:-C),T};if(typeof e=="number")return l(e);if(e instanceof Date){let T=l(e.getMinutes());T>=60&&(e.setHours(e.getHours()+1),T=0),e.setMinutes(T,0,0)}},f=(e,u=!1)=>{const l=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())),T=l.getUTCDay()||7;l.setUTCDate(l.getUTCDate()+4-T);const C=new Date(Date.UTC(l.getUTCFullYear(),0,1));return Math.ceil(((l-C)/864e5+1)/7)+(u?1:0)},m=e=>`${e.getFullYear()}-${e.getMonth()}-${e.getDate()}`===M(),k=(e,u)=>{if(!e||!u)return console.warn(`Vue Cal: missing date${e?"2":"1"} parameter for comparison with \`isSameDate(date1, date2)\`.`);if(I(e)){if(!I(u))return console.warn(`Vue Cal: invalid date2 provided for comparison with \`isSameDate(date1, date2)\`: \`${u}\`.`)}else return console.warn(`Vue Cal: invalid date1 provided for comparison with \`isSameDate(date1, date2)\`: \`${e}\`.`);return e.getFullYear()===u.getFullYear()&&e.getMonth()===u.getMonth()&&e.getDate()===u.getDate()},d=(e,u,l)=>I(e)?e.getTime()>=u&&e.getTime()<=l:console.warn(`Vue Cal: invalid date provided to \`isInRange(date, rangeStart, rangeEnd)\`: \`${e}\`.`),c=e=>{const u=e.getFullYear();return!(u%400)||u%100&&!(u%4)},y=(e=null,u)=>{const l=e&&new Date(e.valueOf())||new Date,T=u?7:6;return l.setDate(l.getDate()-(l.getDay()+T)%7),l},a=e=>e instanceof Date?e:(e.length===10&&(e+=" 00:00"),new Date(e.replace(/-/g,"/"))),O=e=>e.getHours()*60+e.getMinutes(),$=(e,u)=>{typeof e=="string"&&(e=e.replace(/-/g,"/")),typeof u=="string"&&(u=u.replace(/-/g,"/")),e=new Date(e).setHours(0,0,0,0),u=new Date(u).setHours(0,0,1,0);const l=(new Date(u).getTimezoneOffset()-new Date(e).getTimezoneOffset())*60*1e3;return Math.ceil((u-e-l)/(24*3600*1e3))},x=(e,u,l)=>Math.abs(e.getTime()-u.getTime())<=l*60*1e3,I=e=>e&&e instanceof Date&&!isNaN(e),re=(e,u="YYYY-MM-DD",l=null)=>{if(l||(l=v.value),u||(u="YYYY-MM-DD"),u==="YYYY-MM-DD")return fe(e);V={},L={};const T={YYYY:()=>R(e,l).YYYY,YY:()=>R(e,l).YY(),M:()=>R(e,l).M,MM:()=>R(e,l).MM(),MMM:()=>R(e,l).MMM(),MMMM:()=>R(e,l).MMMM(),MMMMG:()=>R(e,l).MMMMG(),D:()=>R(e,l).D,DD:()=>R(e,l).DD(),S:()=>R(e,l).S(),d:()=>R(e,l).d,dd:()=>R(e,l).dd(),ddd:()=>R(e,l).ddd(),dddd:()=>R(e,l).dddd(),HH:()=>B(e,l).HH,H:()=>B(e,l).H,hh:()=>B(e,l).hh,h:()=>B(e,l).h,am:()=>B(e,l).am,AM:()=>B(e,l).AM,mm:()=>B(e,l).mm,m:()=>B(e,l).m,s:()=>B(e,l).s};return u.replace(/(\{[a-zA-Z]+\}|[a-zA-Z]+)/g,(C,Z)=>{const P=T[Z.replace(/\{|\}/g,"")];return P!==void 0?P():Z})},fe=e=>{const u=e.getMonth()+1,l=e.getDate();return`${e.getFullYear()}-${u<10?"0":""}${u}-${l<10?"0":""}${l}`},ee=(e,u="HH:mm",l=null,T=!1)=>{let C=!1;if(T){const[me,te,ie]=[e.getHours(),e.getMinutes(),e.getSeconds()];me+te+ie===141&&(C=!0)}if(e instanceof Date&&u==="HH:mm")return C?"24:00":ve(e);L={},l||(l=v.value);const Z=B(e,l),P=u.replace(/(\{[a-zA-Z]+\}|[a-zA-Z]+)/g,(me,te)=>{const ie=Z[te.replace(/\{|\}/g,"")];return ie!==void 0?ie:te});return C?P.replace("23:59","24:00"):P},ve=e=>{const u=e.getHours(),l=e.getMinutes();return`${(u<10?"0":"")+u}:${(l<10?"0":"")+l}`},ae=e=>{const u=Math.floor(e/60).toString().padStart(2,0),l=(e%60).toString().padStart(2,0);return`${u}:${l}`},_e=e=>{if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},R=(e,u)=>{if(V.D)return V;const l=e.getFullYear(),T=e.getMonth()+1,C=e.getDate(),P=(e.getDay()-1+7)%7;return V={YYYY:l,YY:()=>l.toString().substring(2),M:T,MM:()=>T.toString().padStart(2,0),MMM:()=>u.months[T-1].substring(0,3),MMMM:()=>u.months[T-1],MMMMG:()=>(u.monthsGenitive||u.months)[T-1],D:C,DD:()=>C.toString().padStart(2,0),S:()=>_e(C),d:P+1,dd:()=>u.weekDaysShort.length?u.weekDaysShort[P]:u.weekDays[P][0],ddd:()=>u.weekDaysShort.length?u.weekDaysShort[P]:u.weekDays[P].substr(0,3),dddd:()=>u.weekDays[P]},V},B=(e,u)=>{if(L.am)return L;let l,T,C;e instanceof Date?(l=e.getHours(),T=e.getMinutes(),C=e.getSeconds()):(l=Math.floor(e/60),T=Math.floor(e%60));const Z=l%12?l%12:12,P=(u||{am:"am",pm:"pm"})[l===24||l<12?"am":"pm"];return L={H:l,h:Z,HH:l.toString().padStart(2,0),hh:Z.toString().padStart(2,0),am:P,AM:P.toUpperCase(),m:T,mm:T.toString().padStart(2,0),s:C},L};return{addDatePrototypes:F,removeDatePrototypes:H,updateTexts:j,addDays:Y,subtractDays:W,addHours:s,subtractHours:w,addMinutes:t,subtractMinutes:r,snapToInterval:D,getWeek:f,isToday:m,isSameDate:k,isInRange:d,isLeapYear:c,getPreviousFirstDayOfWeek:y,stringToDate:a,dateToMinutes:O,countDays:$,datesInSameTimeStep:x,isValid:I,formatDate:re,formatDateLite:fe,formatTime:ee,formatTimeLite:ve,formatMinutes:ae}},qe=o=>{const{dateUtils:n,config:_}=o;let S=0;const A=E(()=>{const s={byDate:{},recurring:[],multiday:[],byId:{}},w=_.events.sort((t,r)=>t.start-r.start<0?-1:1);for(const t of w)V(t),t._||(t._={}),t._.id=t._.id||++S,t.delete||(t.delete=r=>j(t._.id,r)),t._.deleting=!1,t._.deleted=!1,t.isOverlapping=(r=null)=>t.getOverlappingEvents(r).length,t.getOverlappingEvents=(r=null)=>{var D;return Y(v(n.formatDate((r==null?void 0:r.start)||t.start),!0),{start:(r==null?void 0:r.start)||t.start,end:(r==null?void 0:r.end)||t.end},{excludeIds:[t._.id],schedule:(D=_.schedules)!=null&&D.length?~~((r==null?void 0:r.schedule)||t.schedule):null})},t._.register=r=>{t._.$el=r,t._.fireCreated&&(o.emit("event-created",t),delete t._.fireCreated)},t._.unregister=()=>{t._.$el=null,t._.register=null,t.isOverlapping=null,t.getOverlappingEvents=null,t.delete=null},s.byId[t._.id]=t,t.recurring?s.recurring.push(t._.id):t._.multiday?(s.multiday.push(t._.id),s.byDate[t._.startFormatted]||(s.byDate[t._.startFormatted]=[]),s.byDate[t._.startFormatted].push(t._.id)):(s.byDate[t._.startFormatted]||(s.byDate[t._.startFormatted]=[]),s.byDate[t._.startFormatted].push(t._.id));return s}),V=s=>{if(typeof s.start=="string"&&(s.start=n.stringToDate(s.start)),typeof s.end=="string"&&(s.end=n.stringToDate(s.end)),s.start.setSeconds(0,0),s.end.setSeconds(0,0),isNaN(s.start)||isNaN(s.end)){isNaN(s.start)?console.error(`Vue Cal: invalid start date for event "${s.title}".`,s.start):console.error(`Vue Cal: invalid end date for event "${s.title}".`,s.end);return}else s.end.getTime()<s.start.getTime()&&console.error(`Vue Cal: invalid event dates for event "${s.title}". The event ends before it starts.`,s.start,s.end);s._||(s._={}),s._.multiday=!n.isSameDate(s.start,new Date(s.end.getTime()-1)),s._.startFormatted=n.formatDate(s.start),s._.startMinutes=~~n.dateToMinutes(s.start),s._.endMinutes=~~n.dateToMinutes(s.end);const w=s.start.getHours(),t=s.start.getMinutes().toString().padStart(2,0),r=s.end.getHours(),D=s.end.getMinutes().toString().padStart(2,0);s._.startTimeFormatted24=`${w.toString().padStart(2,0)}:${t}`,s._.startTimeFormatted12=`${w%12||12}${t?`:${t}`:""} ${w<12?"AM":"PM"}`,s._.endTimeFormatted24=`${r.toString().padStart(2,0)}:${D}`,s._.endTimeFormatted12=`${r%12||12}${D?`:${D}`:""} ${r<12?"AM":"PM"}`,s._.duration=Math.abs(~~((s.end-s.start)/6e4))},L=s=>A.value.byId[s],v=(s,w=!1,t=!1)=>{let r=A.value.byDate[s]||[];return r=w||t?r.map(L):r,t||(r=r.filter(D=>!D.background),w||(r=r.map(D=>D._.id))),r},F=s=>{const w={};for(const{startFormatted:t}of s){w[t]=[];const r=v(t,!1,!0);r.length&&w[t].push(...r)}return w},H=s=>{if(!s.start||!s.end){console.error("Vue Cal: Cannot create an event without valid start and end dates.");return}return _.snapToInterval&&(n.snapToInterval(s.start,_.snapToInterval),n.snapToInterval(s.end,_.snapToInterval)),s={...s},s._||(s._={}),s._.id=++S,s._.fireCreated=!0,_.events.push(s),s},j=(s,w=0)=>{var D;if(!_.editableEvents.delete)return console.info("Vue Cal: Event deletion is disabled. Enable it with the `editable-events` props.");if(!s)return console.warn("Vue Cal: Cannot delete event without its ID.");const t=_.events.findIndex(f=>f._.id===s);if(t===-1)return console.warn(`Vue Cal: Cannot delete unknown event \`${s}\`.`);const r=_.events[t];if(r.deletable===!1)return console.warn(`Vue Cal: Can't delete event \`${s}\` since it was explicitely set to \`delete: false\`.`);switch(w){case 0:r._.deleting?_.events.splice(t,1):r._.deleting=!0;break;case 1:r._.deleting=!0;break;case 2:r._.deleted=!0,_.events[t]._.deleted=!0,(D=r._.$el)==null||D.dispatchEvent(new CustomEvent("event-deleted",{detail:r._.id}));break;case 3:_.events.splice(t,1),o.emit("update:events",_.events),o.emit("event-delete",r);break}return!0},M=s=>{const w=v(s,!0);if(!w.length)return{cellOverlaps:{},longestStreak:0};const t={};let r=[],D=0;w.sort((f,m)=>f.start-m.start||f.end-f.start-(m.end-m.start));for(const f of w){const m=f._.id;t[m]||(t[m]={overlaps:new Set,maxConcurrent:1,position:0}),r=r.filter(a=>a.end>f.start);let k=r.filter(a=>{var $;return(!(($=_.schedules)!=null&&$.length)||f.schedule===a.schedule)&&a.start<f.end}),d=new Set(k.map(a=>{var O;return((O=t[a._.id])==null?void 0:O.position)??0})),c=0;for(;d.has(c);)c++;t[m].position=c,r.push(f);let y=Math.max(1,...k.map(a=>{var O;return((O=t[a._.id])==null?void 0:O.maxConcurrent)??1}));t[m].maxConcurrent=Math.max(k.length+1,y);for(const a of k)t[a._.id].overlaps.add(m),t[m].overlaps.add(a._.id),t[a._.id].maxConcurrent=t[m].maxConcurrent;D=Math.max(D,t[m].maxConcurrent)}for(const f in t)t[f].overlaps=[...t[f].overlaps];return{cellOverlaps:t,longestStreak:D}},Y=(s=[],{start:w,end:t},{excludeIds:r=[],schedule:D=null})=>{var k;const f=new Set(r),m=[];for(const d of s)!f.has((k=d._)==null?void 0:k.id)&&(D===null||D===d.schedule)&&W(d,w,t)&&m.push(d);return m},W=(s,w,t)=>{const r=s.allDay||!_.time,D=r?new Date(s.start).setHours(0,0,0,0):s.start.getTime(),f=r?new Date(s.end).setHours(23,59,59,999):s.end.getTime(),m=r?new Date(w).setHours(0,0,0,0):w.getTime(),k=r?new Date(t).setHours(23,59,59,999):t.getTime();return f>m&&D<k};return{events:A,getEvent:L,getEventsByDate:v,getViewEvents:F,getCellOverlappingEvents:M,getEventsInRange:Y,createEvent:H,deleteEvent:j,isEventInRange:W}},Ke=({config:o,dateUtils:n,emit:_,texts:S,eventsManager:A},V)=>{const{availableViews:L}=o,v=se(o.view&&L[o.view]?o.view:o.defaultView),F=se(o.selectedDate||null),H=se(new Date),j=se(new Date(o.viewDate||H.value));j.value.setHours(0,0,0,0);const M=se(new Date(j));let Y=null;const W=E(()=>v.value==="month"?M.value:c.value),s=E(()=>v.value==="month"?new Date(M.value.getFullYear(),M.value.getMonth()+1,0,23,59,59,999):a.value),w=E(()=>v.value==="week"?n.getPreviousFirstDayOfWeek(c.value,o.startWeekOnSunday):v.value==="month"?c.value:W.value),t=E(()=>{if(v.value==="week"){const i=n.addDays(w.value,7);return i.setMilliseconds(-1),i}return v.value==="month"?a.value:s.value}),r=E(()=>{const i=H.value.getTime();if(v.value==="week")return w.value.getTime()<=i&&i<=t.value.getTime();const g=c.value.getTime(),b=a.value.getTime();return g<=i&&i<=b});function D(){H.value=new Date,Y=setTimeout(D,60*1e3)}function f(){Y=setTimeout(D,(60-new Date().getSeconds())*1e3),D()}const m=E(()=>{if(!o.availableViews[v.value])return 1;let i=o.availableViews[v.value].cols;return o.hasHiddenDays&&["week","month"].includes(v.value)&&(i-=o.hasHiddenDays),i}),k=E(()=>{var i;return((i=o.availableViews[v.value])==null?void 0:i.rows)||1}),d=E(()=>m.value*k.value),c=E(()=>{if(v.value==="month"){let i=M.value.getDay()||7;return o.startWeekOnSunday&&!o.hideWeekdays[7]&&(i+=1),o.viewDayOffset&&(i-=o.viewDayOffset),n.subtractDays(M.value,i-1)}if(v.value==="week"){const i="1234567".split("").filter(b=>!Object.keys(o.hideWeekdays).includes(b));let g=Math.min(...i);return o.startWeekOnSunday&&!o.hideWeekdays[7]&&(g=1),o.viewDayOffset&&(g+=o.viewDayOffset),n.addDays(M.value,g-1)}return M.value}),y=E(()=>{const i=[],g=["days","week","month"].includes(v.value);let b=0;for(let p=0;p<d.value+b;p++)switch(v.value){case"day":case"days":case"week":case"month":{const N=n.addDays(c.value,p),De=N.getDay()||7;if(g&&o.hasHiddenDays&&o.hideWeekdays[De]){b++;continue}const ne=new Date(N);ne.setHours(23,59,59,999),i.push({start:N,startFormatted:n.formatDate(N),end:ne});break}case"year":i.push({start:new Date(c.value.getFullYear(),p,1,0,0,0,0),end:new Date(c.value.getFullYear(),p+1,0,23,59,59,999)});break;case"years":i.push({start:new Date(c.value.getFullYear()+p,0,1,0,0,0,0),end:new Date(c.value.getFullYear()+p+1,0,0,23,59,59,999)});break}return i}),a=E(()=>y.value[y.value.length-1].end),O=se("right"),$=E(()=>{const i=Object.keys(o.availableViews);return i[i.indexOf(v.value)+1]}),x=E(()=>{const i=Object.keys(o.availableViews);return i[i.indexOf(v.value)-1]});function I(i,g,b=!1){if(!g||!g[i])return i+1;const p=g[i];return b&&typeof p=="string"?p.substring(0,3):p}function re(i,g,b){const{monthsArray:p,monthBeforeDay:N,canTruncate:De,xs:ne}=b,K=i.getMonth(),Q=i.getFullYear(),X=g.getMonth(),le=g.getFullYear(),ge=K!==X,We=Q!==le,U=De&&(ne||ge),oe=i.getDate(),ue=g.getDate();return We?N?`${I(K,p,U)} ${oe}, ${Q} - ${I(X,p,U)} ${ue}, ${le}`:`${oe} ${I(K,p,U)} ${Q} - ${ue} ${I(X,p,U)} ${le}`:ge?N?`${I(K,p,U)} ${oe} - ${I(X,p,U)} ${ue}, ${Q}`:`${oe} ${I(K,p,U)} - ${ue} ${I(X,p,U)} ${Q}`:N?`${I(K,p,U)} ${oe}-${ue}, ${Q}`:`${oe}-${ue} ${I(K,p,U)} ${Q}`}const fe=E(()=>{const{dateFormat:i,months:g,monthsGenitive:b,week:p,truncations:N}=S,De=o.locale,ne=N!==!1,K=i.indexOf("M")<i.indexOf("D"),Q=b&&De==="el"?b:g;switch(v.value){case"day":return n.formatDate(c.value,i);case"days":case"week":{const X={monthsArray:Q,monthBeforeDay:K,canTruncate:ne,xs:o.xs};let le=re(c.value,a.value,X);if(v.value==="week"){const ge=n.getWeek(c.value,o.startWeekOnSunday&&!o.hideWeekdays[7]);le+=` <small>${p} ${ge}</small>`}return le}case"month":{const X=`${o.xs&&ne?"MMM":"MMMM"} YYYY`;return n.formatDate(W.value,X)}case"year":return c.value.getFullYear();case"years":return`${c.value.getFullYear()} - ${s.value.getFullYear()}`}});function ee(){switch(M.value=new Date(j.value||H.value),M.value.setHours(0,0,0,0),v.value){case"day":break;case"days":break;case"week":M.value=n.getPreviousFirstDayOfWeek(M.value,o.startWeekOnSunday&&!o.hideWeekdays[7]);break;case"month":M.value=new Date(M.value.getFullYear(),M.value.getMonth(),1,0,0,0,0);break;case"year":M.value=new Date(M.value.getFullYear(),0,1,0,0,0,0);break;case"years":M.value=new Date(M.value.getFullYear()-M.value.getFullYear()%d.value,0,1,0,0,0,0);break}o.ready&&_("view-change",{id:v.value,title:fe.value,start:W.value,end:s.value,extendedStart:w.value,extendedEnd:t.value,cellDates:y.value,containsToday:r.value,events:Te.value}),H.value=new Date}function ve(i){const g=v.value,b=o.availableViews[g];i[g]&&JSON.stringify(i[g])===JSON.stringify(b)||ee()}function ae(i,g=!0){const b=Object.keys(o.availableViews);v.value!==i&&(b.includes(i)?(O.value=b.indexOf(i)<b.indexOf(v.value)?"left":"right",v.value=i,_("update:view",i),ee()):console.warn(`Vue Cal: the \`${i}\` view is not available.`))}function _e(){$.value?ae($.value):console.warn("Vue Cal: no broader view is available.")}function R(){x.value?ae(x.value):console.warn("Vue Cal: no narrower view is available.")}function B(){u(!1)}function e(){u(!0)}function u(i=!0){let g=new Date(j.value);switch(v.value){case"day":case"days":i?g=n.addDays(a.value,1):g=n.subtractDays(c.value,d.value);break;case"week":{i?(g=n.addDays(t.value,1),g.setHours(0,0,0,0)):g=n.subtractDays(w.value,d.value);break}case"month":{const b=i?1:-1;g=new Date(g.getFullYear(),g.getMonth()+b,1,0,0,0,0);break}case"year":{const b=i?1:-1;g=new Date(g.getFullYear()+b,1,1,0,0,0,0);break}case"years":{const b=i?d.value:-d.value;g=new Date(g.getFullYear()+b,1,1,0,0,0,0);break}}T(g)}function l(){const i=new Date;i.setHours(0,0,0,0),T(i)}function T(i,g=!0,b=!1){if(!n.isValid(i))return console.warn("Vue Cal: can't navigate to the given date: invalid date provided to `updateViewDate(date)`.");let[p,N]=[c.value,a.value];v.value==="month"&&([p,N]=[W.value,s.value]),(!n.isInRange(i,p,N)||b)&&(i.setHours(0,0,0,0),O.value=i.getTime()<p.getTime()?"left":"right",j.value=i,g&&_("update:viewDate",i),ee())}function C(i,g=!0){if(!n.isValid(i))return console.warn("Vue Cal: can't update the selected date: invalid date provided to `updateSelectedDate(date)`.");const{isValid:b,isSameDate:p}=n;(!F.value||!b(F.value)||!p(i,F.value))&&(i.setHours(0,0,0,0),F.value=i,g&&_("update:selectedDate",i))}function Z(i){!i&&!M.value.getDay()?T(n.addDays(M.value,1),!0,!0):(O.value="left",ee())}function P(i){i&&o.startWeekOnSunday&&!M.value.getDay()?T(n.addDays(M.value,1),!0,!0):!i&&o.startWeekOnSunday&&M.value.getDay()===1&&T(n.subtractDays(M.value,1),!0,!0)}function me(){console.log("toggling weekdays",o.hideWeekdays)}function te(i){var p;const g=(p=V.value)==null?void 0:p.querySelector(".vuecal__scrollable"),b=i?i*o.timeCellHeight/o.timeStep:0;g==null||g.scrollTo({top:b,behavior:"smooth"})}function ie(){const i=new Date;te(i.getHours()*60+i.getMinutes())}function He(){te(0)}const Te=E(()=>A.getViewEvents(y.value)),Re=A.createEvent,Fe=A.deleteEvent;return J(()=>o.view,i=>ae(i,!1)),J(()=>o.availableViews,ve),J(()=>o.datePicker,()=>ae("month",!1)),J(()=>o.viewDate,i=>T(i,!1)),J(()=>o.selectedDate,i=>C(i,!1)),J(()=>o.startWeekOnSunday,i=>Z(i)),J(()=>o.hideWeekends,i=>P(i)),J(()=>o.hideWeekdays,me),J(()=>d.value,()=>{d.value>90&&console.warn("Vue Cal: high cell count detected. Performance may degrade when interactions are enabled.")}),J(()=>o.watchRealTime,i=>{i&&o.time?f():Y=clearTimeout(Y)}),ee(),o.time&&o.watchRealTime&&f(),Ne(()=>Y=clearTimeout(Y)),{now:H,id:v,broaderView:$,narrowerView:x,title:fe,viewDate:j,start:W,end:s,extendedStart:w,extendedEnd:t,firstCellDate:c,lastCellDate:a,containsToday:r,selectedDate:F,cellDates:y,cols:m,rows:k,events:Te,transitionDirection:O,switch:ae,broader:_e,narrower:R,previous:B,next:e,navigate:u,goToToday:l,updateViewDate:T,updateSelectedDate:C,scrollToCurrentTime:ie,scrollToTime:te,scrollTop:He,createEvent:Re,deleteEvent:Fe,get isDay(){return v.value==="day"},get isDays(){return v.value==="days"},get isWeek(){return v.value==="week"},get isMonth(){return v.value==="month"},get isYear(){return v.value==="year"},get isYears(){return v.value==="years"}}},be=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],Ee=["January","February","March","April","May","June","July","August","September","October","November","December"],Ve="Years",ke="Year",Oe="Month",Se="Week",Ye="Days",$e="Day",Ce="Today",je="No Event",Ie="All day",Pe="Delete",Ae="Create an event",Le="dddd, MMMM D, YYYY",we={weekDays:be,months:Ee,years:Ve,year:ke,month:Oe,week:Se,days:Ye,day:$e,today:Ce,noEvent:je,allDay:Ie,deleteEvent:Pe,createEvent:Ae,dateFormat:Le},Qe=Object.freeze(Object.defineProperty({__proto__:null,allDay:Ie,createEvent:Ae,dateFormat:Le,day:$e,days:Ye,default:we,deleteEvent:Pe,month:Oe,months:Ee,noEvent:je,today:Ce,week:Se,weekDays:be,year:ke,years:Ve},Symbol.toStringTag,{value:"Module"})),de=ce({texts:{...z.texts},dateUtils:Me(z.texts,we)}),at=({props:o,emit:n,attrs:_,vuecalEl:S,uid:A})=>{const V=ce({uid:A,emit:n,texts:{...de.texts},dateUtils:{...de.dateUtils},now:new Date,config:{},eventsManager:{},view:{},dnd:{},touch:{isDraggingCell:!1,isDraggingEvent:!1,isResizingEvent:!1}});return V.dateUtils=Me(Object.assign(z.texts,V.texts),we),V.config=Je(V,o,_),V.eventsManager=qe(V),V.view=Ke(V,S),V.dnd=Ue(V),V},nt=o=>{de.texts={...z.texts,...o},de.dateUtils.updateTexts(de.texts)},{addDatePrototypes:st,removeDatePrototypes:rt,updateTexts:it,addDays:lt,subtractDays:ot,addHours:ut,subtractHours:dt,addMinutes:ct,subtractMinutes:ft,getWeek:Dt,isToday:vt,isSameDate:mt,isInRange:gt,isLeapYear:ht,getPreviousFirstDayOfWeek:_t,stringToDate:yt,dateToMinutes:wt,countDays:Tt,datesInSameTimeStep:pt,isValid:Mt,formatDate:bt,formatDateLite:Et,formatTime:Vt,formatTimeLite:kt,formatMinutes:Ot}=de.dateUtils;export{lt as a,st as b,Tt as c,et as d,Ze as e,bt as f,at as g,tt as m,Ge as p,yt as s,nt as u,ze as w};
