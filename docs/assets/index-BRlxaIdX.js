import{c as E,x as ve,D as Z,V as ze,W as T,r as le,N as Be}from"./index-DzGpp229.js";const q={texts:{weekDays:Array(7).fill(""),weekDaysShort:[],months:Array(12).fill(""),years:"",year:"",month:"",week:"",day:"",today:"",noEvent:"",allDay:"",deleteEvent:"",createEvent:"",dateFormat:"dddd MMMM D, YYYY",am:"am",pm:"pm",truncations:!0},availableViews:{day:{cols:1,rows:1},days:{cols:10,rows:1},week:{cols:7,rows:1},month:{cols:7,rows:6},year:{cols:4,rows:3},years:{cols:5,rows:5}}},at=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"],Je=["sun","mon","tue","wed","thu","fri","sat"],Ge=Je.reduce((o,n,h)=>(o[n]=h||7,o),{}),Ze=(o,n,h)=>{const{dateUtils:A}=o,P=!1,S=E(()=>{if(I.value[n.view])return n.view;const c=n.datePicker?"month":"week",v=n.view||c;return I.value[v]?v:(console.warn(`Vue Cal: the provided or default view \`${v}\` is either invalid or not in the list of available views. The first available view will be chosen: \`${Object.keys(I.value)[0]}\`.`),Object.keys(I.value)[0])}),x=E(()=>n.sm&&!n.xs),g=E(()=>n.xs||n.datePicker),z=E(()=>n.clickToNavigate||n.datePicker&&n.clickToNavigate!==!1),W=E(()=>{const c={cell:{},event:{}},v=M=>M.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();for(const[M,a]of Object.entries(h)){const[b,V,B]=M.match(/^on(Cell|Event)(.+)$/)||[];b&&(c[V.toLowerCase()][v(B).replace(/^-+|-+$/g,"")]=a)}return c}),L=E(()=>{var v;const c={};return n.hideWeekends&&(c[6]=!0)&&(c[7]=!0),(v=n.hideWeekdays)!=null&&v.length&&n.hideWeekdays.forEach(M=>c[Ge[M]]=!0),c}),O=E(()=>n.hideWeekends||L.value[6]&&L.value[7]),I=E(()=>{const c=n.datePicker;let v=0,M={};const a=n.views;return c&&!a?{month:{...q.availableViews.month},year:{...q.availableViews.year},years:{...q.availableViews.years}}:(a?(Array.isArray(a)?M=a.reduce((b,V)=>(typeof V=="string"&&q.availableViews[V]?b[V]=q.availableViews[V]:v++,b),{}):typeof a=="object"&&(M=Object.entries(a).reduce((b,[V,B])=>{const{cols:R,rows:re}=q.availableViews[V];return b[V]={cols:B.cols||R,rows:B.rows||re},b},{})),v&&console.warn("Vue Cal: the provided `views` prop contains invalid views that will be ignored."),Object.keys(M).length||(console.warn("Vue Cal: No valid view in the provided `views` prop. Falling back to default views."),M={...q.availableViews})):M={...q.availableViews},M)}),G=E(()=>n.datePicker?"month":I.value.week?"week":Object.keys(I.value)[0]),t=E(()=>{if(typeof n.selectedDate=="string")return A.stringToDate(n.selectedDate);if(n.selectedDate instanceof Date)return n.selectedDate;n.selectedDate?console.warn("Vue Cal: The provided selected date is invalid:",n.selectedDate):console.log("Vue Cal: Info - The provided selected date is undefined.")}),D=E(()=>{if(!n.disableDays)return[];const c=[];if(Array.isArray(n.disableDays))for(let v of n.disableDays){let M=v;typeof v=="string"?M=A.stringToDate(v):v instanceof Date&&(v=A.formatDate(v,"YYYY-MM-DD")),M instanceof Date&&!isNaN(M.getTime())?c.push(v):console.warn("Vue Cal: The provided `disableDays` prop contains an invalid date:",v)}else console.warn("Vue Cal: The provided `disableDays` prop is invalid:",n.disableDays);return c}),i=E(()=>{let c=null;return n.minDate&&typeof n.minDate=="string"?c=A.stringToDate(n.minDate):n.minDate&&n.minDate instanceof Date&&(c=n.minDate),(c==null?void 0:c.getTime())||null}),u=E(()=>{let c=null;return n.maxDate&&typeof n.maxDate=="string"?c=A.stringToDate(n.maxDate):n.maxDate&&n.maxDate instanceof Date&&(c=n.maxDate),(c==null?void 0:c.getTime())||null}),m=E(()=>{var M;const{view:c}=o;return n.schedules.length&&(c.isDay||c.isDays||c.isWeek)&&((M=n.schedules)==null?void 0:M.map((a,b)=>({...a,id:a.id??b+1})))||void 0}),d=E(()=>{const c={drag:!0,resize:!0,delete:!0,create:!0};return n.editableEvents===!0?c:n.editableEvents===!1?Object.keys(c).map(v=>c[v]=!1):{...c,...n.editableEvents}}),_=E(()=>{const{view:c}=o,{eventCount:v}=n;return(Array.isArray(v)?v.includes(c.id):v)&&(c.isMonth&&!n.eventsOnMonthView||c.isYear)}),Y=E(()=>n.allDayEvents&&n.time!==!1&&!S.isMonth),y=E(()=>n.timeAtCursor&&n.time!==!1),f=async c=>{var M;let v=Object.assign({"../i18n/ar.json":()=>T(()=>import("./ar-BYzjjpsv.js"),[]).then(a=>a.default),"../i18n/bg.json":()=>T(()=>import("./bg-DMHwWaHq.js"),[]).then(a=>a.default),"../i18n/bn.json":()=>T(()=>import("./bn-BMHg_6Cc.js"),[]).then(a=>a.default),"../i18n/bs.json":()=>T(()=>import("./bs-BQ6MYvQz.js"),[]).then(a=>a.default),"../i18n/ca.json":()=>T(()=>import("./ca-RJZ1kJCp.js"),[]).then(a=>a.default),"../i18n/cs.json":()=>T(()=>import("./cs-DUR8CfDR.js"),[]).then(a=>a.default),"../i18n/da.json":()=>T(()=>import("./da-C24v82sE.js"),[]).then(a=>a.default),"../i18n/de.json":()=>T(()=>import("./de-BdfGCsIh.js"),[]).then(a=>a.default),"../i18n/el.json":()=>T(()=>import("./el-BbeSS82J.js"),[]).then(a=>a.default),"../i18n/en-gb.json":()=>T(()=>import("./en-gb-BS4nN9Uk.js"),[]).then(a=>a.default),"../i18n/en-us.json":()=>T(()=>Promise.resolve().then(()=>et),void 0).then(a=>a.default),"../i18n/es.json":()=>T(()=>import("./es-BAvNIXnQ.js"),[]).then(a=>a.default),"../i18n/et.json":()=>T(()=>import("./et-BB2GC4z2.js"),[]).then(a=>a.default),"../i18n/fa.json":()=>T(()=>import("./fa-CLNQrKiD.js"),[]).then(a=>a.default),"../i18n/fi.json":()=>T(()=>import("./fi-C3bvOL2F.js"),[]).then(a=>a.default),"../i18n/fr.json":()=>T(()=>import("./fr-GKuwB6u6.js"),[]).then(a=>a.default),"../i18n/he.json":()=>T(()=>import("./he-dgw3ddFB.js"),[]).then(a=>a.default),"../i18n/hr.json":()=>T(()=>import("./hr-H7xnaszL.js"),[]).then(a=>a.default),"../i18n/hu.json":()=>T(()=>import("./hu-D5PQi6ht.js"),[]).then(a=>a.default),"../i18n/id.json":()=>T(()=>import("./id-C4V9iQKh.js"),[]).then(a=>a.default),"../i18n/is.json":()=>T(()=>import("./is-B36p4HLL.js"),[]).then(a=>a.default),"../i18n/it.json":()=>T(()=>import("./it-BYE8Pv4L.js"),[]).then(a=>a.default),"../i18n/ja.json":()=>T(()=>import("./ja-C_20UUx6.js"),[]).then(a=>a.default),"../i18n/ka.json":()=>T(()=>import("./ka-CNxn4HrL.js"),[]).then(a=>a.default),"../i18n/ko.json":()=>T(()=>import("./ko-C66lSvgy.js"),[]).then(a=>a.default),"../i18n/lt.json":()=>T(()=>import("./lt-CSQtJejA.js"),[]).then(a=>a.default),"../i18n/mn.json":()=>T(()=>import("./mn-OFyF7cuL.js"),[]).then(a=>a.default),"../i18n/nl.json":()=>T(()=>import("./nl-p6pls65L.js"),[]).then(a=>a.default),"../i18n/no.json":()=>T(()=>import("./no-ukJhddl5.js"),[]).then(a=>a.default),"../i18n/pl.json":()=>T(()=>import("./pl-BLhEwn5P.js"),[]).then(a=>a.default),"../i18n/pt-br.json":()=>T(()=>import("./pt-br-Bqj88eex.js"),[]).then(a=>a.default),"../i18n/pt-pt.json":()=>T(()=>import("./pt-pt-Bqj88eex.js"),[]).then(a=>a.default),"../i18n/ro.json":()=>T(()=>import("./ro-DIcQOJbf.js"),[]).then(a=>a.default),"../i18n/ru.json":()=>T(()=>import("./ru-CFk3STll.js"),[]).then(a=>a.default),"../i18n/sk.json":()=>T(()=>import("./sk-BVV3GKLZ.js"),[]).then(a=>a.default),"../i18n/sl.json":()=>T(()=>import("./sl-f5pM865d.js"),[]).then(a=>a.default),"../i18n/sq.json":()=>T(()=>import("./sq-BsCWVll4.js"),[]).then(a=>a.default),"../i18n/sr.json":()=>T(()=>import("./sr-BpAzoY7E.js"),[]).then(a=>a.default),"../i18n/sv.json":()=>T(()=>import("./sv-ifbbDt9U.js"),[]).then(a=>a.default),"../i18n/tr.json":()=>T(()=>import("./tr-CqPh9iY6.js"),[]).then(a=>a.default),"../i18n/uk.json":()=>T(()=>import("./uk-CBcda3hV.js"),[]).then(a=>a.default),"../i18n/vi.json":()=>T(()=>import("./vi-Lfa-VYGA.js"),[]).then(a=>a.default),"../i18n/zh-cn.json":()=>T(()=>import("./zh-cn-CFCd-XoD.js"),[]).then(a=>a.default),"../i18n/zh-hk.json":()=>T(()=>import("./zh-hk-BYHSteah.js"),[]).then(a=>a.default)});{if(!v[`../i18n/${c}.json`]){console.warn(`Vue Cal: the locale \`${c}\` does not exist. Falling back to \`en-us\`.`),c="en-us";return}v=await((M=v[`../i18n/${c}.json`])==null?void 0:M.call(v))}o.texts=Object.assign(o.texts,Object.assign({...q.texts},v)),A.updateTexts(o.texts)},j=ve(n.events||[]);return Z(()=>n.events,c=>j.splice(0,j.length,...c)),Z(()=>n.locale,c=>f(c||"en-us")),(n.locale||!o.texts.today)&&f(n.locale||"en-us"),{...ze(n),events:j,eventListeners:W,defaultView:G,availableViews:I,disableDays:D,ready:P,sm:x,xs:g,clickToNavigate:z,hideWeekdays:L,hideWeekends:O,minTimestamp:i,maxTimestamp:u,schedules:m,selectedDate:t,editableEvents:d,showCellEventCount:_,allDayEvents:Y,timeAtCursor:y,view:S,get hasHiddenDays(){return Object.keys(L.value).length},get size(){return g.value?"xs":x.value?"sm":"lg"},loadTexts:f}},nt=(o,n)=>{const h=n.timeTo-n.timeFrom;return(o-n.timeFrom)*100/h},qe=(o,n)=>{const h=n.timeTo-n.timeFrom;return~~(o*h/100+n.timeFrom)},Ke=(o,n)=>{const h=n.clientHeight;return o*100/h},he=ve({id:null,date:null});let pe=!1,_e=!0;const K=ve({el:null,cell:null,timeout:null}),U=ve({eventId:null,fromVueCal:null,toVueCal:null});function Ue(o){const{config:n,view:h,eventsManager:A,emit:P,uid:S,dateUtils:x}=o,g=i=>{var f;const{timeStep:u,timeCellHeight:m,timeFrom:d}=n,_=(((f=i.touches)==null?void 0:f[0])||i).clientY,{top:Y}=i.currentTarget.getBoundingClientRect(),y=_-Y-~~i.dataTransfer.getData("cursor-grab-at");return qe(Ke(y,i.currentTarget),n)},z=(i,u,m)=>{const d=u.duration||W(u.start,u.end)||n.timeStep;let _=Math.max(g(i),0);if(n.snapToInterval){const j=_+n.snapToInterval/2;_=j-j%n.snapToInterval}const Y=new Date(new Date(m).setMinutes(_)),y=Math.min(_+d,24*60),f=new Date(new Date(m).setMinutes(y));return{start:Y,end:f}},W=(i,u)=>Math.round((u-i)/6e4);return{eventDragStart:(i,u)=>{if(i.target.nodeType===3||o.touch.isResizingEvent)return i.preventDefault();i.dataTransfer.effectAllowed="move",i.dataTransfer.dropEffect="move";const m={...u,_:{id:u._.id,duration:W(u.start,u.end)}};try{i.dataTransfer.setData("text/plain",""),i.dataTransfer.setData("event",JSON.stringify(m)),i.dataTransfer.setData("cursor-grab-at",i.offsetY)}catch(_){return console.warn("Vue Cal: Failed to set drag data:",_),i.preventDefault()}U.eventId=u._.id,U.fromVueCal=S,P("event-drag-start",{e:i,event:u});const d=i.target.closest(".vuecal__event");d.classList.add("vuecal__event--dragging-ghost"),setTimeout(()=>{d.classList.add("vuecal__event--dragging-original"),d.classList.remove("vuecal__event--dragging-ghost")},0),pe=!1,Object.assign(he,{id:h.id,date:h.firstCellDate}),_e=!0,o.touch.isDraggingEvent=!0},eventDragEnd:(i,u)=>{U.eventId=null,i.target.closest(".vuecal__event").classList.remove("vuecal__event--dragging-original");const{fromVueCal:m,toVueCal:d}=U;d&&m!==d&&A.deleteEvent(u._.id,3),pe&&_e&&he.id&&h.switchView(he.id,he.date,!0),P("event-drag-end",{e:i,event:u,external:U.fromVueCal!==S}),U.fromVueCal=null,U.toVueCal=null,o.touch.isDraggingEvent=!1},cellDragEnter:(i,u)=>{const{start:m}=u,d=i.currentTarget;if(!i.currentTarget.contains(i.relatedTarget)){if(d===K.el||!d.className.includes("vuecal__cell-content"))return!1;K.el&&(K.cell.highlighted=!1),Object.assign(K,{el:d,cell:u,timeout:clearTimeout(K.timeout)}),u.highlighted=!0,["years","year","month"].includes(h.id)&&(K.timeout=setTimeout(()=>o.switchToNarrowerView(m),2e3))}},cellDragOver:(i,u)=>{const{start:m,schedule:d}=u;i.preventDefault(),u.highlighted=!0,(d||d===0)&&(u.highlightedSchedule=d)},cellDragLeave:(i,u)=>{i.preventDefault(),!i.currentTarget.contains(i.relatedTarget)&&(u.highlightedSchedule=!1,K.cell===u&&(clearTimeout(K.timeout),Object.assign(K,{el:null,cell:null,timeout:null}),u.highlighted=!1))},cellDragDrop:async(i,u,m=!1)=>{var M,a,b;i.preventDefault(),clearTimeout(K.timeout),Object.assign(K,{el:null,cell:null,timeout:null});const d=JSON.parse(i.dataTransfer.getData("event")||"{}");d.start&&(d.start=new Date(d.start)),d.end&&(d.end=new Date(d.end));let _,Y,y;m?(Y=new Date(u.start),y=new Date(u.end)):{start:Y,end:y}=z(i,d,u.start);const{schedule:f}=((M=i.target.closest("[data-schedule]"))==null?void 0:M.dataset)||{};let j=()=>{};U.fromVueCal===S?(_=A.getEvent(d._.id),_&&(_._.dragging=!1,j=V=>{if(_.start=Y,_.end=y,_.allDay=m,f!==void 0&&(_.schedule=~~f),V&&typeof V=="object"){const{_:B,...R}=V;Object.assign(_,R)}})):(_={...d,start:Y,end:y,...f!==void 0&&{schedule:~~f},_:{id:((a=d._)==null?void 0:a.id)||d.id,duration:W(Y,y)},getOverlappingEvents:()=>A.getEventsInRange(Y,y,{schedule:~~f})},j=V=>{if(_=A.createEvent(_),V&&typeof V=="object"){const{_:B,...R}=V;Object.assign(_,R)}});let c=!0;const{drop:v}=(b=n.eventListeners)==null?void 0:b.event;v&&(c=await v({e:i,event:{..._,start:Y,end:y,schedule:~~f},overlaps:_.getOverlappingEvents({start:Y,end:y,schedule:~~f}),cell:u,external:U.fromVueCal!==S})),c!==!1&&j(c),u.highlighted=!1,u.highlightedSchedule=null,_e=!1,U.toVueCal=S,P("event-dropped",{e:i,cell:u,event:_,originalEvent:d,external:U.fromVueCal!==S})}}}const be=(o,n)=>{let h,A,P,S={},x={};const g=le(o),z=()=>{g.value.today||(g.value=n),Date.prototype.addDays=function(e){return I(this,e||0)},Date.prototype.subtractDays=function(e){return G(this,e||0)},Date.prototype.addHours=function(e){return t(this,e||0)},Date.prototype.subtractHours=function(e){return D(this,e||0)},Date.prototype.addMinutes=function(e){return i(this,e||0)},Date.prototype.subtractMinutes=function(e){return u(this,e||0)},Date.prototype.getWeek=function(){return d(this)},Date.prototype.isToday=function(){return _(this)},Date.prototype.isLeapYear=function(){return f(this)},Date.prototype.format=function(e="YYYY-MM-DD"){return V(this,e)},Date.prototype.formatTime=function(e="HH:mm"){return R(this,e)}},W=()=>{delete Date.prototype.addDays,delete Date.prototype.subtractDays,delete Date.prototype.addHours,delete Date.prototype.subtractHours,delete Date.prototype.addMinutes,delete Date.prototype.subtractMinutes,delete Date.prototype.getWeek,delete Date.prototype.isToday,delete Date.prototype.isLeapYear,delete Date.prototype.format,delete Date.prototype.formatTime},L=e=>{g.value=e,Date.prototype.subtractDays&&z()},O=()=>(A!==new Date().getDate()&&(h=new Date,A=h.getDate(),P=`${h.getFullYear()}-${h.getMonth()}-${h.getDate()}`),P),I=(e,l)=>{const s=new Date(e.valueOf());return s.setDate(s.getDate()+l),s},G=(e,l)=>{const s=new Date(e.valueOf());return s.setDate(s.getDate()-l),s},t=(e,l)=>{const s=new Date(e.valueOf());return s.setHours(s.getHours()+l),s},D=(e,l)=>{const s=new Date(e.valueOf());return s.setHours(s.getHours()-l),s},i=(e,l)=>{const s=new Date(e.valueOf());return s.setMinutes(s.getMinutes()+l),s},u=(e,l)=>{const s=new Date(e.valueOf());return s.setMinutes(s.getMinutes()-l),s},m=(e,l)=>{const s=p=>{const C=p%l;return C!==0&&(p+=C>=l/2?l-C:-C),p};if(typeof e=="number")return s(e);if(e instanceof Date){let p=s(e.getMinutes());p>=60&&(e.setHours(e.getHours()+1),p=0),e.setMinutes(p,0,0)}},d=(e,l=!1)=>{const s=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())),p=s.getUTCDay()||7;s.setUTCDate(s.getUTCDate()+4-p);const C=new Date(Date.UTC(s.getUTCFullYear(),0,1));return Math.ceil(((s-C)/864e5+1)/7)+(l?1:0)},_=e=>`${e.getFullYear()}-${e.getMonth()}-${e.getDate()}`===O(),Y=(e,l)=>{if(!e||!l)return console.warn(`Vue Cal: missing date${e?"2":"1"} parameter for comparison with \`isSameDate(date1, date2)\`.`);if(b(e)){if(!b(l))return console.warn(`Vue Cal: invalid date2 provided for comparison with \`isSameDate(date1, date2)\`: \`${l}\`.`)}else return console.warn(`Vue Cal: invalid date1 provided for comparison with \`isSameDate(date1, date2)\`: \`${e}\`.`);return e.getFullYear()===l.getFullYear()&&e.getMonth()===l.getMonth()&&e.getDate()===l.getDate()},y=(e,l,s)=>b(e)?e.getTime()>=l&&e.getTime()<=s:console.warn(`Vue Cal: invalid date provided to \`isInRange(date, rangeStart, rangeEnd)\`: \`${e}\`.`),f=e=>{const l=e.getFullYear();return!(l%400)||l%100&&!(l%4)},j=(e=null,l)=>{const s=e&&new Date(e.valueOf())||new Date,p=l?7:6;return s.setDate(s.getDate()-(s.getDay()+p)%7),s},c=e=>e instanceof Date?e:(e.length===10&&(e+=" 00:00"),new Date(e.replace(/-/g,"/"))),v=e=>e.getHours()*60+e.getMinutes(),M=(e,l)=>{typeof e=="string"&&(e=e.replace(/-/g,"/")),typeof l=="string"&&(l=l.replace(/-/g,"/")),e=new Date(e).setHours(0,0,0,0),l=new Date(l).setHours(0,0,1,0);const s=(new Date(l).getTimezoneOffset()-new Date(e).getTimezoneOffset())*60*1e3;return Math.ceil((l-e-s)/(24*3600*1e3))},a=(e,l,s)=>Math.abs(e.getTime()-l.getTime())<=s*60*1e3,b=e=>e&&e instanceof Date&&!isNaN(e),V=(e,l="YYYY-MM-DD",s=null)=>{if(s||(s=g.value),l||(l="YYYY-MM-DD"),l==="YYYY-MM-DD")return B(e);S={},x={};const p={YYYY:()=>F(e,s).YYYY,YY:()=>F(e,s).YY(),M:()=>F(e,s).M,MM:()=>F(e,s).MM(),MMM:()=>F(e,s).MMM(),MMMM:()=>F(e,s).MMMM(),MMMMG:()=>F(e,s).MMMMG(),D:()=>F(e,s).D,DD:()=>F(e,s).DD(),S:()=>F(e,s).S(),d:()=>F(e,s).d,dd:()=>F(e,s).dd(),ddd:()=>F(e,s).ddd(),dddd:()=>F(e,s).dddd(),HH:()=>N(e,s).HH,H:()=>N(e,s).H,hh:()=>N(e,s).hh,h:()=>N(e,s).h,am:()=>N(e,s).am,AM:()=>N(e,s).AM,mm:()=>N(e,s).mm,m:()=>N(e,s).m,s:()=>N(e,s).s};return l.replace(/(\{[a-zA-Z]+\}|[a-zA-Z]+)/g,(C,Q)=>{const H=p[Q.replace(/\{|\}/g,"")];return H!==void 0?H():Q})},B=e=>{const l=e.getMonth()+1,s=e.getDate();return`${e.getFullYear()}-${l<10?"0":""}${l}-${s<10?"0":""}${s}`},R=(e,l="HH:mm",s=null,p=!1)=>{let C=!1;if(p){const[me,ie,ue]=[e.getHours(),e.getMinutes(),e.getSeconds()];me+ie+ue===141&&(C=!0)}if(e instanceof Date&&l==="HH:mm")return C?"24:00":re(e);x={},s||(s=g.value);const Q=N(e,s),H=l.replace(/(\{[a-zA-Z]+\}|[a-zA-Z]+)/g,(me,ie)=>{const ue=Q[ie.replace(/\{|\}/g,"")];return ue!==void 0?ue:ie});return C?H.replace("23:59","24:00"):H},re=e=>{const l=e.getHours(),s=e.getMinutes();return`${(l<10?"0":"")+l}:${(s<10?"0":"")+s}`},ee=e=>{const l=Math.floor(e/60).toString().padStart(2,0),s=(e%60).toString().padStart(2,0);return`${l}:${s}`},te=e=>{if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},F=(e,l)=>{if(S.D)return S;const s=e.getFullYear(),p=e.getMonth()+1,C=e.getDate(),H=(e.getDay()-1+7)%7;return S={YYYY:s,YY:()=>s.toString().substring(2),M:p,MM:()=>p.toString().padStart(2,0),MMM:()=>l.months[p-1].substring(0,3),MMMM:()=>l.months[p-1],MMMMG:()=>(l.monthsGenitive||l.months)[p-1],D:C,DD:()=>C.toString().padStart(2,0),S:()=>te(C),d:H+1,dd:()=>l.weekDaysShort.length?l.weekDaysShort[H]:l.weekDays[H][0],ddd:()=>l.weekDaysShort.length?l.weekDaysShort[H]:l.weekDays[H].substr(0,3),dddd:()=>l.weekDays[H]},S},N=(e,l)=>{if(x.am)return x;let s,p,C;e instanceof Date?(s=e.getHours(),p=e.getMinutes(),C=e.getSeconds()):(s=Math.floor(e/60),p=Math.floor(e%60));const Q=s%12?s%12:12,H=(l||{am:"am",pm:"pm"})[s===24||s<12?"am":"pm"];return x={H:s,h:Q,HH:s.toString().padStart(2,0),hh:Q.toString().padStart(2,0),am:H,AM:H.toUpperCase(),m:p,mm:p.toString().padStart(2,0),s:C},x};return{addDatePrototypes:z,removeDatePrototypes:W,updateTexts:L,addDays:I,subtractDays:G,addHours:t,subtractHours:D,addMinutes:i,subtractMinutes:u,snapToInterval:m,getWeek:d,isToday:_,isSameDate:Y,isInRange:y,isLeapYear:f,getPreviousFirstDayOfWeek:j,stringToDate:c,dateToMinutes:v,countDays:M,datesInSameTimeStep:a,isValid:b,formatDate:V,formatDateLite:B,formatTime:R,formatTimeLite:re,formatMinutes:ee}},Qe=o=>{const{dateUtils:n,config:h}=o;let A=0;const P=E(()=>{const t={byYear:{},byDate:{},recurring:[],multiday:[],byId:{}},D=h.events.sort((i,u)=>i.start-u.start<0?-1:1);for(const i of D)if(S(i),x(i),t.byId[i._.id]=i,i.recurring)t.recurring.push(i._.id);else if(i._.multiday)t.multiday.push(i._.id),t.byDate[i._.startFormatted]||(t.byDate[i._.startFormatted]=[]),t.byDate[i._.startFormatted].push(i._.id);else{t.byDate[i._.startFormatted]||(t.byDate[i._.startFormatted]=[]),t.byDate[i._.startFormatted].push(i._.id);const u=i._.startFormatted.substring(0,4),m=i._.startFormatted.substring(5,7),d=i._.startFormatted.substring(8,10);t.byYear[u]||(t.byYear[u]={}),t.byYear[u][m]||(t.byYear[u][m]={}),t.byYear[u][m][d]||(t.byYear[u][m][d]=[]),t.byYear[u][m][d].push(i._.id)}return t}),S=t=>{if(typeof t.start=="string"&&(t.start=n.stringToDate(t.start)),typeof t.end=="string"&&(t.end=n.stringToDate(t.end)),t.start.setSeconds(0,0),t.end.getSeconds()>=59?t.end.setMinutes(60,0,0):t.end.setSeconds(0,0),isNaN(t.start)||isNaN(t.end)||t.end.getTime()<t.start.getTime()){isNaN(t.start)?console.error(`Vue Cal: invalid start date for event "${t.title}".`,t.start):isNaN(t.end)?console.error(`Vue Cal: invalid end date for event "${t.title}".`,t.end):console.error(`Vue Cal: invalid event dates for event "${t.title}". The event ends before it starts.`,t.start,t.end);return}t._||(t._={}),t._.multiday=!n.isSameDate(t.start,new Date(t.end.getTime()-1)),t._.startFormatted=n.formatDate(t.start),t._.startMinutes=~~n.dateToMinutes(t.start),t._.endMinutes=~~n.dateToMinutes(t.end);const D=t.start.getHours(),i=t.start.getMinutes().toString().padStart(2,0),u=t.end.getHours(),m=t.end.getMinutes().toString().padStart(2,0);t._.startTimeFormatted24=`${D.toString().padStart(2,0)}:${i}`,t._.startTimeFormatted12=`${D%12||12}${i?`:${i}`:""} ${D<12?"AM":"PM"}`,t._.endTimeFormatted24=`${u.toString().padStart(2,0)}:${m}`,t._.endTimeFormatted12=`${u%12||12}${m?`:${m}`:""} ${u<12?"AM":"PM"}`,t._.duration=Math.abs(~~((t.end-t.start)/6e4))},x=t=>{t._||(t._={}),t._.id=t._.id||++A,t.delete||(t.delete=D=>L(t._.id,D)),t._.deleting=!1,t._.deleted=!1,t.isOverlapping=(D=null)=>t.getOverlappingEvents(D).length,t.getOverlappingEvents=(D=null)=>{var i;return I((D==null?void 0:D.start)||t.start,(D==null?void 0:D.end)||t.end,{excludeIds:[t._.id],schedule:(i=h.schedules)!=null&&i.length?~~((D==null?void 0:D.schedule)||t.schedule):null})},t._.register=D=>{t._.$el=D,t._.fireCreated&&(o.emit("event-created",t),delete t._.fireCreated)},t._.unregister=()=>{t._.$el=null,t._.register=null,t.isOverlapping=null,t.getOverlappingEvents=null,t.delete=null}},g=t=>P.value.byId[t],z=t=>{const D=[];for(const{start:i,end:u}of t){const m=I(i,u);m.length&&D.push(...m)}return D},W=t=>{if(!t.start||!t.end){console.error("Vue Cal: Cannot create an event without valid start and end dates.");return}return h.snapToInterval&&(n.snapToInterval(t.start,h.snapToInterval),n.snapToInterval(t.end,h.snapToInterval)),t={...t},t._||(t._={}),t._.id=++A,t._.fireCreated=!0,h.events.push(t),t},L=async(t,D=0)=>{var _,Y;if(!t)return console.warn("Vue Cal: Cannot delete event without its ID or criteria.");let i=typeof t=="string"||!isNaN(t)?t:null;const u=typeof t=="object"?Object.entries(t):null;if(u){const[y,f]=u[0];i=(_=h.events.find(j=>j[y]===f))==null?void 0:_._.id}if(!h.editableEvents.delete)return console.info("Vue Cal: Event deletion is disabled. Enable it with the `editable-events` props.");if(!i)return console.warn("Vue Cal: Cannot delete event without its ID.");const m=h.events.findIndex(y=>y._.id===i);if(m===-1)return console.warn(`Vue Cal: Cannot delete unknown event \`${i}\`.`);const d=h.events[m];if(d.deletable===!1)return console.warn(`Vue Cal: Can't delete event \`${i}\` since it was explicitely set to \`delete: false\`.`);switch(D){case 0:d._.deleting?h.events.splice(m,1):d._.deleting=!0;break;case 1:d._.deleting=!0;break;case 2:d._.deleted=!0,h.events[m]._.deleted=!0,(Y=d._.$el)==null||Y.dispatchEvent(new CustomEvent("event-deleted",{detail:d._.id}));break;case 3:h.events.splice(m,1),o.emit("update:events",h.events),o.emit("event-delete",d);break}return!0},O=(t,D,i)=>{const u=h.allDayEvents?{allDay:i}:{},m=I(t,D,{background:!1,...u});if(!m.length)return{cellOverlaps:{},longestStreak:0};const d={};let _=[],Y=0;m.sort((y,f)=>y.start-f.start||y.end-y.start-(f.end-f.start));for(const y of m){const f=y._.id;d[f]||(d[f]={overlaps:new Set,maxConcurrent:1,position:0}),_=_.filter(a=>a.end>y.start);const j=_.filter(a=>{var V;return(!((V=h.schedules)!=null&&V.length)||y.schedule===a.schedule)&&a.start<y.end}),c=new Set(j.map(a=>{var b;return((b=d[a._.id])==null?void 0:b.position)??0}));let v=0;for(;c.has(v);)v++;d[f].position=v,_.push(y);const M=Math.max(1,...j.map(a=>{var b;return((b=d[a._.id])==null?void 0:b.maxConcurrent)??1}));d[f].maxConcurrent=Math.max(j.length+1,M);for(const a of j)d[a._.id].overlaps.add(f),d[f].overlaps.add(a._.id),d[a._.id].maxConcurrent=d[f].maxConcurrent;Y=Math.max(Y,d[f].maxConcurrent)}for(const y in d)d[y].overlaps=[...d[y].overlaps];return{cellOverlaps:d,longestStreak:Y}},I=(t,D,{excludeIds:i=[],schedule:u=null,background:m=!0,allDay:d=!1}={})=>{const _=t.getFullYear(),Y=D.getFullYear(),y=t.getMonth()+1,f=D.getMonth()+1,j=t.getDate(),c=D.getDate(),v=t.getTime(),M=D.getTime(),a=[],b=new Set(i);for(let V=_;V<=Y;V++){const B=`${V}`,R=P.value.byYear[B];if(!R)continue;const re=V===_?y:1,ee=V===Y?f:12;for(let te=re;te<=ee;te++){const F=String(te).padStart(2,"0"),N=R[F];if(N)for(const e in N){const l=+e;if(V===_&&te===y&&l<j||V===Y&&te===f&&l>c)continue;const s=N[e];for(let p=0;p<s.length;p++){const C=P.value.byId[s[p]];!C||b.has(C._.id)||u!==null&&u!==C.schedule||m===!1&&C.background||h.allDayEvents&&(d&&!C.allDay||!d&&C.allDay)||C.end.getTime()>v&&C.start.getTime()<M&&a.push(C)}}}}return a};return{events:P,getEvent:g,getViewEvents:z,getCellOverlappingEvents:O,getEventsInRange:I,createEvent:W,deleteEvent:L,isEventInRange:(t,D,i)=>{const u=t.allDay||!h.time,m=u?new Date(t.start).setHours(0,0,0,0):t.start.getTime(),d=u?new Date(t.end).setHours(23,59,59,999):t.end.getTime(),_=u?new Date(D).setHours(0,0,0,0):D.getTime(),Y=u?new Date(i).setHours(23,59,59,999):i.getTime();return d>_&&m<Y}}},Xe=({config:o,dateUtils:n,emit:h,texts:A,eventsManager:P},S)=>{const{availableViews:x}=o,g=le(o.view&&x[o.view]?o.view:o.defaultView),z=le(o.selectedDate||null),W=le(new Date),L=le(new Date(o.viewDate||W.value));L.value.setHours(0,0,0,0);const O=le(new Date(L));let I=null;const G=E(()=>g.value==="month"?O.value:f.value),t=E(()=>g.value==="month"?new Date(O.value.getFullYear(),O.value.getMonth()+1,0,23,59,59,999):c.value),D=E(()=>g.value==="week"?n.getPreviousFirstDayOfWeek(f.value,o.startWeekOnSunday):g.value==="month"?f.value:G.value),i=E(()=>{if(g.value==="week"){const r=n.addDays(D.value,7);return r.setMilliseconds(-1),r}return g.value==="month"?c.value:t.value}),u=E(()=>{const r=W.value.getTime();if(g.value==="week")return D.value.getTime()<=r&&r<=i.value.getTime();const w=f.value.getTime(),$=c.value.getTime();return w<=r&&r<=$});function m(){W.value=new Date,I=setTimeout(m,60*1e3)}function d(){I=setTimeout(m,(60-new Date().getSeconds())*1e3),m()}const _=E(()=>{if(!o.availableViews[g.value])return 1;let r=o.availableViews[g.value].cols;return o.hasHiddenDays&&["week","month"].includes(g.value)&&(r-=o.hasHiddenDays),r}),Y=E(()=>{var r;return((r=o.availableViews[g.value])==null?void 0:r.rows)||1}),y=E(()=>_.value*Y.value),f=E(()=>{if(g.value==="month"){let r=O.value.getDay()||7;return o.startWeekOnSunday&&!o.hideWeekdays[7]&&(r+=1),o.viewDayOffset&&(r-=o.viewDayOffset),n.subtractDays(O.value,r-1)}if(g.value==="week"){const r="1234567".split("").filter($=>!Object.keys(o.hideWeekdays).includes($));let w=Math.min(...r);return o.startWeekOnSunday&&!o.hideWeekdays[7]&&(w=1),o.viewDayOffset&&(w+=o.viewDayOffset),n.addDays(O.value,w-1)}return O.value}),j=E(()=>{const r=[],w=["days","week","month"].includes(g.value);let $=0;for(let k=0;k<y.value+$;k++)switch(g.value){case"day":case"days":case"week":case"month":{const J=n.addDays(f.value,k),De=J.getDay()||7;if(w&&o.hasHiddenDays&&o.hideWeekdays[De]){$++;continue}const oe=new Date(J);oe.setHours(23,59,59,999),r.push({start:J,startFormatted:n.formatDate(J),end:oe});break}case"year":r.push({start:new Date(f.value.getFullYear(),k,1,0,0,0,0),end:new Date(f.value.getFullYear(),k+1,0,23,59,59,999)});break;case"years":r.push({start:new Date(f.value.getFullYear()+k,0,1,0,0,0,0),end:new Date(f.value.getFullYear()+k+1,0,0,23,59,59,999)});break}return r}),c=E(()=>j.value[j.value.length-1].end),v=le("right"),M=E(()=>{const r=Object.keys(o.availableViews);return r[r.indexOf(g.value)+1]}),a=E(()=>{const r=Object.keys(o.availableViews);return r[r.indexOf(g.value)-1]});function b(r,w,$=!1){if(!w||!w[r])return r+1;const k=w[r];return $&&typeof k=="string"?k.substring(0,3):k}function V(r,w,$){const{monthsArray:k,monthBeforeDay:J,canTruncate:De,xs:oe}=$,ae=r.getMonth(),ne=r.getFullYear(),se=w.getMonth(),de=w.getFullYear(),ge=ae!==se,xe=ne!==de,X=De&&(oe||ge),ce=r.getDate(),fe=w.getDate();return xe?J?`${b(ae,k,X)} ${ce}, ${ne} - ${b(se,k,X)} ${fe}, ${de}`:`${ce} ${b(ae,k,X)} ${ne} - ${fe} ${b(se,k,X)} ${de}`:ge?J?`${b(ae,k,X)} ${ce} - ${b(se,k,X)} ${fe}, ${ne}`:`${ce} ${b(ae,k,X)} - ${fe} ${b(se,k,X)} ${ne}`:J?`${b(ae,k,X)} ${ce}-${fe}, ${ne}`:`${ce}-${fe} ${b(ae,k,X)} ${ne}`}const B=E(()=>{const{dateFormat:r,months:w,monthsGenitive:$,week:k,truncations:J}=A,De=o.locale,oe=J!==!1,ae=r.indexOf("M")<r.indexOf("D"),ne=$&&De==="el"?$:w;switch(g.value){case"day":return n.formatDate(f.value,r);case"days":case"week":{const se={monthsArray:ne,monthBeforeDay:ae,canTruncate:oe,xs:o.xs};let de=V(f.value,c.value,se);if(g.value==="week"){const ge=n.getWeek(f.value,o.startWeekOnSunday&&!o.hideWeekdays[7]);de+=` <small>${k} ${ge}</small>`}return de}case"month":{const se=`${o.xs&&oe?"MMM":"MMMM"} YYYY`;return n.formatDate(G.value,se)}case"year":return f.value.getFullYear();case"years":return`${f.value.getFullYear()} - ${t.value.getFullYear()}`}});function R(){switch(O.value=new Date(L.value||W.value),O.value.setHours(0,0,0,0),g.value){case"day":break;case"days":break;case"week":O.value=n.getPreviousFirstDayOfWeek(O.value,o.startWeekOnSunday&&!o.hideWeekdays[7]);break;case"month":O.value=new Date(O.value.getFullYear(),O.value.getMonth(),1,0,0,0,0);break;case"year":O.value=new Date(O.value.getFullYear(),0,1,0,0,0,0);break;case"years":O.value=new Date(O.value.getFullYear()-O.value.getFullYear()%y.value,0,1,0,0,0,0);break}o.ready&&h("view-change",{id:g.value,title:B.value,start:G.value,end:t.value,extendedStart:D.value,extendedEnd:i.value,cellDates:j.value,containsToday:u.value,events:Te.value}),W.value=new Date}function re(r){const w=g.value,$=o.availableViews[w];r[w]&&JSON.stringify(r[w])===JSON.stringify($)||R()}function ee(r,w=!0){const $=Object.keys(o.availableViews);g.value!==r&&($.includes(r)?(v.value=$.indexOf(r)<$.indexOf(g.value)?"left":"right",g.value=r,h("update:view",r),R()):console.warn(`Vue Cal: the \`${r}\` view is not available.`))}function te(){M.value?ee(M.value):console.warn("Vue Cal: no broader view is available.")}function F(){a.value?ee(a.value):console.warn("Vue Cal: no narrower view is available.")}function N(){l(!1)}function e(){l(!0)}function l(r=!0){let w=new Date(L.value);switch(g.value){case"day":case"days":r?w=n.addDays(c.value,1):w=n.subtractDays(f.value,y.value);break;case"week":{r?(w=n.addDays(i.value,1),w.setHours(0,0,0,0)):w=n.subtractDays(D.value,y.value);break}case"month":{const $=r?1:-1;w=new Date(w.getFullYear(),w.getMonth()+$,1,0,0,0,0);break}case"year":{const $=r?1:-1;w=new Date(w.getFullYear()+$,1,1,0,0,0,0);break}case"years":{const $=r?y.value:-y.value;w=new Date(w.getFullYear()+$,1,1,0,0,0,0);break}}p(w)}function s(){const r=new Date;r.setHours(0,0,0,0),p(r)}function p(r,w=!0,$=!1){if(!n.isValid(r))return console.warn("Vue Cal: can't navigate to the given date: invalid date provided to `updateViewDate(date)`.");let[k,J]=[f.value,c.value];g.value==="month"&&([k,J]=[G.value,t.value]),(!n.isInRange(r,k,J)||$)&&(r.setHours(0,0,0,0),v.value=r.getTime()<k.getTime()?"left":"right",L.value=r,w&&h("update:viewDate",r),R())}function C(r,w=!0){if(!n.isValid(r))return console.warn("Vue Cal: can't update the selected date: invalid date provided to `updateSelectedDate(date)`.");const{isValid:$,isSameDate:k}=n;(!z.value||!$(z.value)||!k(r,z.value))&&(r.setHours(0,0,0,0),z.value=r,w&&h("update:selectedDate",r))}function Q(r){!r&&!O.value.getDay()?p(n.addDays(O.value,1),!0,!0):(v.value="left",R())}function H(r){r&&o.startWeekOnSunday&&!O.value.getDay()?p(n.addDays(O.value,1),!0,!0):!r&&o.startWeekOnSunday&&O.value.getDay()===1&&p(n.subtractDays(O.value,1),!0,!0)}function me(){console.log("toggling weekdays",o.hideWeekdays)}function ie(r){var k;const w=(k=S.value)==null?void 0:k.querySelector(".vuecal__scrollable"),$=r?r*o.timeCellHeight/o.timeStep:0;w==null||w.scrollTo({top:$,behavior:"smooth"})}function ue(){const r=new Date;ie(r.getHours()*60+r.getMinutes())}function He(){ie(0)}const Te=E(()=>P.getViewEvents(j.value)),We=P.createEvent,Ne=P.deleteEvent;return Z(()=>o.view,r=>ee(r,!1)),Z(()=>o.availableViews,re),Z(()=>o.datePicker,()=>ee("month",!1)),Z(()=>o.viewDate,r=>p(r,!1)),Z(()=>o.selectedDate,r=>C(r,!1)),Z(()=>o.startWeekOnSunday,r=>Q(r)),Z(()=>o.hideWeekends,r=>H(r)),Z(()=>o.hideWeekdays,me),Z(()=>y.value,()=>{y.value>90&&console.warn("Vue Cal: high cell count detected. Performance may degrade when interactions are enabled.")}),Z(()=>o.watchRealTime,r=>{r&&o.time?d():I=clearTimeout(I)}),R(),o.time&&o.watchRealTime&&d(),Be(()=>I=clearTimeout(I)),{now:W,id:g,broaderView:M,narrowerView:a,title:B,viewDate:L,start:G,end:t,extendedStart:D,extendedEnd:i,firstCellDate:f,lastCellDate:c,containsToday:u,selectedDate:z,cellDates:j,cols:_,rows:Y,events:Te,transitionDirection:v,switch:ee,broader:te,narrower:F,previous:N,next:e,navigate:l,goToToday:s,updateViewDate:p,updateSelectedDate:C,scrollToCurrentTime:ue,scrollToTime:ie,scrollTop:He,createEvent:We,deleteEvent:Ne,get isDay(){return g.value==="day"},get isDays(){return g.value==="days"},get isWeek(){return g.value==="week"},get isMonth(){return g.value==="month"},get isYear(){return g.value==="year"},get isYears(){return g.value==="years"}}},Me=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],Ee=["January","February","March","April","May","June","July","August","September","October","November","December"],Ve="Years",ke="Year",Oe="Month",Ye="Week",Se="Days",Ce="Day",$e="Today",je="No Event",Ie="All-day",Ae="Delete",Pe="Create an event",Fe="dddd, MMMM D, YYYY",Le="am",Re="pm",we={weekDays:Me,months:Ee,years:Ve,year:ke,month:Oe,week:Ye,days:Se,day:Ce,today:$e,noEvent:je,allDay:Ie,deleteEvent:Ae,createEvent:Pe,dateFormat:Fe,am:Le,pm:Re},et=Object.freeze(Object.defineProperty({__proto__:null,allDay:Ie,am:Le,createEvent:Pe,dateFormat:Fe,day:Ce,days:Se,default:we,deleteEvent:Ae,month:Oe,months:Ee,noEvent:je,pm:Re,today:$e,week:Ye,weekDays:Me,year:ke,years:Ve},Symbol.toStringTag,{value:"Module"})),ye=ve({texts:{...q.texts},dateUtils:be(q.texts,we)}),st=({props:o,emit:n,attrs:h,vuecalEl:A,uid:P})=>{const S=ve({uid:P,emit:n,texts:{...ye.texts},dateUtils:{...ye.dateUtils},now:new Date,config:{},eventsManager:{},view:{},dnd:{},touch:{isDraggingCell:!1,isDraggingEvent:!1,isResizingEvent:!1}});return S.dateUtils=be(Object.assign(q.texts,S.texts),we),S.config=Ze(S,o,h),S.eventsManager=Qe(S),S.view=Xe(S,A),S.dnd=Ue(S),S},{addDatePrototypes:rt,removeDatePrototypes:it,updateTexts:ot,addDays:lt,subtractDays:ut,addHours:dt,subtractHours:ct,addMinutes:ft,subtractMinutes:vt,getWeek:Dt,isToday:mt,isSameDate:gt,isInRange:ht,isLeapYear:_t,getPreviousFirstDayOfWeek:yt,stringToDate:wt,dateToMinutes:Tt,countDays:pt,datesInSameTimeStep:bt,isValid:Mt,formatDate:Et,formatDateLite:Vt,formatTime:kt,formatTimeLite:Ot,formatMinutes:Yt}=ye.dateUtils;export{lt as a,rt as b,pt as c,at as d,Ke as e,Et as f,nt as m,qe as p,wt as s,st as u,Je as w};
