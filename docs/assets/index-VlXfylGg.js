import{c as V,x as de,D as B,V as Ne,W as _,r as se,O as xe}from"./index-bcGq9Fyj.js";const J={texts:{weekDays:Array(7).fill(""),weekDaysShort:[],months:Array(12).fill(""),years:"",year:"",month:"",week:"",day:"",today:"",noEvent:"",allDay:"",deleteEvent:"",createEvent:"",dateFormat:"dddd MMMM D, YYYY",am:"am",pm:"pm",truncations:!0},availableViews:{day:{cols:1,rows:1},days:{cols:10,rows:1},week:{cols:7,rows:1},month:{cols:7,rows:6},year:{cols:4,rows:3},years:{cols:5,rows:5}}},et=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"],ze=["sun","mon","tue","wed","thu","fri","sat"],Be=ze.reduce((l,n,g)=>(l[n]=g||7,l),{}),Je=(l,n,g)=>{const{dateUtils:S}=l,A=!1,k=V(()=>{if(Y.value[n.view])return n.view;const u=n.datePicker?"month":"week",c=n.view||u;return Y.value[c]?c:(console.warn(`Vue Cal: the provided or default view \`${c}\` is either invalid or not in the list of available views. The first available view will be chosen: \`${Object.keys(Y.value)[0]}\`.`),Object.keys(Y.value)[0])}),L=V(()=>n.sm&&!n.xs),D=V(()=>n.xs||n.datePicker),F=V(()=>n.clickToNavigate||n.datePicker&&n.clickToNavigate!==!1),H=V(()=>{const u={cell:{},event:{}},c=y=>y.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();for(const[y,a]of Object.entries(g)){const[O,$,N]=y.match(/^on(Cell|Event)(.+)$/)||[];O&&(u[$.toLowerCase()][c(N).replace(/^-+|-+$/g,"")]=a)}return u}),C=V(()=>{var c;const u={};return n.hideWeekends&&(u[6]=!0)&&(u[7]=!0),(c=n.hideWeekdays)!=null&&c.length&&n.hideWeekdays.forEach(y=>u[Be[y]]=!0),u}),M=V(()=>n.hideWeekends||C.value[6]&&C.value[7]),Y=V(()=>{const u=n.datePicker;let c=0,y={};const a=n.views;return u&&!a?{month:{...J.availableViews.month},year:{...J.availableViews.year},years:{...J.availableViews.years}}:(a?(Array.isArray(a)?y=a.reduce((O,$)=>(typeof $=="string"&&J.availableViews[$]?O[$]=J.availableViews[$]:c++,O),{}):typeof a=="object"&&(y=Object.entries(a).reduce((O,[$,N])=>{const{cols:I,rows:re}=J.availableViews[$];return O[$]={cols:N.cols||I,rows:N.rows||re},O},{})),c&&console.warn("Vue Cal: the provided `views` prop contains invalid views that will be ignored."),Object.keys(y).length||(console.warn("Vue Cal: No valid view in the provided `views` prop. Falling back to default views."),y={...J.availableViews})):y={...J.availableViews},y)}),W=V(()=>n.datePicker?"month":Y.value.week?"week":Object.keys(Y.value)[0]),s=V(()=>{if(typeof n.selectedDate=="string")return S.stringToDate(n.selectedDate);if(n.selectedDate instanceof Date)return n.selectedDate;n.selectedDate?console.warn("Vue Cal: The provided selected date is invalid:",n.selectedDate):console.log("Vue Cal: Info - The provided selected date is undefined.")}),w=V(()=>{if(!n.disableDays)return[];const u=[];if(Array.isArray(n.disableDays))for(let c of n.disableDays){let y=c;typeof c=="string"?y=S.stringToDate(c):c instanceof Date&&(c=S.formatDate(c,"YYYY-MM-DD")),y instanceof Date&&!isNaN(y.getTime())?u.push(c):console.warn("Vue Cal: The provided `disableDays` prop contains an invalid date:",c)}else console.warn("Vue Cal: The provided `disableDays` prop is invalid:",n.disableDays);return u}),t=V(()=>{let u=null;return n.minDate&&typeof n.minDate=="string"?u=S.stringToDate(n.minDate):n.minDate&&n.minDate instanceof Date&&(u=n.minDate),(u==null?void 0:u.getTime())||null}),o=V(()=>{let u=null;return n.maxDate&&typeof n.maxDate=="string"?u=S.stringToDate(n.maxDate):n.maxDate&&n.maxDate instanceof Date&&(u=n.maxDate),(u==null?void 0:u.getTime())||null}),f=V(()=>{var y;const{view:u}=l;return n.schedules.length&&(u.isDay||u.isDays||u.isWeek)&&((y=n.schedules)==null?void 0:y.map((a,O)=>({...a,id:a.id??O+1})))||void 0}),v=V(()=>{const u={drag:!0,resize:!0,delete:!0,create:!0};return n.editableEvents===!0?u:n.editableEvents===!1?Object.keys(u).map(c=>u[c]=!1):{...u,...n.editableEvents}}),m=async u=>{var y;let c=Object.assign({"../i18n/ar.json":()=>_(()=>import("./ar-BYzjjpsv.js"),[]).then(a=>a.default),"../i18n/bg.json":()=>_(()=>import("./bg-DMHwWaHq.js"),[]).then(a=>a.default),"../i18n/bn.json":()=>_(()=>import("./bn-BMHg_6Cc.js"),[]).then(a=>a.default),"../i18n/bs.json":()=>_(()=>import("./bs-BQ6MYvQz.js"),[]).then(a=>a.default),"../i18n/ca.json":()=>_(()=>import("./ca-RJZ1kJCp.js"),[]).then(a=>a.default),"../i18n/cs.json":()=>_(()=>import("./cs-DUR8CfDR.js"),[]).then(a=>a.default),"../i18n/da.json":()=>_(()=>import("./da-C24v82sE.js"),[]).then(a=>a.default),"../i18n/de.json":()=>_(()=>import("./de-BdfGCsIh.js"),[]).then(a=>a.default),"../i18n/el.json":()=>_(()=>import("./el-BbeSS82J.js"),[]).then(a=>a.default),"../i18n/en-gb.json":()=>_(()=>import("./en-gb-CdanBkea.js"),[]).then(a=>a.default),"../i18n/en-us.json":()=>_(()=>Promise.resolve().then(()=>Qe),void 0).then(a=>a.default),"../i18n/es.json":()=>_(()=>import("./es-BAvNIXnQ.js"),[]).then(a=>a.default),"../i18n/et.json":()=>_(()=>import("./et-BB2GC4z2.js"),[]).then(a=>a.default),"../i18n/fa.json":()=>_(()=>import("./fa-CLNQrKiD.js"),[]).then(a=>a.default),"../i18n/fi.json":()=>_(()=>import("./fi-C3bvOL2F.js"),[]).then(a=>a.default),"../i18n/fr.json":()=>_(()=>import("./fr-GKuwB6u6.js"),[]).then(a=>a.default),"../i18n/he.json":()=>_(()=>import("./he-dgw3ddFB.js"),[]).then(a=>a.default),"../i18n/hr.json":()=>_(()=>import("./hr-H7xnaszL.js"),[]).then(a=>a.default),"../i18n/hu.json":()=>_(()=>import("./hu-D5PQi6ht.js"),[]).then(a=>a.default),"../i18n/id.json":()=>_(()=>import("./id-C4V9iQKh.js"),[]).then(a=>a.default),"../i18n/is.json":()=>_(()=>import("./is-B36p4HLL.js"),[]).then(a=>a.default),"../i18n/it.json":()=>_(()=>import("./it-BYE8Pv4L.js"),[]).then(a=>a.default),"../i18n/ja.json":()=>_(()=>import("./ja-C_20UUx6.js"),[]).then(a=>a.default),"../i18n/ka.json":()=>_(()=>import("./ka-CNxn4HrL.js"),[]).then(a=>a.default),"../i18n/ko.json":()=>_(()=>import("./ko-C66lSvgy.js"),[]).then(a=>a.default),"../i18n/lt.json":()=>_(()=>import("./lt-CSQtJejA.js"),[]).then(a=>a.default),"../i18n/mn.json":()=>_(()=>import("./mn-OFyF7cuL.js"),[]).then(a=>a.default),"../i18n/nl.json":()=>_(()=>import("./nl-p6pls65L.js"),[]).then(a=>a.default),"../i18n/no.json":()=>_(()=>import("./no-ukJhddl5.js"),[]).then(a=>a.default),"../i18n/pl.json":()=>_(()=>import("./pl-BLhEwn5P.js"),[]).then(a=>a.default),"../i18n/pt-br.json":()=>_(()=>import("./pt-br-Bqj88eex.js"),[]).then(a=>a.default),"../i18n/pt-pt.json":()=>_(()=>import("./pt-pt-Bqj88eex.js"),[]).then(a=>a.default),"../i18n/ro.json":()=>_(()=>import("./ro-DIcQOJbf.js"),[]).then(a=>a.default),"../i18n/ru.json":()=>_(()=>import("./ru-CFk3STll.js"),[]).then(a=>a.default),"../i18n/sk.json":()=>_(()=>import("./sk-BVV3GKLZ.js"),[]).then(a=>a.default),"../i18n/sl.json":()=>_(()=>import("./sl-f5pM865d.js"),[]).then(a=>a.default),"../i18n/sq.json":()=>_(()=>import("./sq-BsCWVll4.js"),[]).then(a=>a.default),"../i18n/sr.json":()=>_(()=>import("./sr-BpAzoY7E.js"),[]).then(a=>a.default),"../i18n/sv.json":()=>_(()=>import("./sv-ifbbDt9U.js"),[]).then(a=>a.default),"../i18n/tr.json":()=>_(()=>import("./tr-CqPh9iY6.js"),[]).then(a=>a.default),"../i18n/uk.json":()=>_(()=>import("./uk-CBcda3hV.js"),[]).then(a=>a.default),"../i18n/vi.json":()=>_(()=>import("./vi-Lfa-VYGA.js"),[]).then(a=>a.default),"../i18n/zh-cn.json":()=>_(()=>import("./zh-cn-CFCd-XoD.js"),[]).then(a=>a.default),"../i18n/zh-hk.json":()=>_(()=>import("./zh-hk-BYHSteah.js"),[]).then(a=>a.default)});{if(!c[`../i18n/${u}.json`]){console.warn(`Vue Cal: the locale \`${u}\` does not exist. Falling back to \`en-us\`.`),u="en-us";return}c=await((y=c[`../i18n/${u}.json`])==null?void 0:y.call(c))}l.texts=Object.assign(l.texts,Object.assign({...J.texts},c)),S.updateTexts(l.texts)},b=de(n.events||[]);return B(()=>n.events,u=>b.splice(0,b.length,...u)),B(()=>n.locale,u=>m(u||"en-us")),(n.locale||!l.texts.today)&&m(n.locale||"en-us"),{...Ne(n),events:b,eventListeners:H,defaultView:W,availableViews:Y,disableDays:w,ready:A,sm:L,xs:D,clickToNavigate:F,hideWeekdays:C,hideWeekends:M,minTimestamp:t,maxTimestamp:o,schedules:f,selectedDate:s,editableEvents:v,view:k,get hasHiddenDays(){return Object.keys(C.value).length},get size(){return D.value?"xs":L.value?"sm":"lg"},loadTexts:m}},tt=(l,n)=>{const g=n.timeTo-n.timeFrom;return(l-n.timeFrom)*100/g},Ge=(l,n)=>{const g=n.timeTo-n.timeFrom;return~~(l*g/100+n.timeFrom)},Ze=(l,n)=>{const g=n.clientHeight;return l*100/g},ge=de({id:null,date:null});let pe=!1,_e=!0;const G=de({el:null,cell:null,timeout:null}),K=de({eventId:null,fromVueCal:null,toVueCal:null});function qe(l){const{config:n,view:g,eventsManager:S,emit:A,uid:k,dateUtils:L}=l,D=t=>{var c;const{timeStep:o,timeCellHeight:f,timeFrom:v}=n,m=(((c=t.touches)==null?void 0:c[0])||t).clientY,{top:b}=t.currentTarget.getBoundingClientRect(),u=m-b-~~t.dataTransfer.getData("cursor-grab-at");return Ge(Ze(u,t.currentTarget),n)},F=(t,o,f)=>{const v=o.duration||H(o.start,o.end)||n.timeStep;let m=Math.max(D(t),0);if(n.snapToInterval){const y=m+n.snapToInterval/2;m=y-y%n.snapToInterval}const b=new Date(new Date(f).setMinutes(m)),u=Math.min(m+v,24*60),c=new Date(new Date(f).setMinutes(u));return{start:b,end:c}},H=(t,o)=>Math.round((o-t)/6e4);return{eventDragStart:(t,o)=>{if(t.target.nodeType===3||l.touch.isResizingEvent)return t.preventDefault();t.dataTransfer.effectAllowed="move",t.dataTransfer.dropEffect="move";const f={...o,_:{id:o._.id,duration:H(o.start,o.end)}};try{t.dataTransfer.setData("text/plain",""),t.dataTransfer.setData("event",JSON.stringify(f)),t.dataTransfer.setData("cursor-grab-at",t.offsetY)}catch(m){return console.warn("Vue Cal: Failed to set drag data:",m),t.preventDefault()}K.eventId=o._.id,K.fromVueCal=k;const v=t.target.closest(".vuecal__event");v.classList.add("vuecal__event--dragging-ghost"),setTimeout(()=>{v.classList.add("vuecal__event--dragging-original"),v.classList.remove("vuecal__event--dragging-ghost")},0),pe=!1,Object.assign(ge,{id:g.id,date:g.firstCellDate}),_e=!0,l.touch.isDraggingEvent=!0},eventDragEnd:(t,o)=>{K.eventId=null,t.target.closest(".vuecal__event").classList.remove("vuecal__event--dragging-original");const{fromVueCal:f,toVueCal:v}=K;v&&f!==v&&S.deleteEvent(o._.id,3),K.fromVueCal=null,K.toVueCal=null,pe&&_e&&ge.id&&g.switchView(ge.id,ge.date,!0),l.touch.isDraggingEvent=!1},cellDragEnter:(t,o)=>{const{start:f}=o,v=t.currentTarget;if(!t.currentTarget.contains(t.relatedTarget)){if(v===G.el||!v.className.includes("vuecal__cell-content"))return!1;G.el&&(G.cell.highlighted=!1),Object.assign(G,{el:v,cell:o,timeout:clearTimeout(G.timeout)}),o.highlighted=!0,["years","year","month"].includes(g.id)&&(G.timeout=setTimeout(()=>l.switchToNarrowerView(f),2e3))}},cellDragOver:(t,o)=>{const{start:f,schedule:v}=o;t.preventDefault(),o.highlighted=!0,(v||v===0)&&(o.highlightedSchedule=v)},cellDragLeave:(t,o)=>{t.preventDefault(),!t.currentTarget.contains(t.relatedTarget)&&(o.highlightedSchedule=!1,G.cell===o&&(clearTimeout(G.timeout),Object.assign(G,{el:null,cell:null,timeout:null}),o.highlighted=!1))},cellDragDrop:async(t,o)=>{var O,$,N;t.preventDefault(),clearTimeout(G.timeout),Object.assign(G,{el:null,cell:null,timeout:null});const f=JSON.parse(t.dataTransfer.getData("event")||"{}");f.start&&(f.start=new Date(f.start)),f.end&&(f.end=new Date(f.end));let v;const{start:m,end:b}=F(t,f,o.start),{schedule:u}=((O=t.target.closest("[data-schedule]"))==null?void 0:O.dataset)||{};let c=()=>{};K.fromVueCal===k?(v=S.getEvent(f._.id),v&&(v._.dragging=!1,c=()=>{v.start=m,v.end=b,u!==void 0&&(v.schedule=~~u)})):(v={...f,start:m,end:b,...u!==void 0&&{schedule:~~u},_:{id:(($=f._)==null?void 0:$.id)||f.id,duration:H(m,b)},getOverlappingEvents:()=>S.getEventsInRange(S.getEventsByDate(L.formatDate(m),!0),{start:m,end:b},{schedule:~~u})},c=()=>{v=S.createEvent(v)});let y=!0;const{drop:a}=(N=n.eventListeners)==null?void 0:N.event;a&&(y=await a({e:t,event:{...v,start:m,end:b,schedule:~~u},overlaps:v.getOverlappingEvents({start:m,end:b,schedule:~~u}),cell:o,external:K.fromVueCal!==k})),y!==!1&&c(),o.highlighted=!1,o.highlightedSchedule=null,_e=!1,K.toVueCal=k,A("event-dropped",{e:t,cell:o,event:v,originalEvent:f,external:K.fromVueCal!==k})}}}const Me=(l,n)=>{let g,S,A,k={},L={};const D=se(l),F=()=>{D.value.today||(D.value=n),Date.prototype.addDays=function(e){return Y(this,e||0)},Date.prototype.subtractDays=function(e){return W(this,e||0)},Date.prototype.addHours=function(e){return s(this,e||0)},Date.prototype.subtractHours=function(e){return w(this,e||0)},Date.prototype.addMinutes=function(e){return t(this,e||0)},Date.prototype.subtractMinutes=function(e){return o(this,e||0)},Date.prototype.getWeek=function(){return v(this)},Date.prototype.isToday=function(){return m(this)},Date.prototype.isLeapYear=function(){return c(this)},Date.prototype.format=function(e="YYYY-MM-DD"){return re(this,e)},Date.prototype.formatTime=function(e="HH:mm"){return ee(this,e)}},H=()=>{delete Date.prototype.addDays,delete Date.prototype.subtractDays,delete Date.prototype.addHours,delete Date.prototype.subtractHours,delete Date.prototype.addMinutes,delete Date.prototype.subtractMinutes,delete Date.prototype.getWeek,delete Date.prototype.isToday,delete Date.prototype.isLeapYear,delete Date.prototype.format,delete Date.prototype.formatTime},C=e=>{D.value=e,Date.prototype.subtractDays&&F()},M=()=>(S!==new Date().getDate()&&(g=new Date,S=g.getDate(),A=`${g.getFullYear()}-${g.getMonth()}-${g.getDate()}`),A),Y=(e,d)=>{const i=new Date(e.valueOf());return i.setDate(i.getDate()+d),i},W=(e,d)=>{const i=new Date(e.valueOf());return i.setDate(i.getDate()-d),i},s=(e,d)=>{const i=new Date(e.valueOf());return i.setHours(i.getHours()+d),i},w=(e,d)=>{const i=new Date(e.valueOf());return i.setHours(i.getHours()-d),i},t=(e,d)=>{const i=new Date(e.valueOf());return i.setMinutes(i.getMinutes()+d),i},o=(e,d)=>{const i=new Date(e.valueOf());return i.setMinutes(i.getMinutes()-d),i},f=(e,d)=>{const i=T=>{const j=T%d;return j!==0&&(T+=j>=d/2?d-j:-j),T};if(typeof e=="number")return i(e);if(e instanceof Date){let T=i(e.getMinutes());T>=60&&(e.setHours(e.getHours()+1),T=0),e.setMinutes(T,0,0)}},v=(e,d=!1)=>{const i=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())),T=i.getUTCDay()||7;i.setUTCDate(i.getUTCDate()+4-T);const j=new Date(Date.UTC(i.getUTCFullYear(),0,1));return Math.ceil(((i-j)/864e5+1)/7)+(d?1:0)},m=e=>`${e.getFullYear()}-${e.getMonth()}-${e.getDate()}`===M(),b=(e,d)=>{if(!e||!d)return console.warn(`Vue Cal: missing date${e?"2":"1"} parameter for comparison with \`isSameDate(date1, date2)\`.`);if(I(e)){if(!I(d))return console.warn(`Vue Cal: invalid date2 provided for comparison with \`isSameDate(date1, date2)\`: \`${d}\`.`)}else return console.warn(`Vue Cal: invalid date1 provided for comparison with \`isSameDate(date1, date2)\`: \`${e}\`.`);return e.getFullYear()===d.getFullYear()&&e.getMonth()===d.getMonth()&&e.getDate()===d.getDate()},u=(e,d,i)=>I(e)?e.getTime()>=d&&e.getTime()<=i:console.warn(`Vue Cal: invalid date provided to \`isInRange(date, rangeStart, rangeEnd)\`: \`${e}\`.`),c=e=>{const d=e.getFullYear();return!(d%400)||d%100&&!(d%4)},y=(e=null,d)=>{const i=e&&new Date(e.valueOf())||new Date,T=d?7:6;return i.setDate(i.getDate()-(i.getDay()+T)%7),i},a=e=>e instanceof Date?e:(e.length===10&&(e+=" 00:00"),new Date(e.replace(/-/g,"/"))),O=e=>e.getHours()*60+e.getMinutes(),$=(e,d)=>{typeof e=="string"&&(e=e.replace(/-/g,"/")),typeof d=="string"&&(d=d.replace(/-/g,"/")),e=new Date(e).setHours(0,0,0,0),d=new Date(d).setHours(0,0,1,0);const i=(new Date(d).getTimezoneOffset()-new Date(e).getTimezoneOffset())*60*1e3;return Math.ceil((d-e-i)/(24*3600*1e3))},N=(e,d,i)=>Math.abs(e.getTime()-d.getTime())<=i*60*1e3,I=e=>e&&e instanceof Date&&!isNaN(e),re=(e,d="YYYY-MM-DD",i=null)=>{if(i||(i=D.value),d||(d="YYYY-MM-DD"),d==="YYYY-MM-DD")return ce(e);k={},L={};const T={YYYY:()=>R(e,i).YYYY,YY:()=>R(e,i).YY(),M:()=>R(e,i).M,MM:()=>R(e,i).MM(),MMM:()=>R(e,i).MMM(),MMMM:()=>R(e,i).MMMM(),MMMMG:()=>R(e,i).MMMMG(),D:()=>R(e,i).D,DD:()=>R(e,i).DD(),S:()=>R(e,i).S(),d:()=>R(e,i).d,dd:()=>R(e,i).dd(),ddd:()=>R(e,i).ddd(),dddd:()=>R(e,i).dddd(),HH:()=>z(e,i).HH,H:()=>z(e,i).H,hh:()=>z(e,i).hh,h:()=>z(e,i).h,am:()=>z(e,i).am,AM:()=>z(e,i).AM,mm:()=>z(e,i).mm,m:()=>z(e,i).m,s:()=>z(e,i).s};return d.replace(/(\{[a-zA-Z]+\}|[a-zA-Z]+)/g,(j,Z)=>{const P=T[Z.replace(/\{|\}/g,"")];return P!==void 0?P():Z})},ce=e=>{const d=e.getMonth()+1,i=e.getDate();return`${e.getFullYear()}-${d<10?"0":""}${d}-${i<10?"0":""}${i}`},ee=(e,d="HH:mm",i=null,T=!1)=>{let j=!1;if(T){const[De,te,ie]=[e.getHours(),e.getMinutes(),e.getSeconds()];De+te+ie===141&&(j=!0)}if(e instanceof Date&&d==="HH:mm")return j?"24:00":fe(e);L={},i||(i=D.value);const Z=z(e,i),P=d.replace(/(\{[a-zA-Z]+\}|[a-zA-Z]+)/g,(De,te)=>{const ie=Z[te.replace(/\{|\}/g,"")];return ie!==void 0?ie:te});return j?P.replace("23:59","24:00"):P},fe=e=>{const d=e.getHours(),i=e.getMinutes();return`${(d<10?"0":"")+d}:${(i<10?"0":"")+i}`},ae=e=>{const d=Math.floor(e/60).toString().padStart(2,0),i=(e%60).toString().padStart(2,0);return`${d}:${i}`},he=e=>{if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},R=(e,d)=>{if(k.D)return k;const i=e.getFullYear(),T=e.getMonth()+1,j=e.getDate(),P=(e.getDay()-1+7)%7;return k={YYYY:i,YY:()=>i.toString().substring(2),M:T,MM:()=>T.toString().padStart(2,0),MMM:()=>d.months[T-1].substring(0,3),MMMM:()=>d.months[T-1],MMMMG:()=>(d.monthsGenitive||d.months)[T-1],D:j,DD:()=>j.toString().padStart(2,0),S:()=>he(j),d:P+1,dd:()=>d.weekDaysShort.length?d.weekDaysShort[P]:d.weekDays[P][0],ddd:()=>d.weekDaysShort.length?d.weekDaysShort[P]:d.weekDays[P].substr(0,3),dddd:()=>d.weekDays[P]},k},z=(e,d)=>{if(L.am)return L;let i,T,j;e instanceof Date?(i=e.getHours(),T=e.getMinutes(),j=e.getSeconds()):(i=Math.floor(e/60),T=Math.floor(e%60));const Z=i%12?i%12:12,P=(d||{am:"am",pm:"pm"})[i===24||i<12?"am":"pm"];return L={H:i,h:Z,HH:i.toString().padStart(2,0),hh:Z.toString().padStart(2,0),am:P,AM:P.toUpperCase(),m:T,mm:T.toString().padStart(2,0),s:j},L};return{addDatePrototypes:F,removeDatePrototypes:H,updateTexts:C,addDays:Y,subtractDays:W,addHours:s,subtractHours:w,addMinutes:t,subtractMinutes:o,snapToInterval:f,getWeek:v,isToday:m,isSameDate:b,isInRange:u,isLeapYear:c,getPreviousFirstDayOfWeek:y,stringToDate:a,dateToMinutes:O,countDays:$,datesInSameTimeStep:N,isValid:I,formatDate:re,formatDateLite:ce,formatTime:ee,formatTimeLite:fe,formatMinutes:ae}},Ke=l=>{const{dateUtils:n,config:g}=l;let S=0;const A=V(()=>{const s={byDate:{},recurring:[],multiday:[],byId:{}},w=g.events.sort((t,o)=>t.start-o.start<0?-1:1);for(const t of w)k(t),t._||(t._={}),t._.id=t._.id||++S,t.delete||(t.delete=o=>C(t._.id,o)),t._.deleting=!1,t._.deleted=!1,t.isOverlapping=(o=null)=>t.getOverlappingEvents(o).length,t.getOverlappingEvents=(o=null)=>{var f;return Y(D(n.formatDate((o==null?void 0:o.start)||t.start),!0),{start:(o==null?void 0:o.start)||t.start,end:(o==null?void 0:o.end)||t.end},{excludeIds:[t._.id],schedule:(f=g.schedules)!=null&&f.length?~~((o==null?void 0:o.schedule)||t.schedule):null})},t._.register=o=>{t._.$el=o,t._.fireCreated&&(l.emit("event-created",t),delete t._.fireCreated)},t._.unregister=()=>{t._.$el=null,t._.register=null,t.isOverlapping=null,t.getOverlappingEvents=null,t.delete=null},s.byId[t._.id]=t,t.recurring?s.recurring.push(t._.id):t._.multiday?(s.multiday.push(t._.id),s.byDate[t._.startFormatted]||(s.byDate[t._.startFormatted]=[]),s.byDate[t._.startFormatted].push(t._.id)):(s.byDate[t._.startFormatted]||(s.byDate[t._.startFormatted]=[]),s.byDate[t._.startFormatted].push(t._.id));return s}),k=s=>{if(typeof s.start=="string"&&(s.start=n.stringToDate(s.start)),typeof s.end=="string"&&(s.end=n.stringToDate(s.end)),s.start.setSeconds(0,0),s.end.setSeconds(0,0),isNaN(s.start)||isNaN(s.end)){isNaN(s.start)?console.error(`Vue Cal: invalid start date for event "${s.title}".`,s.start):console.error(`Vue Cal: invalid end date for event "${s.title}".`,s.end);return}else s.end.getTime()<s.start.getTime()&&console.error(`Vue Cal: invalid event dates for event "${s.title}". The event ends before it starts.`,s.start,s.end);s._||(s._={}),s._.multiday=!n.isSameDate(s.start,new Date(s.end.getTime()-1)),s._.startFormatted=n.formatDate(s.start),s._.startMinutes=~~n.dateToMinutes(s.start),s._.endMinutes=~~n.dateToMinutes(s.end);const w=s.start.getHours(),t=s.start.getMinutes().toString().padStart(2,0),o=s.end.getHours(),f=s.end.getMinutes().toString().padStart(2,0);s._.startTimeFormatted24=`${w.toString().padStart(2,0)}:${t}`,s._.startTimeFormatted12=`${w%12||12}${t?`:${t}`:""} ${w<12?"AM":"PM"}`,s._.endTimeFormatted24=`${o.toString().padStart(2,0)}:${f}`,s._.endTimeFormatted12=`${o%12||12}${f?`:${f}`:""} ${o<12?"AM":"PM"}`,s._.duration=Math.abs(~~((s.end-s.start)/6e4))},L=s=>A.value.byId[s],D=(s,w=!1,t=!1)=>{let o=A.value.byDate[s]||[];return o=w||t?o.map(L):o,t||(o=o.filter(f=>!f.background&&!f._.deleted),w||(o=o.map(f=>f._.id))),o},F=s=>{const w={};for(const{startFormatted:t}of s){w[t]=[];const o=D(t,!1,!0);o.length&&w[t].push(...o)}return w},H=s=>{if(!s.start||!s.end){console.error("Vue Cal: Cannot create an event without valid start and end dates.");return}return g.snapToInterval&&(n.snapToInterval(s.start,g.snapToInterval),n.snapToInterval(s.end,g.snapToInterval)),s={...s},s._||(s._={}),s._.id=++S,s._.fireCreated=!0,g.events.push(s),s},C=async(s,w=0)=>{var m,b;if(!s)return console.warn("Vue Cal: Cannot delete event without its ID or criteria.");let t=typeof s=="string"||!isNaN(s)?s:null;const o=typeof s=="object"?Object.entries(s):null;if(o){const[u,c]=o[0];t=(m=g.events.find(y=>y[u]===c))==null?void 0:m._.id}if(!g.editableEvents.delete)return console.info("Vue Cal: Event deletion is disabled. Enable it with the `editable-events` props.");if(!t)return console.warn("Vue Cal: Cannot delete event without its ID.");const f=g.events.findIndex(u=>u._.id===t);if(f===-1)return console.warn(`Vue Cal: Cannot delete unknown event \`${t}\`.`);const v=g.events[f];if(v.deletable===!1)return console.warn(`Vue Cal: Can't delete event \`${t}\` since it was explicitely set to \`delete: false\`.`);switch(w){case 0:v._.deleting?g.events.splice(f,1):v._.deleting=!0;break;case 1:v._.deleting=!0;break;case 2:v._.deleted=!0,g.events[f]._.deleted=!0,(b=v._.$el)==null||b.dispatchEvent(new CustomEvent("event-deleted",{detail:v._.id}));break;case 3:g.events.splice(f,1),l.emit("update:events",g.events),l.emit("event-delete",v);break}return!0},M=s=>{const w=D(s,!0);if(!w.length)return{cellOverlaps:{},longestStreak:0};const t={};let o=[],f=0;w.sort((v,m)=>v.start-m.start||v.end-v.start-(m.end-m.start));for(const v of w){const m=v._.id;t[m]||(t[m]={overlaps:new Set,maxConcurrent:1,position:0}),o=o.filter(a=>a.end>v.start);let b=o.filter(a=>{var $;return(!(($=g.schedules)!=null&&$.length)||v.schedule===a.schedule)&&a.start<v.end}),u=new Set(b.map(a=>{var O;return((O=t[a._.id])==null?void 0:O.position)??0})),c=0;for(;u.has(c);)c++;t[m].position=c,o.push(v);let y=Math.max(1,...b.map(a=>{var O;return((O=t[a._.id])==null?void 0:O.maxConcurrent)??1}));t[m].maxConcurrent=Math.max(b.length+1,y);for(const a of b)t[a._.id].overlaps.add(m),t[m].overlaps.add(a._.id),t[a._.id].maxConcurrent=t[m].maxConcurrent;f=Math.max(f,t[m].maxConcurrent)}for(const v in t)t[v].overlaps=[...t[v].overlaps];return{cellOverlaps:t,longestStreak:f}},Y=(s=[],{start:w,end:t},{excludeIds:o=[],schedule:f=null})=>{var b;const v=new Set(o),m=[];for(const u of s)!v.has((b=u._)==null?void 0:b.id)&&(f===null||f===u.schedule)&&W(u,w,t)&&m.push(u);return m},W=(s,w,t)=>{const o=s.allDay||!g.time,f=o?new Date(s.start).setHours(0,0,0,0):s.start.getTime(),v=o?new Date(s.end).setHours(23,59,59,999):s.end.getTime(),m=o?new Date(w).setHours(0,0,0,0):w.getTime(),b=o?new Date(t).setHours(23,59,59,999):t.getTime();return v>m&&f<b};return{events:A,getEvent:L,getEventsByDate:D,getViewEvents:F,getCellOverlappingEvents:M,getEventsInRange:Y,createEvent:H,deleteEvent:C,isEventInRange:W}},Ue=({config:l,dateUtils:n,emit:g,texts:S,eventsManager:A},k)=>{const{availableViews:L}=l,D=se(l.view&&L[l.view]?l.view:l.defaultView),F=se(l.selectedDate||null),H=se(new Date),C=se(new Date(l.viewDate||H.value));C.value.setHours(0,0,0,0);const M=se(new Date(C));let Y=null;const W=V(()=>D.value==="month"?M.value:c.value),s=V(()=>D.value==="month"?new Date(M.value.getFullYear(),M.value.getMonth()+1,0,23,59,59,999):a.value),w=V(()=>D.value==="week"?n.getPreviousFirstDayOfWeek(c.value,l.startWeekOnSunday):D.value==="month"?c.value:W.value),t=V(()=>{if(D.value==="week"){const r=n.addDays(w.value,7);return r.setMilliseconds(-1),r}return D.value==="month"?a.value:s.value}),o=V(()=>{const r=H.value.getTime();if(D.value==="week")return w.value.getTime()<=r&&r<=t.value.getTime();const h=c.value.getTime(),E=a.value.getTime();return h<=r&&r<=E});function f(){H.value=new Date,Y=setTimeout(f,60*1e3)}function v(){Y=setTimeout(f,(60-new Date().getSeconds())*1e3),f()}const m=V(()=>{if(!l.availableViews[D.value])return 1;let r=l.availableViews[D.value].cols;return l.hasHiddenDays&&["week","month"].includes(D.value)&&(r-=l.hasHiddenDays),r}),b=V(()=>{var r;return((r=l.availableViews[D.value])==null?void 0:r.rows)||1}),u=V(()=>m.value*b.value),c=V(()=>{if(D.value==="month"){let r=M.value.getDay()||7;return l.startWeekOnSunday&&!l.hideWeekdays[7]&&(r+=1),l.viewDayOffset&&(r-=l.viewDayOffset),n.subtractDays(M.value,r-1)}if(D.value==="week"){const r="1234567".split("").filter(E=>!Object.keys(l.hideWeekdays).includes(E));let h=Math.min(...r);return l.startWeekOnSunday&&!l.hideWeekdays[7]&&(h=1),l.viewDayOffset&&(h+=l.viewDayOffset),n.addDays(M.value,h-1)}return M.value}),y=V(()=>{const r=[],h=["days","week","month"].includes(D.value);let E=0;for(let p=0;p<u.value+E;p++)switch(D.value){case"day":case"days":case"week":case"month":{const x=n.addDays(c.value,p),ve=x.getDay()||7;if(h&&l.hasHiddenDays&&l.hideWeekdays[ve]){E++;continue}const ne=new Date(x);ne.setHours(23,59,59,999),r.push({start:x,startFormatted:n.formatDate(x),end:ne});break}case"year":r.push({start:new Date(c.value.getFullYear(),p,1,0,0,0,0),end:new Date(c.value.getFullYear(),p+1,0,23,59,59,999)});break;case"years":r.push({start:new Date(c.value.getFullYear()+p,0,1,0,0,0,0),end:new Date(c.value.getFullYear()+p+1,0,0,23,59,59,999)});break}return r}),a=V(()=>y.value[y.value.length-1].end),O=se("right"),$=V(()=>{const r=Object.keys(l.availableViews);return r[r.indexOf(D.value)+1]}),N=V(()=>{const r=Object.keys(l.availableViews);return r[r.indexOf(D.value)-1]});function I(r,h,E=!1){if(!h||!h[r])return r+1;const p=h[r];return E&&typeof p=="string"?p.substring(0,3):p}function re(r,h,E){const{monthsArray:p,monthBeforeDay:x,canTruncate:ve,xs:ne}=E,U=r.getMonth(),Q=r.getFullYear(),X=h.getMonth(),oe=h.getFullYear(),me=U!==X,We=Q!==oe,q=ve&&(ne||me),le=r.getDate(),ue=h.getDate();return We?x?`${I(U,p,q)} ${le}, ${Q} - ${I(X,p,q)} ${ue}, ${oe}`:`${le} ${I(U,p,q)} ${Q} - ${ue} ${I(X,p,q)} ${oe}`:me?x?`${I(U,p,q)} ${le} - ${I(X,p,q)} ${ue}, ${Q}`:`${le} ${I(U,p,q)} - ${ue} ${I(X,p,q)} ${Q}`:x?`${I(U,p,q)} ${le}-${ue}, ${Q}`:`${le}-${ue} ${I(U,p,q)} ${Q}`}const ce=V(()=>{const{dateFormat:r,months:h,monthsGenitive:E,week:p,truncations:x}=S,ve=l.locale,ne=x!==!1,U=r.indexOf("M")<r.indexOf("D"),Q=E&&ve==="el"?E:h;switch(D.value){case"day":return n.formatDate(c.value,r);case"days":case"week":{const X={monthsArray:Q,monthBeforeDay:U,canTruncate:ne,xs:l.xs};let oe=re(c.value,a.value,X);if(D.value==="week"){const me=n.getWeek(c.value,l.startWeekOnSunday&&!l.hideWeekdays[7]);oe+=` <small>${p} ${me}</small>`}return oe}case"month":{const X=`${l.xs&&ne?"MMM":"MMMM"} YYYY`;return n.formatDate(W.value,X)}case"year":return c.value.getFullYear();case"years":return`${c.value.getFullYear()} - ${s.value.getFullYear()}`}});function ee(){switch(M.value=new Date(C.value||H.value),M.value.setHours(0,0,0,0),D.value){case"day":break;case"days":break;case"week":M.value=n.getPreviousFirstDayOfWeek(M.value,l.startWeekOnSunday&&!l.hideWeekdays[7]);break;case"month":M.value=new Date(M.value.getFullYear(),M.value.getMonth(),1,0,0,0,0);break;case"year":M.value=new Date(M.value.getFullYear(),0,1,0,0,0,0);break;case"years":M.value=new Date(M.value.getFullYear()-M.value.getFullYear()%u.value,0,1,0,0,0,0);break}l.ready&&g("view-change",{id:D.value,title:ce.value,start:W.value,end:s.value,extendedStart:w.value,extendedEnd:t.value,cellDates:y.value,containsToday:o.value,events:Te.value}),H.value=new Date}function fe(r){const h=D.value,E=l.availableViews[h];r[h]&&JSON.stringify(r[h])===JSON.stringify(E)||ee()}function ae(r,h=!0){const E=Object.keys(l.availableViews);D.value!==r&&(E.includes(r)?(O.value=E.indexOf(r)<E.indexOf(D.value)?"left":"right",D.value=r,g("update:view",r),ee()):console.warn(`Vue Cal: the \`${r}\` view is not available.`))}function he(){$.value?ae($.value):console.warn("Vue Cal: no broader view is available.")}function R(){N.value?ae(N.value):console.warn("Vue Cal: no narrower view is available.")}function z(){d(!1)}function e(){d(!0)}function d(r=!0){let h=new Date(C.value);switch(D.value){case"day":case"days":r?h=n.addDays(a.value,1):h=n.subtractDays(c.value,u.value);break;case"week":{r?(h=n.addDays(t.value,1),h.setHours(0,0,0,0)):h=n.subtractDays(w.value,u.value);break}case"month":{const E=r?1:-1;h=new Date(h.getFullYear(),h.getMonth()+E,1,0,0,0,0);break}case"year":{const E=r?1:-1;h=new Date(h.getFullYear()+E,1,1,0,0,0,0);break}case"years":{const E=r?u.value:-u.value;h=new Date(h.getFullYear()+E,1,1,0,0,0,0);break}}T(h)}function i(){const r=new Date;r.setHours(0,0,0,0),T(r)}function T(r,h=!0,E=!1){if(!n.isValid(r))return console.warn("Vue Cal: can't navigate to the given date: invalid date provided to `updateViewDate(date)`.");let[p,x]=[c.value,a.value];D.value==="month"&&([p,x]=[W.value,s.value]),(!n.isInRange(r,p,x)||E)&&(r.setHours(0,0,0,0),O.value=r.getTime()<p.getTime()?"left":"right",C.value=r,h&&g("update:viewDate",r),ee())}function j(r,h=!0){if(!n.isValid(r))return console.warn("Vue Cal: can't update the selected date: invalid date provided to `updateSelectedDate(date)`.");const{isValid:E,isSameDate:p}=n;(!F.value||!E(F.value)||!p(r,F.value))&&(r.setHours(0,0,0,0),F.value=r,h&&g("update:selectedDate",r))}function Z(r){!r&&!M.value.getDay()?T(n.addDays(M.value,1),!0,!0):(O.value="left",ee())}function P(r){r&&l.startWeekOnSunday&&!M.value.getDay()?T(n.addDays(M.value,1),!0,!0):!r&&l.startWeekOnSunday&&M.value.getDay()===1&&T(n.subtractDays(M.value,1),!0,!0)}function De(){console.log("toggling weekdays",l.hideWeekdays)}function te(r){var p;const h=(p=k.value)==null?void 0:p.querySelector(".vuecal__scrollable"),E=r?r*l.timeCellHeight/l.timeStep:0;h==null||h.scrollTo({top:E,behavior:"smooth"})}function ie(){const r=new Date;te(r.getHours()*60+r.getMinutes())}function He(){te(0)}const Te=V(()=>A.getViewEvents(y.value)),Re=A.createEvent,Fe=A.deleteEvent;return B(()=>l.view,r=>ae(r,!1)),B(()=>l.availableViews,fe),B(()=>l.datePicker,()=>ae("month",!1)),B(()=>l.viewDate,r=>T(r,!1)),B(()=>l.selectedDate,r=>j(r,!1)),B(()=>l.startWeekOnSunday,r=>Z(r)),B(()=>l.hideWeekends,r=>P(r)),B(()=>l.hideWeekdays,De),B(()=>u.value,()=>{u.value>90&&console.warn("Vue Cal: high cell count detected. Performance may degrade when interactions are enabled.")}),B(()=>l.watchRealTime,r=>{r&&l.time?v():Y=clearTimeout(Y)}),ee(),l.time&&l.watchRealTime&&v(),xe(()=>Y=clearTimeout(Y)),{now:H,id:D,broaderView:$,narrowerView:N,title:ce,viewDate:C,start:W,end:s,extendedStart:w,extendedEnd:t,firstCellDate:c,lastCellDate:a,containsToday:o,selectedDate:F,cellDates:y,cols:m,rows:b,events:Te,transitionDirection:O,switch:ae,broader:he,narrower:R,previous:z,next:e,navigate:d,goToToday:i,updateViewDate:T,updateSelectedDate:j,scrollToCurrentTime:ie,scrollToTime:te,scrollTop:He,createEvent:Re,deleteEvent:Fe,get isDay(){return D.value==="day"},get isDays(){return D.value==="days"},get isWeek(){return D.value==="week"},get isMonth(){return D.value==="month"},get isYear(){return D.value==="year"},get isYears(){return D.value==="years"}}},be=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],Ee=["January","February","March","April","May","June","July","August","September","October","November","December"],Ve="Years",ke="Year",Oe="Month",Se="Week",Ye="Days",$e="Day",je="Today",Ce="No Event",Ie="All day",Pe="Delete",Ae="Create an event",Le="dddd, MMMM D, YYYY",we={weekDays:be,months:Ee,years:Ve,year:ke,month:Oe,week:Se,days:Ye,day:$e,today:je,noEvent:Ce,allDay:Ie,deleteEvent:Pe,createEvent:Ae,dateFormat:Le},Qe=Object.freeze(Object.defineProperty({__proto__:null,allDay:Ie,createEvent:Ae,dateFormat:Le,day:$e,days:Ye,default:we,deleteEvent:Pe,month:Oe,months:Ee,noEvent:Ce,today:je,week:Se,weekDays:be,year:ke,years:Ve},Symbol.toStringTag,{value:"Module"})),ye=de({texts:{...J.texts},dateUtils:Me(J.texts,we)}),at=({props:l,emit:n,attrs:g,vuecalEl:S,uid:A})=>{const k=de({uid:A,emit:n,texts:{...ye.texts},dateUtils:{...ye.dateUtils},now:new Date,config:{},eventsManager:{},view:{},dnd:{},touch:{isDraggingCell:!1,isDraggingEvent:!1,isResizingEvent:!1}});return k.dateUtils=Me(Object.assign(J.texts,k.texts),we),k.config=Je(k,l,g),k.eventsManager=Ke(k),k.view=Ue(k,S),k.dnd=qe(k),k},{addDatePrototypes:nt,removeDatePrototypes:st,updateTexts:rt,addDays:it,subtractDays:ot,addHours:lt,subtractHours:ut,addMinutes:dt,subtractMinutes:ct,getWeek:vt,isToday:ft,isSameDate:Dt,isInRange:mt,isLeapYear:gt,getPreviousFirstDayOfWeek:ht,stringToDate:_t,dateToMinutes:yt,countDays:wt,datesInSameTimeStep:Tt,isValid:pt,formatDate:Mt,formatDateLite:bt,formatTime:Et,formatTimeLite:Vt,formatMinutes:kt}=ye.dateUtils;export{it as a,nt as b,wt as c,et as d,Ze as e,Mt as f,tt as m,Ge as p,_t as s,at as u,ze as w};
