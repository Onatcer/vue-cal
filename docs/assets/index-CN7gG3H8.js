import{c as E,x as ve,D as Z,V as ze,W as p,r as le,N as Be}from"./index-BOmY9RrT.js";const q={texts:{weekDays:Array(7).fill(""),weekDaysShort:[],months:Array(12).fill(""),years:"",year:"",month:"",week:"",day:"",today:"",noEvent:"",allDay:"",deleteEvent:"",createEvent:"",dateFormat:"dddd MMMM D, YYYY",am:"am",pm:"pm",truncations:!0},availableViews:{day:{cols:1,rows:1},days:{cols:10,rows:1},week:{cols:7,rows:1},month:{cols:7,rows:6},year:{cols:4,rows:3},years:{cols:5,rows:5}}},at=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"],Je=["sun","mon","tue","wed","thu","fri","sat"],Ge=Je.reduce((o,n,_)=>(o[n]=_||7,o),{}),Ze=(o,n,_)=>{const{dateUtils:A}=o,P=!1,Y=E(()=>{if(I.value[n.view])return n.view;const d=n.datePicker?"month":"week",D=n.view||d;return I.value[D]?D:(console.warn(`Vue Cal: the provided or default view \`${D}\` is either invalid or not in the list of available views. The first available view will be chosen: \`${Object.keys(I.value)[0]}\`.`),Object.keys(I.value)[0])}),x=E(()=>n.sm&&!n.xs),m=E(()=>n.xs||n.datePicker),z=E(()=>n.clickToNavigate||n.datePicker&&n.clickToNavigate!==!1),W=E(()=>{const d={cell:{},event:{}},D=h=>h.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();for(const[h,a]of Object.entries(_)){const[V,$,B]=h.match(/^on(Cell|Event)(.+)$/)||[];V&&(d[$.toLowerCase()][D(B).replace(/^-+|-+$/g,"")]=a)}return d}),L=E(()=>{var D;const d={};return n.hideWeekends&&(d[6]=!0)&&(d[7]=!0),(D=n.hideWeekdays)!=null&&D.length&&n.hideWeekdays.forEach(h=>d[Ge[h]]=!0),d}),O=E(()=>n.hideWeekends||L.value[6]&&L.value[7]),I=E(()=>{const d=n.datePicker;let D=0,h={};const a=n.views;return d&&!a?{month:{...q.availableViews.month},year:{...q.availableViews.year},years:{...q.availableViews.years}}:(a?(Array.isArray(a)?h=a.reduce((V,$)=>(typeof $=="string"&&q.availableViews[$]?V[$]=q.availableViews[$]:D++,V),{}):typeof a=="object"&&(h=Object.entries(a).reduce((V,[$,B])=>{const{cols:R,rows:re}=q.availableViews[$];return V[$]={cols:B.cols||R,rows:B.rows||re},V},{})),D&&console.warn("Vue Cal: the provided `views` prop contains invalid views that will be ignored."),Object.keys(h).length||(console.warn("Vue Cal: No valid view in the provided `views` prop. Falling back to default views."),h={...q.availableViews})):h={...q.availableViews},h)}),G=E(()=>n.datePicker?"month":I.value.week?"week":Object.keys(I.value)[0]),t=E(()=>{if(typeof n.selectedDate=="string")return A.stringToDate(n.selectedDate);if(n.selectedDate instanceof Date)return n.selectedDate;n.selectedDate?console.warn("Vue Cal: The provided selected date is invalid:",n.selectedDate):console.log("Vue Cal: Info - The provided selected date is undefined.")}),v=E(()=>{if(!n.disableDays)return[];const d=[];if(Array.isArray(n.disableDays))for(let D of n.disableDays){let h=D;typeof D=="string"?h=A.stringToDate(D):D instanceof Date&&(D=A.formatDate(D,"YYYY-MM-DD")),h instanceof Date&&!isNaN(h.getTime())?d.push(D):console.warn("Vue Cal: The provided `disableDays` prop contains an invalid date:",D)}else console.warn("Vue Cal: The provided `disableDays` prop is invalid:",n.disableDays);return d}),i=E(()=>{let d=null;return n.minDate&&typeof n.minDate=="string"?d=A.stringToDate(n.minDate):n.minDate&&n.minDate instanceof Date&&(d=n.minDate),(d==null?void 0:d.getTime())||null}),u=E(()=>{let d=null;return n.maxDate&&typeof n.maxDate=="string"?d=A.stringToDate(n.maxDate):n.maxDate&&n.maxDate instanceof Date&&(d=n.maxDate),(d==null?void 0:d.getTime())||null}),f=E(()=>{var h;const{view:d}=o;return n.schedules.length&&(d.isDay||d.isDays||d.isWeek)&&((h=n.schedules)==null?void 0:h.map((a,V)=>({...a,id:a.id??V+1})))||void 0}),c=E(()=>{const d={drag:!0,resize:!0,delete:!0,create:!0};return n.editableEvents===!0?d:n.editableEvents===!1?Object.keys(d).map(D=>d[D]=!1):{...d,...n.editableEvents}}),y=E(()=>{const{view:d}=o,{eventCount:D}=n;return(Array.isArray(D)?D.includes(d.id):D)&&(d.isMonth&&!n.eventsOnMonthView||d.isYear)}),b=E(()=>n.allDayEvents&&n.time!==!1&&!Y.isMonth),w=E(()=>n.timeAtCursor&&n.time!==!1),g=async d=>{var h;let D=Object.assign({"../i18n/ar.json":()=>p(()=>import("./ar-BYzjjpsv.js"),[]).then(a=>a.default),"../i18n/bg.json":()=>p(()=>import("./bg-DMHwWaHq.js"),[]).then(a=>a.default),"../i18n/bn.json":()=>p(()=>import("./bn-BMHg_6Cc.js"),[]).then(a=>a.default),"../i18n/bs.json":()=>p(()=>import("./bs-BQ6MYvQz.js"),[]).then(a=>a.default),"../i18n/ca.json":()=>p(()=>import("./ca-RJZ1kJCp.js"),[]).then(a=>a.default),"../i18n/cs.json":()=>p(()=>import("./cs-DUR8CfDR.js"),[]).then(a=>a.default),"../i18n/da.json":()=>p(()=>import("./da-C24v82sE.js"),[]).then(a=>a.default),"../i18n/de.json":()=>p(()=>import("./de-BdfGCsIh.js"),[]).then(a=>a.default),"../i18n/el.json":()=>p(()=>import("./el-BbeSS82J.js"),[]).then(a=>a.default),"../i18n/en-gb.json":()=>p(()=>import("./en-gb-BS4nN9Uk.js"),[]).then(a=>a.default),"../i18n/en-us.json":()=>p(()=>Promise.resolve().then(()=>et),void 0).then(a=>a.default),"../i18n/es.json":()=>p(()=>import("./es-BAvNIXnQ.js"),[]).then(a=>a.default),"../i18n/et.json":()=>p(()=>import("./et-BB2GC4z2.js"),[]).then(a=>a.default),"../i18n/fa.json":()=>p(()=>import("./fa-CLNQrKiD.js"),[]).then(a=>a.default),"../i18n/fi.json":()=>p(()=>import("./fi-C3bvOL2F.js"),[]).then(a=>a.default),"../i18n/fr.json":()=>p(()=>import("./fr-GKuwB6u6.js"),[]).then(a=>a.default),"../i18n/he.json":()=>p(()=>import("./he-dgw3ddFB.js"),[]).then(a=>a.default),"../i18n/hr.json":()=>p(()=>import("./hr-H7xnaszL.js"),[]).then(a=>a.default),"../i18n/hu.json":()=>p(()=>import("./hu-D5PQi6ht.js"),[]).then(a=>a.default),"../i18n/id.json":()=>p(()=>import("./id-C4V9iQKh.js"),[]).then(a=>a.default),"../i18n/is.json":()=>p(()=>import("./is-B36p4HLL.js"),[]).then(a=>a.default),"../i18n/it.json":()=>p(()=>import("./it-BYE8Pv4L.js"),[]).then(a=>a.default),"../i18n/ja.json":()=>p(()=>import("./ja-C_20UUx6.js"),[]).then(a=>a.default),"../i18n/ka.json":()=>p(()=>import("./ka-CNxn4HrL.js"),[]).then(a=>a.default),"../i18n/ko.json":()=>p(()=>import("./ko-C66lSvgy.js"),[]).then(a=>a.default),"../i18n/lt.json":()=>p(()=>import("./lt-CSQtJejA.js"),[]).then(a=>a.default),"../i18n/mn.json":()=>p(()=>import("./mn-OFyF7cuL.js"),[]).then(a=>a.default),"../i18n/nl.json":()=>p(()=>import("./nl-p6pls65L.js"),[]).then(a=>a.default),"../i18n/no.json":()=>p(()=>import("./no-ukJhddl5.js"),[]).then(a=>a.default),"../i18n/pl.json":()=>p(()=>import("./pl-BLhEwn5P.js"),[]).then(a=>a.default),"../i18n/pt-br.json":()=>p(()=>import("./pt-br-Bqj88eex.js"),[]).then(a=>a.default),"../i18n/pt-pt.json":()=>p(()=>import("./pt-pt-Bqj88eex.js"),[]).then(a=>a.default),"../i18n/ro.json":()=>p(()=>import("./ro-DIcQOJbf.js"),[]).then(a=>a.default),"../i18n/ru.json":()=>p(()=>import("./ru-CFk3STll.js"),[]).then(a=>a.default),"../i18n/sk.json":()=>p(()=>import("./sk-BVV3GKLZ.js"),[]).then(a=>a.default),"../i18n/sl.json":()=>p(()=>import("./sl-f5pM865d.js"),[]).then(a=>a.default),"../i18n/sq.json":()=>p(()=>import("./sq-BsCWVll4.js"),[]).then(a=>a.default),"../i18n/sr.json":()=>p(()=>import("./sr-BpAzoY7E.js"),[]).then(a=>a.default),"../i18n/sv.json":()=>p(()=>import("./sv-ifbbDt9U.js"),[]).then(a=>a.default),"../i18n/tr.json":()=>p(()=>import("./tr-CqPh9iY6.js"),[]).then(a=>a.default),"../i18n/uk.json":()=>p(()=>import("./uk-CBcda3hV.js"),[]).then(a=>a.default),"../i18n/vi.json":()=>p(()=>import("./vi-Lfa-VYGA.js"),[]).then(a=>a.default),"../i18n/zh-cn.json":()=>p(()=>import("./zh-cn-CFCd-XoD.js"),[]).then(a=>a.default),"../i18n/zh-hk.json":()=>p(()=>import("./zh-hk-BYHSteah.js"),[]).then(a=>a.default)});{if(!D[`../i18n/${d}.json`]){console.warn(`Vue Cal: the locale \`${d}\` does not exist. Falling back to \`en-us\`.`),d="en-us";return}D=await((h=D[`../i18n/${d}.json`])==null?void 0:h.call(D))}o.texts=Object.assign(o.texts,Object.assign({...q.texts},D)),A.updateTexts(o.texts)},j=ve(n.events||[]);return Z(()=>n.events,d=>j.splice(0,j.length,...d)),Z(()=>n.locale,d=>g(d||"en-us")),(n.locale||!o.texts.today)&&g(n.locale||"en-us"),{...ze(n),events:j,eventListeners:W,defaultView:G,availableViews:I,disableDays:v,ready:P,sm:x,xs:m,clickToNavigate:z,hideWeekdays:L,hideWeekends:O,minTimestamp:i,maxTimestamp:u,schedules:f,selectedDate:t,editableEvents:c,showCellEventCount:y,allDayEvents:b,timeAtCursor:w,view:Y,get hasHiddenDays(){return Object.keys(L.value).length},get size(){return m.value?"xs":x.value?"sm":"lg"},loadTexts:g}},nt=(o,n)=>{const _=n.timeTo-n.timeFrom;return(o-n.timeFrom)*100/_},qe=(o,n)=>{const _=n.timeTo-n.timeFrom;return~~(o*_/100+n.timeFrom)},Ke=(o,n)=>{const _=n.clientHeight;return o*100/_},he=ve({id:null,date:null});let pe=!1,_e=!0;const K=ve({el:null,cell:null,timeout:null}),U=ve({eventId:null,fromVueCal:null,toVueCal:null});function Ue(o){const{config:n,view:_,eventsManager:A,emit:P,uid:Y,dateUtils:x}=o,m=i=>{var g;const{timeStep:u,timeCellHeight:f,timeFrom:c}=n,y=(((g=i.touches)==null?void 0:g[0])||i).clientY,{top:b}=i.currentTarget.getBoundingClientRect(),w=y-b-~~i.dataTransfer.getData("cursor-grab-at");return qe(Ke(w,i.currentTarget),n)},z=(i,u,f)=>{const c=u.duration||W(u.start,u.end)||n.timeStep;let y=Math.max(m(i),0);if(n.snapToInterval){const j=y+n.snapToInterval/2;y=j-j%n.snapToInterval}const b=new Date(new Date(f).setMinutes(y)),w=Math.min(y+c,24*60),g=new Date(new Date(f).setMinutes(w));return{start:b,end:g}},W=(i,u)=>Math.round((u-i)/6e4);return{eventDragStart:(i,u)=>{if(i.target.nodeType===3||o.touch.isResizingEvent)return i.preventDefault();i.dataTransfer.effectAllowed="move",i.dataTransfer.dropEffect="move";const f={...u,_:{id:u._.id,duration:W(u.start,u.end)}};try{i.dataTransfer.setData("text/plain",""),i.dataTransfer.setData("event",JSON.stringify(f)),i.dataTransfer.setData("cursor-grab-at",i.offsetY)}catch(y){return console.warn("Vue Cal: Failed to set drag data:",y),i.preventDefault()}U.eventId=u._.id,U.fromVueCal=Y,P("event-drag-start",{e:i,event:u});const c=i.target.closest(".vuecal__event");c.classList.add("vuecal__event--dragging-ghost"),setTimeout(()=>{c.classList.add("vuecal__event--dragging-original"),c.classList.remove("vuecal__event--dragging-ghost")},0),pe=!1,Object.assign(he,{id:_.id,date:_.firstCellDate}),_e=!0,o.touch.isDraggingEvent=!0},eventDragEnd:(i,u)=>{U.eventId=null,i.target.closest(".vuecal__event").classList.remove("vuecal__event--dragging-original");const{fromVueCal:f,toVueCal:c}=U;c&&f!==c&&A.deleteEvent(u._.id,3),pe&&_e&&he.id&&_.switchView(he.id,he.date,!0),P("event-drag-end",{e:i,event:u,external:U.fromVueCal!==Y}),U.fromVueCal=null,U.toVueCal=null,o.touch.isDraggingEvent=!1},cellDragEnter:(i,u)=>{const{start:f}=u,c=i.currentTarget;if(!i.currentTarget.contains(i.relatedTarget)){if(c===K.el||!c.className.includes("vuecal__cell-content"))return!1;K.el&&(K.cell.highlighted=!1),Object.assign(K,{el:c,cell:u,timeout:clearTimeout(K.timeout)}),u.highlighted=!0,["years","year","month"].includes(_.id)&&(K.timeout=setTimeout(()=>o.switchToNarrowerView(f),2e3))}},cellDragOver:(i,u)=>{const{start:f,schedule:c}=u;i.preventDefault(),u.highlighted=!0,(c||c===0)&&(u.highlightedSchedule=c)},cellDragLeave:(i,u)=>{i.preventDefault(),!i.currentTarget.contains(i.relatedTarget)&&(u.highlightedSchedule=!1,K.cell===u&&(clearTimeout(K.timeout),Object.assign(K,{el:null,cell:null,timeout:null}),u.highlighted=!1))},cellDragDrop:async(i,u,f=!1)=>{var h,a,V;i.preventDefault(),clearTimeout(K.timeout),Object.assign(K,{el:null,cell:null,timeout:null});const c=JSON.parse(i.dataTransfer.getData("event")||"{}");c.start&&(c.start=new Date(c.start)),c.end&&(c.end=new Date(c.end));let y,b,w;f?(b=new Date(u.start),w=new Date(u.end)):{start:b,end:w}=z(i,c,u.start);const{schedule:g}=((h=i.target.closest("[data-schedule]"))==null?void 0:h.dataset)||{};let j=()=>{};U.fromVueCal===Y?(y=A.getEvent(c._.id),y&&(y._.dragging=!1,j=$=>{if(y.start=b,y.end=w,y.allDay=f,g!==void 0&&(y.schedule=~~g),$&&typeof $=="object"){const{_:B,...R}=$;Object.assign(y,R)}})):(y={...c,start:b,end:w,...g!==void 0&&{schedule:~~g},_:{id:((a=c._)==null?void 0:a.id)||c.id,duration:W(b,w)},getOverlappingEvents:()=>A.getEventsInRange(b,w,{schedule:~~g})},j=$=>{if(y=A.createEvent(y),$&&typeof $=="object"){const{_:B,...R}=$;Object.assign(y,R)}});let d=!0;const{drop:D}=(V=n.eventListeners)==null?void 0:V.event;D&&(d=await D({e:i,event:{...y,start:b,end:w,schedule:~~g},overlaps:y.getOverlappingEvents({start:b,end:w,schedule:~~g}),cell:u,external:U.fromVueCal!==Y})),d!==!1&&j(d),u.highlighted=!1,u.highlightedSchedule=null,_e=!1,U.toVueCal=Y,P("event-dropped",{e:i,cell:u,event:y,originalEvent:c,external:U.fromVueCal!==Y})}}}const be=(o,n)=>{let _,A,P,Y={},x={};const m=le(o),z=()=>{m.value.today||(m.value=n),Date.prototype.addDays=function(e){return I(this,e||0)},Date.prototype.subtractDays=function(e){return G(this,e||0)},Date.prototype.addHours=function(e){return t(this,e||0)},Date.prototype.subtractHours=function(e){return v(this,e||0)},Date.prototype.addMinutes=function(e){return i(this,e||0)},Date.prototype.subtractMinutes=function(e){return u(this,e||0)},Date.prototype.getWeek=function(){return c(this)},Date.prototype.isToday=function(){return y(this)},Date.prototype.isLeapYear=function(){return g(this)},Date.prototype.format=function(e="YYYY-MM-DD"){return $(this,e)},Date.prototype.formatTime=function(e="HH:mm"){return R(this,e)}},W=()=>{delete Date.prototype.addDays,delete Date.prototype.subtractDays,delete Date.prototype.addHours,delete Date.prototype.subtractHours,delete Date.prototype.addMinutes,delete Date.prototype.subtractMinutes,delete Date.prototype.getWeek,delete Date.prototype.isToday,delete Date.prototype.isLeapYear,delete Date.prototype.format,delete Date.prototype.formatTime},L=e=>{m.value=e,Date.prototype.subtractDays&&z()},O=()=>(A!==new Date().getDate()&&(_=new Date,A=_.getDate(),P=`${_.getFullYear()}-${_.getMonth()}-${_.getDate()}`),P),I=(e,l)=>{const s=new Date(e.valueOf());return s.setDate(s.getDate()+l),s},G=(e,l)=>{const s=new Date(e.valueOf());return s.setDate(s.getDate()-l),s},t=(e,l)=>{const s=new Date(e.valueOf());return s.setHours(s.getHours()+l),s},v=(e,l)=>{const s=new Date(e.valueOf());return s.setHours(s.getHours()-l),s},i=(e,l)=>{const s=new Date(e.valueOf());return s.setMinutes(s.getMinutes()+l),s},u=(e,l)=>{const s=new Date(e.valueOf());return s.setMinutes(s.getMinutes()-l),s},f=(e,l)=>{const s=M=>{const S=M%l;return S!==0&&(M+=S>=l/2?l-S:-S),M};if(typeof e=="number")return s(e);if(e instanceof Date){let M=s(e.getMinutes());M>=60&&(e.setHours(e.getHours()+1),M=0),e.setMinutes(M,0,0)}},c=(e,l=!1)=>{const s=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())),M=s.getUTCDay()||7;s.setUTCDate(s.getUTCDate()+4-M);const S=new Date(Date.UTC(s.getUTCFullYear(),0,1));return Math.ceil(((s-S)/864e5+1)/7)+(l?1:0)},y=e=>`${e.getFullYear()}-${e.getMonth()}-${e.getDate()}`===O(),b=(e,l)=>{if(!e||!l)return console.warn(`Vue Cal: missing date${e?"2":"1"} parameter for comparison with \`isSameDate(date1, date2)\`.`);if(V(e)){if(!V(l))return console.warn(`Vue Cal: invalid date2 provided for comparison with \`isSameDate(date1, date2)\`: \`${l}\`.`)}else return console.warn(`Vue Cal: invalid date1 provided for comparison with \`isSameDate(date1, date2)\`: \`${e}\`.`);return e.getFullYear()===l.getFullYear()&&e.getMonth()===l.getMonth()&&e.getDate()===l.getDate()},w=(e,l,s)=>V(e)?e.getTime()>=l&&e.getTime()<=s:console.warn(`Vue Cal: invalid date provided to \`isInRange(date, rangeStart, rangeEnd)\`: \`${e}\`.`),g=e=>{const l=e.getFullYear();return!(l%400)||l%100&&!(l%4)},j=(e=null,l)=>{const s=e&&new Date(e.valueOf())||new Date,M=l?7:6;return s.setDate(s.getDate()-(s.getDay()+M)%7),s},d=e=>e instanceof Date?e:(e.length===10&&(e+=" 00:00"),new Date(e.replace(/-/g,"/"))),D=e=>e.getHours()*60+e.getMinutes(),h=(e,l)=>{typeof e=="string"&&(e=e.replace(/-/g,"/")),typeof l=="string"&&(l=l.replace(/-/g,"/")),e=new Date(e).setHours(0,0,0,0),l=new Date(l).setHours(0,0,1,0);const s=(new Date(l).getTimezoneOffset()-new Date(e).getTimezoneOffset())*60*1e3;return Math.ceil((l-e-s)/(24*3600*1e3))},a=(e,l,s)=>Math.abs(e.getTime()-l.getTime())<=s*60*1e3,V=e=>e&&e instanceof Date&&!isNaN(e),$=(e,l="YYYY-MM-DD",s=null)=>{if(s||(s=m.value),l||(l="YYYY-MM-DD"),l==="YYYY-MM-DD")return B(e);Y={},x={};const M={YYYY:()=>F(e,s).YYYY,YY:()=>F(e,s).YY(),M:()=>F(e,s).M,MM:()=>F(e,s).MM(),MMM:()=>F(e,s).MMM(),MMMM:()=>F(e,s).MMMM(),MMMMG:()=>F(e,s).MMMMG(),D:()=>F(e,s).D,DD:()=>F(e,s).DD(),S:()=>F(e,s).S(),d:()=>F(e,s).d,dd:()=>F(e,s).dd(),ddd:()=>F(e,s).ddd(),dddd:()=>F(e,s).dddd(),HH:()=>N(e,s).HH,H:()=>N(e,s).H,hh:()=>N(e,s).hh,h:()=>N(e,s).h,am:()=>N(e,s).am,AM:()=>N(e,s).AM,mm:()=>N(e,s).mm,m:()=>N(e,s).m,s:()=>N(e,s).s};return l.replace(/(\{[a-zA-Z]+\}|[a-zA-Z]+)/g,(S,Q)=>{const H=M[Q.replace(/\{|\}/g,"")];return H!==void 0?H():Q})},B=e=>{const l=e.getMonth()+1,s=e.getDate();return`${e.getFullYear()}-${l<10?"0":""}${l}-${s<10?"0":""}${s}`},R=(e,l="HH:mm",s=null,M=!1)=>{let S=!1;if(M){const[me,ie,ue]=[e.getHours(),e.getMinutes(),e.getSeconds()];me+ie+ue===141&&(S=!0)}if(e instanceof Date&&l==="HH:mm")return S?"24:00":re(e);x={},s||(s=m.value);const Q=N(e,s),H=l.replace(/(\{[a-zA-Z]+\}|[a-zA-Z]+)/g,(me,ie)=>{const ue=Q[ie.replace(/\{|\}/g,"")];return ue!==void 0?ue:ie});return S?H.replace("23:59","24:00"):H},re=e=>{const l=e.getHours(),s=e.getMinutes();return`${(l<10?"0":"")+l}:${(s<10?"0":"")+s}`},ee=e=>{const l=Math.floor(e/60).toString().padStart(2,0),s=(e%60).toString().padStart(2,0);return`${l}:${s}`},te=e=>{if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},F=(e,l)=>{if(Y.D)return Y;const s=e.getFullYear(),M=e.getMonth()+1,S=e.getDate(),H=(e.getDay()-1+7)%7;return Y={YYYY:s,YY:()=>s.toString().substring(2),M,MM:()=>M.toString().padStart(2,0),MMM:()=>l.months[M-1].substring(0,3),MMMM:()=>l.months[M-1],MMMMG:()=>(l.monthsGenitive||l.months)[M-1],D:S,DD:()=>S.toString().padStart(2,0),S:()=>te(S),d:H+1,dd:()=>l.weekDaysShort.length?l.weekDaysShort[H]:l.weekDays[H][0],ddd:()=>l.weekDaysShort.length?l.weekDaysShort[H]:l.weekDays[H].substr(0,3),dddd:()=>l.weekDays[H]},Y},N=(e,l)=>{if(x.am)return x;let s,M,S;e instanceof Date?(s=e.getHours(),M=e.getMinutes(),S=e.getSeconds()):(s=Math.floor(e/60),M=Math.floor(e%60));const Q=s%12?s%12:12,H=(l||{am:"am",pm:"pm"})[s===24||s<12?"am":"pm"];return x={H:s,h:Q,HH:s.toString().padStart(2,0),hh:Q.toString().padStart(2,0),am:H,AM:H.toUpperCase(),m:M,mm:M.toString().padStart(2,0),s:S},x};return{addDatePrototypes:z,removeDatePrototypes:W,updateTexts:L,addDays:I,subtractDays:G,addHours:t,subtractHours:v,addMinutes:i,subtractMinutes:u,snapToInterval:f,getWeek:c,isToday:y,isSameDate:b,isInRange:w,isLeapYear:g,getPreviousFirstDayOfWeek:j,stringToDate:d,dateToMinutes:D,countDays:h,datesInSameTimeStep:a,isValid:V,formatDate:$,formatDateLite:B,formatTime:R,formatTimeLite:re,formatMinutes:ee}},Qe=o=>{const{dateUtils:n,config:_}=o;let A=0;const P=E(()=>{const t={byYear:{},byDate:{},recurring:[],multiday:[],byId:{}},v=_.events.sort((i,u)=>i.start-u.start<0?-1:1);for(const i of v)if(Y(i),x(i),t.byId[i._.id]=i,i.recurring)t.recurring.push(i._.id);else if(i._.multiday)t.multiday.push(i._.id),t.byDate[i._.startFormatted]||(t.byDate[i._.startFormatted]=[]),t.byDate[i._.startFormatted].push(i._.id);else{t.byDate[i._.startFormatted]||(t.byDate[i._.startFormatted]=[]),t.byDate[i._.startFormatted].push(i._.id);const u=i._.startFormatted.substring(0,4),f=i._.startFormatted.substring(5,7),c=i._.startFormatted.substring(8,10);t.byYear[u]||(t.byYear[u]={}),t.byYear[u][f]||(t.byYear[u][f]={}),t.byYear[u][f][c]||(t.byYear[u][f][c]=[]),t.byYear[u][f][c].push(i._.id)}return t}),Y=t=>{if(typeof t.start=="string"&&(t.start=n.stringToDate(t.start)),typeof t.end=="string"&&(t.end=n.stringToDate(t.end)),t.start.setSeconds(0,0),t.end.getSeconds()>=59?t.end.setMinutes(60,0,0):t.end.setSeconds(0,0),isNaN(t.start)||isNaN(t.end)||t.end.getTime()<t.start.getTime()){isNaN(t.start)?console.error(`Vue Cal: invalid start date for event "${t.title}".`,t.start):isNaN(t.end)?console.error(`Vue Cal: invalid end date for event "${t.title}".`,t.end):console.error(`Vue Cal: invalid event dates for event "${t.title}". The event ends before it starts.`,t.start,t.end);return}t._||(t._={}),t._.multiday=!n.isSameDate(t.start,new Date(t.end.getTime()-1)),t._.startFormatted=n.formatDate(t.start),t._.startMinutes=~~n.dateToMinutes(t.start),t._.endMinutes=~~n.dateToMinutes(t.end);const v=t.start.getHours(),i=t.start.getMinutes().toString().padStart(2,0),u=t.end.getHours(),f=t.end.getMinutes().toString().padStart(2,0);t._.startTimeFormatted24=`${v.toString().padStart(2,0)}:${i}`,t._.startTimeFormatted12=`${v%12||12}${i?`:${i}`:""} ${v<12?"AM":"PM"}`,t._.endTimeFormatted24=`${u.toString().padStart(2,0)}:${f}`,t._.endTimeFormatted12=`${u%12||12}${f?`:${f}`:""} ${u<12?"AM":"PM"}`,t._.duration=Math.abs(~~((t.end-t.start)/6e4))},x=t=>{t._||(t._={}),t._.id=t._.id||++A,t.delete||(t.delete=v=>L(t._.id,v)),t._.deleting=!1,t._.deleted=!1,t.isOverlapping=(v=null)=>t.getOverlappingEvents(v).length,t.getOverlappingEvents=(v=null)=>{var i;return I((v==null?void 0:v.start)||t.start,(v==null?void 0:v.end)||t.end,{excludeIds:[t._.id],schedule:(i=_.schedules)!=null&&i.length?~~((v==null?void 0:v.schedule)||t.schedule):null})},t._.register=v=>{t._.$el=v,t._.fireCreated&&(o.emit("event-created",t),delete t._.fireCreated)},t._.unregister=()=>{t._.$el=null,t._.register=null,t.isOverlapping=null,t.getOverlappingEvents=null,t.delete=null}},m=t=>P.value.byId[t],z=t=>{const v=[];for(const{start:i,end:u}of t){const f=I(i,u);f.length&&v.push(...f)}return v},W=t=>{if(!t.start||!t.end){console.error("Vue Cal: Cannot create an event without valid start and end dates.");return}return _.snapToInterval&&(n.snapToInterval(t.start,_.snapToInterval),n.snapToInterval(t.end,_.snapToInterval)),t={...t},t._||(t._={}),t._.id=++A,t._.fireCreated=!0,_.events.push(t),t},L=async(t,v=0)=>{var y,b;if(!t)return console.warn("Vue Cal: Cannot delete event without its ID or criteria.");let i=typeof t=="string"||!isNaN(t)?t:null;const u=typeof t=="object"?Object.entries(t):null;if(u){const[w,g]=u[0];i=(y=_.events.find(j=>j[w]===g))==null?void 0:y._.id}if(!_.editableEvents.delete)return console.info("Vue Cal: Event deletion is disabled. Enable it with the `editable-events` props.");if(!i)return console.warn("Vue Cal: Cannot delete event without its ID.");const f=_.events.findIndex(w=>w._.id===i);if(f===-1)return console.warn(`Vue Cal: Cannot delete unknown event \`${i}\`.`);const c=_.events[f];if(c.deletable===!1)return console.warn(`Vue Cal: Can't delete event \`${i}\` since it was explicitely set to \`delete: false\`.`);switch(v){case 0:c._.deleting?_.events.splice(f,1):c._.deleting=!0;break;case 1:c._.deleting=!0;break;case 2:c._.deleted=!0,_.events[f]._.deleted=!0,(b=c._.$el)==null||b.dispatchEvent(new CustomEvent("event-deleted",{detail:c._.id}));break;case 3:_.events.splice(f,1),o.emit("update:events",_.events),o.emit("event-delete",c);break}return!0},O=(t,v)=>{const i=_.allDayEvents?{allDay:!0}:{},u=I(t,v,{background:!1,...i});if(!u.length)return{cellOverlaps:{},longestStreak:0};const f={};let c=[],y=0;u.sort((b,w)=>b.start-w.start||b.end-b.start-(w.end-w.start));for(const b of u){const w=b._.id;f[w]||(f[w]={overlaps:new Set,maxConcurrent:1,position:0}),c=c.filter(h=>h.end>b.start);const g=c.filter(h=>{var V;return(!((V=_.schedules)!=null&&V.length)||b.schedule===h.schedule)&&h.start<b.end}),j=new Set(g.map(h=>{var a;return((a=f[h._.id])==null?void 0:a.position)??0}));let d=0;for(;j.has(d);)d++;f[w].position=d,c.push(b);const D=Math.max(1,...g.map(h=>{var a;return((a=f[h._.id])==null?void 0:a.maxConcurrent)??1}));f[w].maxConcurrent=Math.max(g.length+1,D);for(const h of g)f[h._.id].overlaps.add(w),f[w].overlaps.add(h._.id),f[h._.id].maxConcurrent=f[w].maxConcurrent;y=Math.max(y,f[w].maxConcurrent)}for(const b in f)f[b].overlaps=[...f[b].overlaps];return{cellOverlaps:f,longestStreak:y}},I=(t,v,{excludeIds:i=[],schedule:u=null,background:f=!0,allDay:c=!1}={})=>{const y=t.getFullYear(),b=v.getFullYear(),w=t.getMonth()+1,g=v.getMonth()+1,j=t.getDate(),d=v.getDate(),D=t.getTime(),h=v.getTime(),a=[],V=new Set(i);for(let $=y;$<=b;$++){const B=`${$}`,R=P.value.byYear[B];if(!R)continue;const re=$===y?w:1,ee=$===b?g:12;for(let te=re;te<=ee;te++){const F=String(te).padStart(2,"0"),N=R[F];if(N)for(const e in N){const l=+e;if($===y&&te===w&&l<j||$===b&&te===g&&l>d)continue;const s=N[e];for(let M=0;M<s.length;M++){const S=P.value.byId[s[M]];!S||V.has(S._.id)||u!==null&&u!==S.schedule||f===!1&&S.background||_.allDayEvents&&(c&&!S.allDay||!c&&S.allDay)||S.end.getTime()>D&&S.start.getTime()<h&&a.push(S)}}}}return a};return{events:P,getEvent:m,getViewEvents:z,getCellOverlappingEvents:O,getEventsInRange:I,createEvent:W,deleteEvent:L,isEventInRange:(t,v,i)=>{const u=t.allDay||!_.time,f=u?new Date(t.start).setHours(0,0,0,0):t.start.getTime(),c=u?new Date(t.end).setHours(23,59,59,999):t.end.getTime(),y=u?new Date(v).setHours(0,0,0,0):v.getTime(),b=u?new Date(i).setHours(23,59,59,999):i.getTime();return c>y&&f<b}}},Xe=({config:o,dateUtils:n,emit:_,texts:A,eventsManager:P},Y)=>{const{availableViews:x}=o,m=le(o.view&&x[o.view]?o.view:o.defaultView),z=le(o.selectedDate||null),W=le(new Date),L=le(new Date(o.viewDate||W.value));L.value.setHours(0,0,0,0);const O=le(new Date(L));let I=null;const G=E(()=>m.value==="month"?O.value:g.value),t=E(()=>m.value==="month"?new Date(O.value.getFullYear(),O.value.getMonth()+1,0,23,59,59,999):d.value),v=E(()=>m.value==="week"?n.getPreviousFirstDayOfWeek(g.value,o.startWeekOnSunday):m.value==="month"?g.value:G.value),i=E(()=>{if(m.value==="week"){const r=n.addDays(v.value,7);return r.setMilliseconds(-1),r}return m.value==="month"?d.value:t.value}),u=E(()=>{const r=W.value.getTime();if(m.value==="week")return v.value.getTime()<=r&&r<=i.value.getTime();const T=g.value.getTime(),C=d.value.getTime();return T<=r&&r<=C});function f(){W.value=new Date,I=setTimeout(f,60*1e3)}function c(){I=setTimeout(f,(60-new Date().getSeconds())*1e3),f()}const y=E(()=>{if(!o.availableViews[m.value])return 1;let r=o.availableViews[m.value].cols;return o.hasHiddenDays&&["week","month"].includes(m.value)&&(r-=o.hasHiddenDays),r}),b=E(()=>{var r;return((r=o.availableViews[m.value])==null?void 0:r.rows)||1}),w=E(()=>y.value*b.value),g=E(()=>{if(m.value==="month"){let r=O.value.getDay()||7;return o.startWeekOnSunday&&!o.hideWeekdays[7]&&(r+=1),o.viewDayOffset&&(r-=o.viewDayOffset),n.subtractDays(O.value,r-1)}if(m.value==="week"){const r="1234567".split("").filter(C=>!Object.keys(o.hideWeekdays).includes(C));let T=Math.min(...r);return o.startWeekOnSunday&&!o.hideWeekdays[7]&&(T=1),o.viewDayOffset&&(T+=o.viewDayOffset),n.addDays(O.value,T-1)}return O.value}),j=E(()=>{const r=[],T=["days","week","month"].includes(m.value);let C=0;for(let k=0;k<w.value+C;k++)switch(m.value){case"day":case"days":case"week":case"month":{const J=n.addDays(g.value,k),De=J.getDay()||7;if(T&&o.hasHiddenDays&&o.hideWeekdays[De]){C++;continue}const oe=new Date(J);oe.setHours(23,59,59,999),r.push({start:J,startFormatted:n.formatDate(J),end:oe});break}case"year":r.push({start:new Date(g.value.getFullYear(),k,1,0,0,0,0),end:new Date(g.value.getFullYear(),k+1,0,23,59,59,999)});break;case"years":r.push({start:new Date(g.value.getFullYear()+k,0,1,0,0,0,0),end:new Date(g.value.getFullYear()+k+1,0,0,23,59,59,999)});break}return r}),d=E(()=>j.value[j.value.length-1].end),D=le("right"),h=E(()=>{const r=Object.keys(o.availableViews);return r[r.indexOf(m.value)+1]}),a=E(()=>{const r=Object.keys(o.availableViews);return r[r.indexOf(m.value)-1]});function V(r,T,C=!1){if(!T||!T[r])return r+1;const k=T[r];return C&&typeof k=="string"?k.substring(0,3):k}function $(r,T,C){const{monthsArray:k,monthBeforeDay:J,canTruncate:De,xs:oe}=C,ae=r.getMonth(),ne=r.getFullYear(),se=T.getMonth(),de=T.getFullYear(),ge=ae!==se,xe=ne!==de,X=De&&(oe||ge),ce=r.getDate(),fe=T.getDate();return xe?J?`${V(ae,k,X)} ${ce}, ${ne} - ${V(se,k,X)} ${fe}, ${de}`:`${ce} ${V(ae,k,X)} ${ne} - ${fe} ${V(se,k,X)} ${de}`:ge?J?`${V(ae,k,X)} ${ce} - ${V(se,k,X)} ${fe}, ${ne}`:`${ce} ${V(ae,k,X)} - ${fe} ${V(se,k,X)} ${ne}`:J?`${V(ae,k,X)} ${ce}-${fe}, ${ne}`:`${ce}-${fe} ${V(ae,k,X)} ${ne}`}const B=E(()=>{const{dateFormat:r,months:T,monthsGenitive:C,week:k,truncations:J}=A,De=o.locale,oe=J!==!1,ae=r.indexOf("M")<r.indexOf("D"),ne=C&&De==="el"?C:T;switch(m.value){case"day":return n.formatDate(g.value,r);case"days":case"week":{const se={monthsArray:ne,monthBeforeDay:ae,canTruncate:oe,xs:o.xs};let de=$(g.value,d.value,se);if(m.value==="week"){const ge=n.getWeek(g.value,o.startWeekOnSunday&&!o.hideWeekdays[7]);de+=` <small>${k} ${ge}</small>`}return de}case"month":{const se=`${o.xs&&oe?"MMM":"MMMM"} YYYY`;return n.formatDate(G.value,se)}case"year":return g.value.getFullYear();case"years":return`${g.value.getFullYear()} - ${t.value.getFullYear()}`}});function R(){switch(O.value=new Date(L.value||W.value),O.value.setHours(0,0,0,0),m.value){case"day":break;case"days":break;case"week":O.value=n.getPreviousFirstDayOfWeek(O.value,o.startWeekOnSunday&&!o.hideWeekdays[7]);break;case"month":O.value=new Date(O.value.getFullYear(),O.value.getMonth(),1,0,0,0,0);break;case"year":O.value=new Date(O.value.getFullYear(),0,1,0,0,0,0);break;case"years":O.value=new Date(O.value.getFullYear()-O.value.getFullYear()%w.value,0,1,0,0,0,0);break}o.ready&&_("view-change",{id:m.value,title:B.value,start:G.value,end:t.value,extendedStart:v.value,extendedEnd:i.value,cellDates:j.value,containsToday:u.value,events:Te.value}),W.value=new Date}function re(r){const T=m.value,C=o.availableViews[T];r[T]&&JSON.stringify(r[T])===JSON.stringify(C)||R()}function ee(r,T=!0){const C=Object.keys(o.availableViews);m.value!==r&&(C.includes(r)?(D.value=C.indexOf(r)<C.indexOf(m.value)?"left":"right",m.value=r,_("update:view",r),R()):console.warn(`Vue Cal: the \`${r}\` view is not available.`))}function te(){h.value?ee(h.value):console.warn("Vue Cal: no broader view is available.")}function F(){a.value?ee(a.value):console.warn("Vue Cal: no narrower view is available.")}function N(){l(!1)}function e(){l(!0)}function l(r=!0){let T=new Date(L.value);switch(m.value){case"day":case"days":r?T=n.addDays(d.value,1):T=n.subtractDays(g.value,w.value);break;case"week":{r?(T=n.addDays(i.value,1),T.setHours(0,0,0,0)):T=n.subtractDays(v.value,w.value);break}case"month":{const C=r?1:-1;T=new Date(T.getFullYear(),T.getMonth()+C,1,0,0,0,0);break}case"year":{const C=r?1:-1;T=new Date(T.getFullYear()+C,1,1,0,0,0,0);break}case"years":{const C=r?w.value:-w.value;T=new Date(T.getFullYear()+C,1,1,0,0,0,0);break}}M(T)}function s(){const r=new Date;r.setHours(0,0,0,0),M(r)}function M(r,T=!0,C=!1){if(!n.isValid(r))return console.warn("Vue Cal: can't navigate to the given date: invalid date provided to `updateViewDate(date)`.");let[k,J]=[g.value,d.value];m.value==="month"&&([k,J]=[G.value,t.value]),(!n.isInRange(r,k,J)||C)&&(r.setHours(0,0,0,0),D.value=r.getTime()<k.getTime()?"left":"right",L.value=r,T&&_("update:viewDate",r),R())}function S(r,T=!0){if(!n.isValid(r))return console.warn("Vue Cal: can't update the selected date: invalid date provided to `updateSelectedDate(date)`.");const{isValid:C,isSameDate:k}=n;(!z.value||!C(z.value)||!k(r,z.value))&&(r.setHours(0,0,0,0),z.value=r,T&&_("update:selectedDate",r))}function Q(r){!r&&!O.value.getDay()?M(n.addDays(O.value,1),!0,!0):(D.value="left",R())}function H(r){r&&o.startWeekOnSunday&&!O.value.getDay()?M(n.addDays(O.value,1),!0,!0):!r&&o.startWeekOnSunday&&O.value.getDay()===1&&M(n.subtractDays(O.value,1),!0,!0)}function me(){console.log("toggling weekdays",o.hideWeekdays)}function ie(r){var k;const T=(k=Y.value)==null?void 0:k.querySelector(".vuecal__scrollable"),C=r?r*o.timeCellHeight/o.timeStep:0;T==null||T.scrollTo({top:C,behavior:"smooth"})}function ue(){const r=new Date;ie(r.getHours()*60+r.getMinutes())}function He(){ie(0)}const Te=E(()=>P.getViewEvents(j.value)),We=P.createEvent,Ne=P.deleteEvent;return Z(()=>o.view,r=>ee(r,!1)),Z(()=>o.availableViews,re),Z(()=>o.datePicker,()=>ee("month",!1)),Z(()=>o.viewDate,r=>M(r,!1)),Z(()=>o.selectedDate,r=>S(r,!1)),Z(()=>o.startWeekOnSunday,r=>Q(r)),Z(()=>o.hideWeekends,r=>H(r)),Z(()=>o.hideWeekdays,me),Z(()=>w.value,()=>{w.value>90&&console.warn("Vue Cal: high cell count detected. Performance may degrade when interactions are enabled.")}),Z(()=>o.watchRealTime,r=>{r&&o.time?c():I=clearTimeout(I)}),R(),o.time&&o.watchRealTime&&c(),Be(()=>I=clearTimeout(I)),{now:W,id:m,broaderView:h,narrowerView:a,title:B,viewDate:L,start:G,end:t,extendedStart:v,extendedEnd:i,firstCellDate:g,lastCellDate:d,containsToday:u,selectedDate:z,cellDates:j,cols:y,rows:b,events:Te,transitionDirection:D,switch:ee,broader:te,narrower:F,previous:N,next:e,navigate:l,goToToday:s,updateViewDate:M,updateSelectedDate:S,scrollToCurrentTime:ue,scrollToTime:ie,scrollTop:He,createEvent:We,deleteEvent:Ne,get isDay(){return m.value==="day"},get isDays(){return m.value==="days"},get isWeek(){return m.value==="week"},get isMonth(){return m.value==="month"},get isYear(){return m.value==="year"},get isYears(){return m.value==="years"}}},Me=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],Ee=["January","February","March","April","May","June","July","August","September","October","November","December"],Ve="Years",ke="Year",Oe="Month",Ye="Week",Se="Days",Ce="Day",$e="Today",je="No Event",Ie="All-day",Ae="Delete",Pe="Create an event",Fe="dddd, MMMM D, YYYY",Le="am",Re="pm",we={weekDays:Me,months:Ee,years:Ve,year:ke,month:Oe,week:Ye,days:Se,day:Ce,today:$e,noEvent:je,allDay:Ie,deleteEvent:Ae,createEvent:Pe,dateFormat:Fe,am:Le,pm:Re},et=Object.freeze(Object.defineProperty({__proto__:null,allDay:Ie,am:Le,createEvent:Pe,dateFormat:Fe,day:Ce,days:Se,default:we,deleteEvent:Ae,month:Oe,months:Ee,noEvent:je,pm:Re,today:$e,week:Ye,weekDays:Me,year:ke,years:Ve},Symbol.toStringTag,{value:"Module"})),ye=ve({texts:{...q.texts},dateUtils:be(q.texts,we)}),st=({props:o,emit:n,attrs:_,vuecalEl:A,uid:P})=>{const Y=ve({uid:P,emit:n,texts:{...ye.texts},dateUtils:{...ye.dateUtils},now:new Date,config:{},eventsManager:{},view:{},dnd:{},touch:{isDraggingCell:!1,isDraggingEvent:!1,isResizingEvent:!1}});return Y.dateUtils=be(Object.assign(q.texts,Y.texts),we),Y.config=Ze(Y,o,_),Y.eventsManager=Qe(Y),Y.view=Xe(Y,A),Y.dnd=Ue(Y),Y},{addDatePrototypes:rt,removeDatePrototypes:it,updateTexts:ot,addDays:lt,subtractDays:ut,addHours:dt,subtractHours:ct,addMinutes:ft,subtractMinutes:vt,getWeek:Dt,isToday:mt,isSameDate:gt,isInRange:ht,isLeapYear:_t,getPreviousFirstDayOfWeek:yt,stringToDate:wt,dateToMinutes:Tt,countDays:pt,datesInSameTimeStep:bt,isValid:Mt,formatDate:Et,formatDateLite:Vt,formatTime:kt,formatTimeLite:Ot,formatMinutes:Yt}=ye.dateUtils;export{lt as a,rt as b,pt as c,at as d,Ke as e,Et as f,nt as m,qe as p,wt as s,st as u,Je as w};
