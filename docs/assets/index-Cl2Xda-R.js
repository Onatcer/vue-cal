import{c as E,x as ce,D as J,U as ke,V as h,r as se,N as Oe}from"./index-BgaOkLT3.js";const z={texts:{weekDays:Array(7).fill(""),weekDaysShort:[],months:Array(12).fill(""),years:"",year:"",month:"",week:"",day:"",today:"",noEvent:"",allDay:"",deleteEvent:"",createEvent:"",dateFormat:"dddd MMMM D, YYYY",am:"am",pm:"pm",truncations:!0},availableViews:{day:{cols:1,rows:1},days:{cols:10,rows:1},week:{cols:7,rows:1},month:{cols:7,rows:6},year:{cols:4,rows:3},years:{cols:5,rows:5}}},He=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"],Se=["sun","mon","tue","wed","thu","fri","sat"],Ye=Se.reduce((u,n,v)=>(u[n]=v||7,u),{}),$e=(u,n,v)=>{const{dateUtils:Y}=u,j=!1,b=E(()=>{if($.value[n.view])return n.view;{const d=n.datePicker?"month":"week",c=n.view||d;return $.value[c]?c:(console.warn(`Vue Cal: the provided or default view \`${c}\` is either invalid or not in the list of available views. The first available view will be chosen: \`${Object.keys($.value)[0]}\`.`),Object.keys($.value)[0])}}),W=E(()=>n.sm&&!n.xs),m=E(()=>n.xs||n.datePicker),x=E(()=>n.clickToNavigate||n.datePicker&&n.clickToNavigate!==!1),L=E(()=>{const d={cell:{},event:{}},c=y=>y.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return Object.entries(v).forEach(([y,a])=>{const[O,C,A]=y.match(/^on(Cell|Event)(.+)$/)||[];O&&(d[C.toLowerCase()][c(A).replace(/^-+|-+$/g,"")]=a)}),d}),I=E(()=>{var c;const d={};return n.hideWeekends&&(d[6]=!0)&&(d[7]=!0),(c=n.hideWeekdays)!=null&&c.length&&n.hideWeekdays.forEach(y=>d[Ye[y]]=!0),d}),T=E(()=>n.hideWeekends||I.value[6]&&I.value[7]),$=E(()=>{const d=n.datePicker;let c=0,y={};const a=n.views;return d&&!a?{month:{...z.availableViews.month},year:{...z.availableViews.year},years:{...z.availableViews.years}}:(a?(Array.isArray(a)?y=a.reduce((O,C)=>(typeof C=="string"&&z.availableViews[C]?O[C]=z.availableViews[C]:c++,O),{}):typeof a=="object"&&(y=Object.entries(a).reduce((O,[C,A])=>{const{cols:R,rows:re}=z.availableViews[C];return O[C]={cols:A.cols||R,rows:A.rows||re},O},{})),c&&console.warn("Vue Cal: the provided `views` prop contains invalid views that will be ignored."),Object.keys(y).length||(console.warn("Vue Cal: No valid view in the provided `views` prop. Falling back to default views."),y={...z.availableViews})):y={...z.availableViews},y)}),F=E(()=>n.datePicker?"month":$.value.week?"week":Object.keys($.value)[0]),s=E(()=>{if(typeof n.selectedDate=="string")return Y.stringToDate(n.selectedDate);if(n.selectedDate instanceof Date)return n.selectedDate;n.selectedDate?console.warn("Vue Cal: The provided selected date is invalid:",n.selectedDate):console.log("Vue Cal: Info - The provided selected date is undefined.")}),w=E(()=>{if(!n.disableDays)return[];const d=[];return Array.isArray(n.disableDays)?n.disableDays.forEach(c=>{let y=c;if(typeof c=="string"?y=Y.stringToDate(c):c instanceof Date&&(c=Y.formatDate(c,"YYYY-MM-DD")),y instanceof Date&&!isNaN(y.getTime())){d.push(c);return}else console.warn("Vue Cal: The provided `disableDays` prop contains an invalid date:",c)}):console.warn("Vue Cal: The provided `disableDays` prop is invalid:",n.disableDays),d}),t=E(()=>{let d=null;return n.minDate&&typeof n.minDate=="string"?d=Y.stringToDate(n.minDate):n.minDate&&n.minDate instanceof Date&&(d=n.minDate),(d==null?void 0:d.getTime())||null}),r=E(()=>{let d=null;return n.maxDate&&typeof n.maxDate=="string"?d=Y.stringToDate(n.maxDate):n.maxDate&&n.maxDate instanceof Date&&(d=n.maxDate),(d==null?void 0:d.getTime())||null}),D=E(()=>{var y;const{view:d}=u;return n.schedules.length&&(d.isDay||d.isDays||d.isWeek)&&((y=n.schedules)==null?void 0:y.map((a,O)=>({...a,id:a.id??O+1})))||void 0}),f=E(()=>{const d={drag:!0,resize:!0,delete:!0,create:!0};return n.editableEvents===!0?d:n.editableEvents===!1?Object.keys(d).map(c=>d[c]=!1):{...d,...n.editableEvents}}),_=async d=>{var y;let c=Object.assign({"../i18n/ar.json":()=>h(()=>import("./ar-BYzjjpsv.js"),[]).then(a=>a.default),"../i18n/bg.json":()=>h(()=>import("./bg-DMHwWaHq.js"),[]).then(a=>a.default),"../i18n/bn.json":()=>h(()=>import("./bn-BMHg_6Cc.js"),[]).then(a=>a.default),"../i18n/bs.json":()=>h(()=>import("./bs-BQ6MYvQz.js"),[]).then(a=>a.default),"../i18n/ca.json":()=>h(()=>import("./ca-RJZ1kJCp.js"),[]).then(a=>a.default),"../i18n/cs.json":()=>h(()=>import("./cs-DUR8CfDR.js"),[]).then(a=>a.default),"../i18n/da.json":()=>h(()=>import("./da-C24v82sE.js"),[]).then(a=>a.default),"../i18n/de.json":()=>h(()=>import("./de-BdfGCsIh.js"),[]).then(a=>a.default),"../i18n/el.json":()=>h(()=>import("./el-BbeSS82J.js"),[]).then(a=>a.default),"../i18n/en-gb.json":()=>h(()=>import("./en-gb-CdanBkea.js"),[]).then(a=>a.default),"../i18n/en-us.json":()=>h(()=>import("./en-us-DGsNxWQW.js"),[]).then(a=>a.default),"../i18n/es.json":()=>h(()=>import("./es-BAvNIXnQ.js"),[]).then(a=>a.default),"../i18n/et.json":()=>h(()=>import("./et-BB2GC4z2.js"),[]).then(a=>a.default),"../i18n/fa.json":()=>h(()=>import("./fa-CLNQrKiD.js"),[]).then(a=>a.default),"../i18n/fi.json":()=>h(()=>import("./fi-C3bvOL2F.js"),[]).then(a=>a.default),"../i18n/fr.json":()=>h(()=>import("./fr-GKuwB6u6.js"),[]).then(a=>a.default),"../i18n/he.json":()=>h(()=>import("./he-dgw3ddFB.js"),[]).then(a=>a.default),"../i18n/hr.json":()=>h(()=>import("./hr-H7xnaszL.js"),[]).then(a=>a.default),"../i18n/hu.json":()=>h(()=>import("./hu-D5PQi6ht.js"),[]).then(a=>a.default),"../i18n/id.json":()=>h(()=>import("./id-C4V9iQKh.js"),[]).then(a=>a.default),"../i18n/is.json":()=>h(()=>import("./is-B36p4HLL.js"),[]).then(a=>a.default),"../i18n/it.json":()=>h(()=>import("./it-BYE8Pv4L.js"),[]).then(a=>a.default),"../i18n/ja.json":()=>h(()=>import("./ja-C_20UUx6.js"),[]).then(a=>a.default),"../i18n/ka.json":()=>h(()=>import("./ka-CNxn4HrL.js"),[]).then(a=>a.default),"../i18n/ko.json":()=>h(()=>import("./ko-C66lSvgy.js"),[]).then(a=>a.default),"../i18n/lt.json":()=>h(()=>import("./lt-CSQtJejA.js"),[]).then(a=>a.default),"../i18n/mn.json":()=>h(()=>import("./mn-OFyF7cuL.js"),[]).then(a=>a.default),"../i18n/nl.json":()=>h(()=>import("./nl-p6pls65L.js"),[]).then(a=>a.default),"../i18n/no.json":()=>h(()=>import("./no-ukJhddl5.js"),[]).then(a=>a.default),"../i18n/pl.json":()=>h(()=>import("./pl-BLhEwn5P.js"),[]).then(a=>a.default),"../i18n/pt-br.json":()=>h(()=>import("./pt-br-Bqj88eex.js"),[]).then(a=>a.default),"../i18n/pt-pt.json":()=>h(()=>import("./pt-pt-Bqj88eex.js"),[]).then(a=>a.default),"../i18n/ro.json":()=>h(()=>import("./ro-DIcQOJbf.js"),[]).then(a=>a.default),"../i18n/ru.json":()=>h(()=>import("./ru-CFk3STll.js"),[]).then(a=>a.default),"../i18n/sk.json":()=>h(()=>import("./sk-BVV3GKLZ.js"),[]).then(a=>a.default),"../i18n/sl.json":()=>h(()=>import("./sl-f5pM865d.js"),[]).then(a=>a.default),"../i18n/sq.json":()=>h(()=>import("./sq-BsCWVll4.js"),[]).then(a=>a.default),"../i18n/sr.json":()=>h(()=>import("./sr-BpAzoY7E.js"),[]).then(a=>a.default),"../i18n/sv.json":()=>h(()=>import("./sv-ifbbDt9U.js"),[]).then(a=>a.default),"../i18n/tr.json":()=>h(()=>import("./tr-CqPh9iY6.js"),[]).then(a=>a.default),"../i18n/uk.json":()=>h(()=>import("./uk-CBcda3hV.js"),[]).then(a=>a.default),"../i18n/vi.json":()=>h(()=>import("./vi-Lfa-VYGA.js"),[]).then(a=>a.default),"../i18n/zh-cn.json":()=>h(()=>import("./zh-cn-CFCd-XoD.js"),[]).then(a=>a.default),"../i18n/zh-hk.json":()=>h(()=>import("./zh-hk-BYHSteah.js"),[]).then(a=>a.default)});{if(!c[`../i18n/${d}.json`]){console.warn(`Vue Cal: the locale \`${d}\` does not exist. Falling back to \`en-us\`.`),d="en-us";return}c=await((y=c[`../i18n/${d}.json`])==null?void 0:y.call(c))}u.texts=Object.assign(u.texts,Object.assign({...z.texts},c)),Y.updateTexts(u.texts)};let V=ce(n.events||[]);return J(()=>n.events,d=>V.splice(0,V.length,...d)),(n.locale||!u.texts.today)&&_(n.locale||"en-us"),{...ke(n),events:V,eventListeners:L,defaultView:F,availableViews:$,disableDays:w,ready:j,sm:W,xs:m,clickToNavigate:x,hideWeekdays:I,hideWeekends:T,minTimestamp:t,maxTimestamp:r,schedules:D,selectedDate:s,editableEvents:f,view:b,get hasHiddenDays(){return Object.keys(I.value).length},get size(){return m.value?"xs":W.value?"sm":"lg"},loadTexts:_}},Re=(u,n)=>{const v=n.timeTo-n.timeFrom;return(u-n.timeFrom)*100/v},Ce=(u,n)=>{const v=n.timeTo-n.timeFrom;return~~(u*v/100+n.timeFrom)},je=(u,n)=>{const v=n.clientHeight;return u*100/v},he=ce({id:null,date:null});let we=!1,_e=!0;const Z=ce({el:null,cell:null,timeout:null}),U=ce({eventId:null,fromVueCal:null,toVueCal:null});function Ie(u){const{config:n,view:v,eventsManager:Y,emit:j,uid:b,dateUtils:W}=u,m=t=>{var c;const{timeStep:r,timeCellHeight:D,timeFrom:f}=n,_=(((c=t.touches)==null?void 0:c[0])||t).clientY,{top:V}=t.currentTarget.getBoundingClientRect(),d=_-V-~~t.dataTransfer.getData("cursor-grab-at");return Ce(je(d,t.currentTarget),n)},x=(t,r,D)=>{const f=r.duration||L(r.start,r.end)||n.timeStep;let _=Math.max(m(t),0);if(n.snapToInterval){const y=_+n.snapToInterval/2;_=y-y%n.snapToInterval}const V=new Date(new Date(D).setMinutes(_)),d=Math.min(_+f,24*60),c=new Date(new Date(D).setMinutes(d));return{start:V,end:c}},L=(t,r)=>Math.round((r-t)/6e4);return{eventDragStart:(t,r)=>{if(t.target.nodeType===3||u.touch.isResizingEvent)return t.preventDefault();t.dataTransfer.dropEffect="move";const D={...r,_:{id:r._.id,duration:L(r.start,r.end)}};t.dataTransfer.setData("event",JSON.stringify(D)),t.dataTransfer.setData("cursor-grab-at",t.offsetY),U.eventId=r._.id,U.fromVueCal=b;const f=t.target.closest(".vuecal__event");f.classList.add("vuecal__event--dragging-ghost"),setTimeout(()=>{f.classList.add("vuecal__event--dragging-original"),f.classList.remove("vuecal__event--dragging-ghost")},0),we=!1,Object.assign(he,{id:v.id,date:v.firstCellDate}),_e=!0,u.touch.isDraggingEvent=!0},eventDragEnd:(t,r)=>{U.eventId=null,t.target.closest(".vuecal__event").classList.remove("vuecal__event--dragging-original");const{fromVueCal:D,toVueCal:f}=U;f&&D!==f&&Y.deleteEvent(r._.id,3),U.fromVueCal=null,U.toVueCal=null,we&&_e&&he.id&&v.switchView(he.id,he.date,!0),u.touch.isDraggingEvent=!1},cellDragEnter:(t,r)=>{const{start:D}=r,f=t.currentTarget;if(!t.currentTarget.contains(t.relatedTarget)){if(f===Z.el||!f.className.includes("vuecal__cell-content"))return!1;Z.el&&(Z.cell.highlighted=!1),Object.assign(Z,{el:f,cell:r,timeout:clearTimeout(Z.timeout)}),r.highlighted=!0,["years","year","month"].includes(v.id)&&(Z.timeout=setTimeout(()=>u.switchToNarrowerView(D),2e3))}},cellDragOver:(t,r)=>{const{start:D,schedule:f}=r;t.preventDefault(),r.highlighted=!0,(f||f===0)&&(r.highlightedSchedule=f)},cellDragLeave:(t,r)=>{t.preventDefault(),!t.currentTarget.contains(t.relatedTarget)&&(r.highlightedSchedule=!1,Z.cell===r&&(clearTimeout(Z.timeout),Object.assign(Z,{el:null,cell:null,timeout:null}),r.highlighted=!1))},cellDragDrop:async(t,r)=>{var O,C,A;t.preventDefault(),clearTimeout(Z.timeout),Object.assign(Z,{el:null,cell:null,timeout:null});const D=JSON.parse(t.dataTransfer.getData("event")||"{}");D.start&&(D.start=new Date(D.start)),D.end&&(D.end=new Date(D.end));let f;const{start:_,end:V}=x(t,D,r.start),{schedule:d}=((O=t.target.closest("[data-schedule]"))==null?void 0:O.dataset)||{};let c=()=>{};U.fromVueCal===b?(f=Y.getEvent(D._.id),f&&(f._.dragging=!1,c=()=>{f.start=_,f.end=V,d!==void 0&&(f.schedule=~~d)})):(f={...D,start:_,end:V,...d!==void 0&&{schedule:~~d},_:{id:((C=D._)==null?void 0:C.id)||D.id,duration:L(_,V)},getOverlappingEvents:()=>Y.getEventsInRange(Y.getEventsByDate(W.formatDate(_),!0),{start:_,end:V},{schedule:~~d})},c=()=>{f=Y.createEvent(f)});let y=!0;const{drop:a}=(A=n.eventListeners)==null?void 0:A.event;a&&(y=await a({e:t,event:{...f,start:_,end:V,schedule:~~d},overlaps:f.getOverlappingEvents({start:_,end:V,schedule:~~d}),cell:r,external:U.fromVueCal!==b})),y!==!1&&c(),r.highlighted=!1,r.highlightedSchedule=null,_e=!1,U.toVueCal=b,j("event-dropped",{e:t,cell:r,event:f,originalEvent:D,external:U.fromVueCal!==b})}}}const Te=u=>{let n,v,Y,j={},b={};const W=se(u),m=()=>{Date.prototype.addDays=function(e){return T(this,e||0)},Date.prototype.subtractDays=function(e){return $(this,e||0)},Date.prototype.addHours=function(e){return F(this,e||0)},Date.prototype.subtractHours=function(e){return s(this,e||0)},Date.prototype.addMinutes=function(e){return w(this,e||0)},Date.prototype.subtractMinutes=function(e){return t(this,e||0)},Date.prototype.getWeek=function(){return D(this)},Date.prototype.isToday=function(){return f(this)},Date.prototype.isLeapYear=function(){return d(this)},Date.prototype.format=function(e="YYYY-MM-DD"){return R(this,e)},Date.prototype.formatTime=function(e="HH:mm"){return fe(this,e)}},x=()=>{delete Date.prototype.addDays,delete Date.prototype.subtractDays,delete Date.prototype.addHours,delete Date.prototype.subtractHours,delete Date.prototype.addMinutes,delete Date.prototype.subtractMinutes,delete Date.prototype.getWeek,delete Date.prototype.isToday,delete Date.prototype.isLeapYear,delete Date.prototype.format,delete Date.prototype.formatTime},L=e=>W.value=e,I=()=>(v!==new Date().getDate()&&(n=new Date,v=n.getDate(),Y=`${n.getFullYear()}-${n.getMonth()}-${n.getDate()}`),Y),T=(e,o)=>{const i=new Date(e.valueOf());return i.setDate(i.getDate()+o),i},$=(e,o)=>{const i=new Date(e.valueOf());return i.setDate(i.getDate()-o),i},F=(e,o)=>{const i=new Date(e.valueOf());return i.setHours(i.getHours()+o),i},s=(e,o)=>{const i=new Date(e.valueOf());return i.setHours(i.getHours()-o),i},w=(e,o)=>{const i=new Date(e.valueOf());return i.setMinutes(i.getMinutes()+o),i},t=(e,o)=>{const i=new Date(e.valueOf());return i.setMinutes(i.getMinutes()-o),i},r=(e,o)=>{const i=k=>{const S=k%o;return S!==0&&(k+=S>=o/2?o-S:-S),k};if(typeof e=="number")return i(e);if(e instanceof Date){let k=i(e.getMinutes());k>=60&&(e.setHours(e.getHours()+1),k=0),e.setMinutes(k,0,0)}},D=(e,o=!1)=>{const i=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())),k=i.getUTCDay()||7;i.setUTCDate(i.getUTCDate()+4-k);const S=new Date(Date.UTC(i.getUTCFullYear(),0,1));return Math.ceil(((i-S)/864e5+1)/7)+(o?1:0)},f=e=>`${e.getFullYear()}-${e.getMonth()}-${e.getDate()}`===I(),_=(e,o)=>{if(!e||!o)return console.warn(`Vue Cal: missing date${e?"2":"1"} parameter for comparison with \`isSameDate(date1, date2)\`.`);if(A(e)){if(!A(o))return console.warn(`Vue Cal: invalid date2 provided for comparison with \`isSameDate(date1, date2)\`: \`${o}\`.`)}else return console.warn(`Vue Cal: invalid date1 provided for comparison with \`isSameDate(date1, date2)\`: \`${e}\`.`);return e.getFullYear()===o.getFullYear()&&e.getMonth()===o.getMonth()&&e.getDate()===o.getDate()},V=(e,o,i)=>A(e)?e.getTime()>=o&&e.getTime()<=i:console.warn(`Vue Cal: invalid date provided to \`isInRange(date, rangeStart, rangeEnd)\`: \`${e}\`.`),d=e=>{const o=e.getFullYear();return!(o%400)||o%100&&!(o%4)},c=(e=null,o)=>{const i=e&&new Date(e.valueOf())||new Date,k=o?7:6;return i.setDate(i.getDate()-(i.getDay()+k)%7),i},y=e=>e instanceof Date?e:(e.length===10&&(e+=" 00:00"),new Date(e.replace(/-/g,"/"))),a=e=>e.getHours()*60+e.getMinutes(),O=(e,o)=>{typeof e=="string"&&(e=e.replace(/-/g,"/")),typeof o=="string"&&(o=o.replace(/-/g,"/")),e=new Date(e).setHours(0,0,0,0),o=new Date(o).setHours(0,0,1,0);const i=(new Date(o).getTimezoneOffset()-new Date(e).getTimezoneOffset())*60*1e3;return Math.ceil((o-e-i)/(24*3600*1e3))},C=(e,o,i)=>Math.abs(e.getTime()-o.getTime())<=i*60*1e3,A=e=>e&&e instanceof Date&&!isNaN(e),R=(e,o="YYYY-MM-DD",i=null)=>{if(i||(i=W.value),o||(o="YYYY-MM-DD"),o==="YYYY-MM-DD")return re(e);j={},b={};const k={YYYY:()=>H(e,i).YYYY,YY:()=>H(e,i).YY(),M:()=>H(e,i).M,MM:()=>H(e,i).MM(),MMM:()=>H(e,i).MMM(),MMMM:()=>H(e,i).MMMM(),MMMMG:()=>H(e,i).MMMMG(),D:()=>H(e,i).D,DD:()=>H(e,i).DD(),S:()=>H(e,i).S(),d:()=>H(e,i).d,dd:()=>H(e,i).dd(),ddd:()=>H(e,i).ddd(),dddd:()=>H(e,i).dddd(),HH:()=>B(e,i).HH,H:()=>B(e,i).H,hh:()=>B(e,i).hh,h:()=>B(e,i).h,am:()=>B(e,i).am,AM:()=>B(e,i).AM,mm:()=>B(e,i).mm,m:()=>B(e,i).m,s:()=>B(e,i).s};return o.replace(/(\{[a-zA-Z]+\}|[a-zA-Z]+)/g,(S,G)=>{const P=k[G.replace(/\{|\}/g,"")];return P!==void 0?P():G})},re=e=>{const o=e.getMonth()+1,i=e.getDate();return`${e.getFullYear()}-${o<10?"0":""}${o}-${i<10?"0":""}${i}`},fe=(e,o="HH:mm",i=null,k=!1)=>{let S=!1;if(k){const[me,ie,te]=[e.getHours(),e.getMinutes(),e.getSeconds()];me+ie+te===141&&(S=!0)}if(e instanceof Date&&o==="HH:mm")return S?"24:00":ee(e);b={},i||(i=W.value);const G=B(e,i),P=o.replace(/(\{[a-zA-Z]+\}|[a-zA-Z]+)/g,(me,ie)=>{const te=G[ie.replace(/\{|\}/g,"")];return te!==void 0?te:ie});return S?P.replace("23:59","24:00"):P},ee=e=>{const o=e.getHours(),i=e.getMinutes();return`${(o<10?"0":"")+o}:${(i<10?"0":"")+i}`},ve=e=>{const o=Math.floor(e/60).toString().padStart(2,0),i=(e%60).toString().padStart(2,0);return`${o}:${i}`},ae=e=>{if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},H=(e,o)=>{if(j.D)return j;const i=e.getFullYear(),k=e.getMonth()+1,S=e.getDate(),P=(e.getDay()-1+7)%7;return j={YYYY:i,YY:()=>i.toString().substring(2),M:k,MM:()=>k.toString().padStart(2,0),MMM:()=>o.months[k-1].substring(0,3),MMMM:()=>o.months[k-1],MMMMG:()=>(o.monthsGenitive||o.months)[k-1],D:S,DD:()=>S.toString().padStart(2,0),S:()=>ae(S),d:P+1,dd:()=>o.weekDaysShort.length?o.weekDaysShort[P]:o.weekDays[P][0],ddd:()=>o.weekDaysShort.length?o.weekDaysShort[P]:o.weekDays[P].substr(0,3),dddd:()=>o.weekDays[P]},j},B=(e,o)=>{if(b.am)return b;let i,k,S;e instanceof Date?(i=e.getHours(),k=e.getMinutes(),S=e.getSeconds()):(i=Math.floor(e/60),k=Math.floor(e%60));const G=i%12?i%12:12,P=(o||{am:"am",pm:"pm"})[i===24||i<12?"am":"pm"];return b={H:i,h:G,HH:i.toString().padStart(2,0),hh:G.toString().padStart(2,0),am:P,AM:P.toUpperCase(),m:k,mm:k.toString().padStart(2,0),s:S},b};return{addDatePrototypes:m,removeDatePrototypes:x,updateTexts:L,addDays:T,subtractDays:$,addHours:F,subtractHours:s,addMinutes:w,subtractMinutes:t,snapToInterval:r,getWeek:D,isToday:f,isSameDate:_,isInRange:V,isLeapYear:d,getPreviousFirstDayOfWeek:c,stringToDate:y,dateToMinutes:a,countDays:O,datesInSameTimeStep:C,isValid:A,formatDate:R,formatDateLite:re,formatTime:fe,formatTimeLite:ee,formatMinutes:ve}},Pe=u=>{const{dateUtils:n,config:v}=u;let Y=0;const j=E(()=>{const s={byDate:{},recurring:[],multiday:[],byId:{}};return v.events.sort((t,r)=>t.start-r.start<0?-1:1).forEach(t=>{b(t),t._||(t._={}),t._.id=t._.id||++Y,t.delete||(t.delete=r=>I(t._.id,r)),t._.deleting=!1,t._.deleted=!1,t.isOverlapping=(r=null)=>t.getOverlappingEvents(r).length,t.getOverlappingEvents=(r=null)=>{var D;return $(m(n.formatDate((r==null?void 0:r.start)||t.start),!0),{start:(r==null?void 0:r.start)||t.start,end:(r==null?void 0:r.end)||t.end},{excludeIds:[t._.id],schedule:(D=v.schedules)!=null&&D.length?~~((r==null?void 0:r.schedule)||t.schedule):null})},t._.register=r=>{t._.$el=r,t._.fireCreated&&(u.emit("event-created",t),delete t._.fireCreated)},t._.unregister=()=>{t._.$el=null,t._.register=null,t.isOverlapping=null,t.getOverlappingEvents=null,t.delete=null},s.byId[t._.id]=t,t.recurring?s.recurring.push(t._.id):t._.multiday?(s.multiday.push(t._.id),s.byDate[t._.startFormatted]||(s.byDate[t._.startFormatted]=[]),s.byDate[t._.startFormatted].push(t._.id)):(s.byDate[t._.startFormatted]||(s.byDate[t._.startFormatted]=[]),s.byDate[t._.startFormatted].push(t._.id))}),s}),b=s=>{if(typeof s.start=="string"&&(s.start=n.stringToDate(s.start)),typeof s.end=="string"&&(s.end=n.stringToDate(s.end)),s.start.setSeconds(0,0),s.end.setSeconds(0,0),isNaN(s.start)||isNaN(s.end)){isNaN(s.start)?console.error(`Vue Cal: invalid start date for event "${s.title}".`,s.start):console.error(`Vue Cal: invalid end date for event "${s.title}".`,s.end);return}else s.end.getTime()<s.start.getTime()&&console.error(`Vue Cal: invalid event dates for event "${s.title}". The event ends before it starts.`,s.start,s.end);s._||(s._={}),s._.multiday=!n.isSameDate(s.start,new Date(s.end.getTime()-1)),s._.startFormatted=n.formatDate(s.start),s._.startMinutes=~~n.dateToMinutes(s.start),s._.endMinutes=~~n.dateToMinutes(s.end);const w=s.start.getHours(),t=s.start.getMinutes().toString().padStart(2,0),r=s.end.getHours(),D=s.end.getMinutes().toString().padStart(2,0);s._.startTimeFormatted24=`${w.toString().padStart(2,0)}:${t}`,s._.startTimeFormatted12=`${w%12||12}${t?`:${t}`:""} ${w<12?"AM":"PM"}`,s._.endTimeFormatted24=`${r.toString().padStart(2,0)}:${D}`,s._.endTimeFormatted12=`${r%12||12}${D?`:${D}`:""} ${r<12?"AM":"PM"}`,s._.duration=Math.abs(~~((s.end-s.start)/6e4))},W=s=>j.value.byId[s],m=(s,w=!1,t=!1)=>{let r=j.value.byDate[s]||[];return r=w||t?r.map(W):r,t||(r=r.filter(D=>!D.background),w||(r=r.map(D=>D._.id))),r},x=s=>{const w={};return s.forEach(({startFormatted:t})=>{w[t]=[];const r=m(t,!1,!0);r.length&&w[t].push(...r)}),w},L=s=>{if(!s.start||!s.end){console.error("Vue Cal: Cannot create an event without valid start and end dates.");return}return v.snapToInterval&&(n.snapToInterval(s.start,v.snapToInterval),n.snapToInterval(s.end,v.snapToInterval)),s={...s},s._||(s._={}),s._.id=++Y,s._.fireCreated=!0,v.events.push(s),s},I=(s,w=0)=>{var D;if(!v.editableEvents.delete)return console.info("Vue Cal: Event deletion is disabled. Enable it with the `editable-events` props.");if(!s)return console.warn("Vue Cal: Cannot delete event without its ID.");const t=v.events.findIndex(f=>f._.id===s);if(t===-1)return console.warn(`Vue Cal: Cannot delete unknown event \`${s}\`.`);const r=v.events[t];if(r.deletable===!1)return console.warn(`Vue Cal: Can't delete event \`${s}\` since it was explicitely set to \`delete: false\`.`);switch(w){case 0:r._.deleting?v.events.splice(t,1):r._.deleting=!0;break;case 1:r._.deleting=!0;break;case 2:r._.deleted=!0,v.events[t]._.deleted=!0,(D=r._.$el)==null||D.dispatchEvent(new CustomEvent("event-deleted",{detail:r._.id}));break;case 3:v.events.splice(t,1),u.emit("update:events",v.events),u.emit("event-delete",r);break}return!0},T=s=>{const w=m(s,!0);if(!w.length)return{cellOverlaps:{},longestStreak:0};let t={},r=[],D=0;w.sort((f,_)=>f.start-_.start||f.end-f.start-(_.end-_.start));for(const f of w){const _=f._.id;t[_]||(t[_]={overlaps:new Set,maxConcurrent:1,position:0}),r=r.filter(a=>a.end>f.start);let V=r.filter(a=>{var C;return(!((C=v.schedules)!=null&&C.length)||f.schedule===a.schedule)&&a.start<f.end}),d=new Set(V.map(a=>{var O;return((O=t[a._.id])==null?void 0:O.position)??0})),c=0;for(;d.has(c);)c++;t[_].position=c,r.push(f);let y=Math.max(1,...V.map(a=>{var O;return((O=t[a._.id])==null?void 0:O.maxConcurrent)??1}));t[_].maxConcurrent=Math.max(V.length+1,y);for(const a of V)t[a._.id].overlaps.add(_),t[_].overlaps.add(a._.id),t[a._.id].maxConcurrent=t[_].maxConcurrent;D=Math.max(D,t[_].maxConcurrent)}for(const f in t)t[f].overlaps=[...t[f].overlaps];return{cellOverlaps:t,longestStreak:D}},$=(s=[],{start:w,end:t},{excludeIds:r=[],schedule:D=null})=>{var V;const f=new Set(r),_=[];for(const d of s)!f.has((V=d._)==null?void 0:V.id)&&(D===null||D===d.schedule)&&F(d,w,t)&&_.push(d);return _},F=(s,w,t)=>{const r=s.allDay||!v.time,D=r?new Date(s.start).setHours(0,0,0,0):s.start.getTime(),f=r?new Date(s.end).setHours(23,59,59,999):s.end.getTime(),_=r?new Date(w).setHours(0,0,0,0):w.getTime(),V=r?new Date(t).setHours(23,59,59,999):t.getTime();return f>_&&D<V};return{events:j,getEvent:W,getEventsByDate:m,getViewEvents:x,getCellOverlappingEvents:T,getEventsInRange:$,createEvent:L,deleteEvent:I,isEventInRange:F}},Le=({config:u,dateUtils:n,emit:v,texts:Y,eventsManager:j},b)=>{const{availableViews:W}=u,m=se(u.view&&W[u.view]?u.view:u.defaultView),x=se(u.selectedDate||null);let L=se(new Date);const I=se(new Date(u.viewDate||L.value));I.value.setHours(0,0,0,0);const T=se(new Date(I));let $=null;const F=E(()=>m.value==="month"?T.value:c.value),s=E(()=>m.value==="month"?new Date(T.value.getFullYear(),T.value.getMonth()+1,0,23,59,59,999):a.value),w=E(()=>m.value==="week"?n.getPreviousFirstDayOfWeek(c.value,u.startWeekOnSunday):m.value==="month"?c.value:F.value),t=E(()=>{if(m.value==="week"){const l=n.addDays(w.value,7);return l.setMilliseconds(-1),l}else if(m.value==="month")return a.value;return s.value}),r=E(()=>{const l=L.value.getTime();if(m.value==="week")return w.value.getTime()<=l&&l<=t.value.getTime();const g=c.value.getTime(),M=a.value.getTime();return g<=l&&l<=M});function D(){L.value=new Date,$=setTimeout(D,60*1e3)}function f(){$=setTimeout(D,(60-new Date().getSeconds())*1e3),D()}const _=E(()=>{if(!u.availableViews[m.value])return 1;let l=u.availableViews[m.value].cols;return u.hasHiddenDays&&["week","month"].includes(m.value)&&(l-=u.hasHiddenDays),l}),V=E(()=>{var l;return((l=u.availableViews[m.value])==null?void 0:l.rows)||1}),d=E(()=>_.value*V.value),c=E(()=>{if(m.value==="month"){let l=T.value.getDay()||7;return u.startWeekOnSunday&&!u.hideWeekdays[7]&&(l+=1),u.viewDayOffset&&(l-=u.viewDayOffset),n.subtractDays(T.value,l-1)}else if(m.value==="week"){const l="1234567".split("").filter(M=>!Object.keys(u.hideWeekdays).includes(M));let g=Math.min(...l);return u.startWeekOnSunday&&!u.hideWeekdays[7]&&(g=1),u.viewDayOffset&&(g+=u.viewDayOffset),n.addDays(T.value,g-1)}else return T.value}),y=E(()=>{const l=[],g=["days","week","month"].includes(m.value);let M=0;for(let p=0;p<d.value+M;p++)switch(m.value){case"day":case"days":case"week":case"month":{const N=n.addDays(c.value,p),De=N.getDay()||7;if(g&&u.hasHiddenDays&&u.hideWeekdays[De]){M++;continue}const ne=new Date(N);ne.setHours(23,59,59,999),l.push({start:N,startFormatted:n.formatDate(N),end:ne});break}case"year":l.push({start:new Date(c.value.getFullYear(),p,1,0,0,0,0),end:new Date(c.value.getFullYear(),p+1,0,23,59,59,999)});break;case"years":l.push({start:new Date(c.value.getFullYear()+p,0,1,0,0,0,0),end:new Date(c.value.getFullYear()+p+1,0,0,23,59,59,999)});break}return l}),a=E(()=>y.value[y.value.length-1].end),O=se("right"),C=E(()=>{const l=Object.keys(u.availableViews);return l[l.indexOf(m.value)+1]}),A=E(()=>{const l=Object.keys(u.availableViews);return l[l.indexOf(m.value)-1]});function R(l,g,M=!1){if(!g||!g[l])return l+1;const p=g[l];return M&&typeof p=="string"?p.substring(0,3):p}function re(l,g,M){const{monthsArray:p,monthBeforeDay:N,canTruncate:De,xs:ne}=M,K=l.getMonth(),Q=l.getFullYear(),X=g.getMonth(),le=g.getFullYear(),ge=K!==X,Ve=Q!==le,q=De&&(ne||ge),ue=l.getDate(),oe=g.getDate();return Ve?N?`${R(K,p,q)} ${ue}, ${Q} - ${R(X,p,q)} ${oe}, ${le}`:`${ue} ${R(K,p,q)} ${Q} - ${oe} ${R(X,p,q)} ${le}`:ge?N?`${R(K,p,q)} ${ue} - ${R(X,p,q)} ${oe}, ${Q}`:`${ue} ${R(K,p,q)} - ${oe} ${R(X,p,q)} ${Q}`:N?`${R(K,p,q)} ${ue}-${oe}, ${Q}`:`${ue}-${oe} ${R(K,p,q)} ${Q}`}const fe=E(()=>{const{dateFormat:l,months:g,monthsGenitive:M,week:p,truncations:N}=Y,De=u.locale,ne=N!==!1,K=l.indexOf("M")<l.indexOf("D"),Q=M&&De==="el"?M:g;switch(m.value){case"day":return n.formatDate(c.value,l);case"days":case"week":{const X={monthsArray:Q,monthBeforeDay:K,canTruncate:ne,xs:u.xs};let le=re(c.value,a.value,X);if(m.value==="week"){const ge=n.getWeek(c.value,u.startWeekOnSunday&&!u.hideWeekdays[7]);le+=` <small>${p} ${ge}</small>`}return le}case"month":{const X=`${u.xs&&ne?"MMM":"MMMM"} YYYY`;return n.formatDate(F.value,X)}case"year":return c.value.getFullYear();case"years":return`${c.value.getFullYear()} - ${s.value.getFullYear()}`}});function ee(){switch(T.value=new Date(I.value||L.value),T.value.setHours(0,0,0,0),m.value){case"day":break;case"days":break;case"week":T.value=n.getPreviousFirstDayOfWeek(T.value,u.startWeekOnSunday&&!u.hideWeekdays[7]);break;case"month":T.value=new Date(T.value.getFullYear(),T.value.getMonth(),1,0,0,0,0);break;case"year":T.value=new Date(T.value.getFullYear(),0,1,0,0,0,0);break;case"years":T.value=new Date(T.value.getFullYear()-T.value.getFullYear()%d.value,0,1,0,0,0,0);break}u.ready&&v("view-change",{id:m.value,title:fe.value,start:F.value,end:s.value,extendedStart:w.value,extendedEnd:t.value,cellDates:y.value,containsToday:r.value,events:ye.value}),L.value=new Date}function ve(l){const g=m.value,M=u.availableViews[g];l[g]&&JSON.stringify(l[g])===JSON.stringify(M)||ee()}function ae(l,g=!0){const M=Object.keys(u.availableViews);m.value!==l&&(M.includes(l)?(O.value=M.indexOf(l)<M.indexOf(m.value)?"left":"right",m.value=l,v("update:view",l),ee()):console.warn(`Vue Cal: the \`${l}\` view is not available.`))}function H(){C.value?ae(C.value):console.warn("Vue Cal: no broader view is available.")}function B(){A.value?ae(A.value):console.warn("Vue Cal: no narrower view is available.")}function e(){i(!1)}function o(){i(!0)}function i(l=!0){let g=new Date(I.value);switch(m.value){case"day":case"days":l?g=n.addDays(a.value,1):g=n.subtractDays(c.value,d.value);break;case"week":{l?(g=n.addDays(t.value,1),g.setHours(0,0,0,0)):g=n.subtractDays(w.value,d.value);break}case"month":{const M=l?1:-1;g=new Date(g.getFullYear(),g.getMonth()+M,1,0,0,0,0);break}case"year":{const M=l?1:-1;g=new Date(g.getFullYear()+M,1,1,0,0,0,0);break}case"years":{const M=l?d.value:-d.value;g=new Date(g.getFullYear()+M,1,1,0,0,0,0);break}}S(g)}function k(){const l=new Date;l.setHours(0,0,0,0),S(l)}function S(l,g=!0,M=!1){if(!n.isValid(l))return console.warn("Vue Cal: can't navigate to the given date: invalid date provided to `updateViewDate(date)`.");let[p,N]=[c.value,a.value];m.value==="month"&&([p,N]=[F.value,s.value]),(!n.isInRange(l,p,N)||M)&&(l.setHours(0,0,0,0),O.value=l.getTime()<p.getTime()?"left":"right",I.value=l,g&&v("update:viewDate",l),ee())}function G(l,g=!0){if(n.isValid(l)){const{isValid:M,isSameDate:p}=n;(!x.value||!M(x.value)||!p(l,x.value))&&(l.setHours(0,0,0,0),x.value=l,g&&v("update:selectedDate",l))}else return console.warn("Vue Cal: can't update the selected date: invalid date provided to `updateSelectedDate(date)`.")}function P(l){!l&&!T.value.getDay()?S(n.addDays(T.value,1),!0,!0):(O.value="left",ee())}function me(l){l&&u.startWeekOnSunday&&!T.value.getDay()?S(n.addDays(T.value,1),!0,!0):!l&&u.startWeekOnSunday&&T.value.getDay()===1&&S(n.subtractDays(T.value,1),!0,!0)}function ie(){console.log("toggling weekdays",u.hideWeekdays)}function te(l){var p;const g=(p=b.value)==null?void 0:p.querySelector(".vuecal__scrollable"),M=l?l*u.timeCellHeight/u.timeStep:0;g==null||g.scrollTo({top:M,behavior:"smooth"})}function pe(){const l=new Date;te(l.getHours()*60+l.getMinutes())}function Me(){te(0)}const ye=E(()=>j.getViewEvents(y.value)),Ee=j.createEvent,be=j.deleteEvent;return J(()=>u.view,l=>ae(l,!1)),J(()=>u.availableViews,ve),J(()=>u.datePicker,()=>ae("month",!1)),J(()=>u.viewDate,l=>S(l,!1)),J(()=>u.selectedDate,l=>G(l,!1)),J(()=>u.startWeekOnSunday,l=>P(l)),J(()=>u.hideWeekends,l=>me(l)),J(()=>u.hideWeekdays,ie),J(()=>d.value,()=>{d.value>90&&console.warn("Vue Cal: high cell count detected. Performance may degrade when interactions are enabled.")}),J(()=>u.watchRealTime,l=>{l&&u.time?f():$=clearTimeout($)}),ee(),u.time&&u.watchRealTime&&f(),Oe(()=>$=clearTimeout($)),{now:L,id:m,broaderView:C,narrowerView:A,title:fe,viewDate:I,start:F,end:s,extendedStart:w,extendedEnd:t,firstCellDate:c,lastCellDate:a,containsToday:r,selectedDate:x,cellDates:y,cols:_,rows:V,events:ye,transitionDirection:O,switch:ae,broader:H,narrower:B,previous:e,next:o,navigate:i,goToToday:k,updateViewDate:S,updateSelectedDate:G,scrollToCurrentTime:pe,scrollToTime:te,scrollTop:Me,createEvent:Ee,deleteEvent:be,get isDay(){return m.value==="day"},get isDays(){return m.value==="days"},get isWeek(){return m.value==="week"},get isMonth(){return m.value==="month"},get isYear(){return m.value==="year"},get isYears(){return m.value==="years"}}},de=ce({texts:{...z.texts},dateUtils:Te(z.texts)}),Fe=({props:u,emit:n,attrs:v,vuecalEl:Y,uid:j})=>{const b=ce({uid:j,emit:n,texts:{...de.texts},dateUtils:{...de.dateUtils},now:new Date,config:{},eventsManager:{},view:{},dnd:{},touch:{isDraggingCell:!1,isDraggingEvent:!1,isResizingEvent:!1}});return b.dateUtils=Te(Object.assign(z.texts,b.texts)),b.config=$e(b,u,v),b.eventsManager=Pe(b),b.view=Le(b,Y),b.dnd=Ie(b),b},We=u=>{de.texts={...z.texts,...u},de.dateUtils.updateTexts(de.texts)},{addDatePrototypes:xe,removeDatePrototypes:Ne,updateTexts:ze,addDays:Be,subtractDays:Ge,addHours:Ze,subtractHours:Je,addMinutes:qe,subtractMinutes:Ue,getWeek:Ke,isToday:Qe,isSameDate:Xe,isInRange:et,isLeapYear:tt,getPreviousFirstDayOfWeek:at,stringToDate:nt,dateToMinutes:st,countDays:rt,datesInSameTimeStep:it,isValid:lt,formatDate:ut,formatDateLite:ot,formatTime:dt,formatTimeLite:ct,formatMinutes:ft}=de.dateUtils;export{Be as a,xe as b,He as c,je as d,Fe as e,ut as f,Re as m,Ce as p,nt as s,We as u,Se as w};
